<!doctype html>
<html lang="fr">


<head>
  <!-- Meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Initiation à TKinter">
  <meta name="author" content="Olivier Lecluse, Ronan Jahier">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

  <title>Les dialogues — Informatique au lycée</title>
  <!-- mise en forme Ronan -->
  <link rel="stylesheet" type="text/css" href="../css/prism.css" />

</head>

<body>
  <div class="container-fluid px-0 mx-0 ">



    <article>
      <div class="row mx-0">
        <div class="col-sm-8 offset-sm-2">
          <h1>Les dialogues</h1>


        </div>
      </div>


      <div class="row mx-0">
        <div class="col-sm-8 offset-sm-2">
          <p>Revenons sur la notion de boîtes de dialogue que nous avons brièvement rencontré au début de nos activités.
            Dans cet exemple, nous en verrons de différents type avec des situations illustrant leur utilisation.</p>
          <p>Le programme suivant illustre l’utilisation de 3 types de boîtes de dialogue parmi les plus courantes. Il
            existe plusieurs boîtes de message :</p>
          <ul>
            <li>les alertes (<code class="language-python">messagebox</code>),</li>
            <li>celles qui demandent une info (<code class="language-python">simpledialog</code>),</li>
            <li>celles qui permettent de choisir un fichier (<code class="language-python">filedialog</code>)</li>
          </ul>
          <div class="hll">
            <pre><span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter.messagebox</span> <span class="kn">import</span> <span class="n">showinfo</span>          <span class="c1"># Les alertes</span>
<span class="kn">from</span> <span class="nn">tkinter.simpledialog</span> <span class="kn">import</span> <span class="n">askstring</span>       <span class="c1"># demande d&#39;infos</span>
<span class="kn">from</span> <span class="nn">tkinter.filedialog</span> <span class="kn">import</span> <span class="n">askopenfilename</span>   <span class="c1"># dialogue fichiers</span>

<span class="c1"># Exemple avec messagebox</span>
<span class="k">def</span> <span class="nf">bonjour</span><span class="p">():</span>
    <span class="n">showinfo</span><span class="p">(</span><span class="s2">&quot;Politesse&quot;</span><span class="p">,</span><span class="s2">&quot;Bonjour tout le monde&quot;</span><span class="p">)</span>
    <span class="n">info</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;T&#39;as vu je suis poli!&quot;</span><span class="p">)</span>

    <span class="c1"># Exemple avec simpledialog</span>
<span class="k">def</span> <span class="nf">motdepasse</span><span class="p">():</span>
    <span class="n">passe</span><span class="o">=</span><span class="n">askstring</span><span class="p">(</span><span class="s2">&quot;Sécurité&quot;</span><span class="p">,</span> <span class="s2">&quot;Quel est le mot de passe?&quot;</span><span class="p">)</span>
    <span class="n">info</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Je connais ton mot de passe: &quot;</span><span class="o">+</span><span class="n">passe</span><span class="p">)</span>

    <span class="c1"># Exemple avec filedialog pour ouvrir un fichier</span>
<span class="k">def</span> <span class="nf">fichier</span><span class="p">():</span>
    <span class="n">nom</span><span class="o">=</span><span class="n">askopenfilename</span><span class="p">()</span>
    <span class="n">info</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Fichier choisi : &quot;</span><span class="o">+</span><span class="n">nom</span><span class="p">)</span>

<span class="n">mon_app</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">mon_app</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Boîtes de message&quot;</span><span class="p">)</span>

<span class="n">info</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Ici des informations en temps réel!&quot;</span><span class="p">,</span> <span class="n">font</span> <span class="o">=</span> <span class="s2">&quot;arial 20 bold&quot;</span><span class="p">)</span>
<span class="n">info</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">bouton1</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot; Formule de politesse !&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">font</span> <span class="o">=</span> <span class="s2">&quot;arial 20 bold&quot;</span><span class="p">,</span>
    <span class="n">bg</span> <span class="o">=</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span><span class="n">fg</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">comman</span>
<span class="o">=</span> <span class="n">bonjour</span><span class="p">)</span>
<span class="n">bouton1</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">bouton2</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot; Mot de passe&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="s2">&quot;arial 20 bold&quot;</span><span class="p">,</span>
    <span class="n">bg</span> <span class="o">=</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="n">fg</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="n">motdepasse</span><span class="p">)</span>
<span class="n">bouton2</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">bouton3</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot; Ouvrir Fichier&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="s2">&quot;arial 20 bold&quot;</span><span class="p">,</span>
<span class="n">bg</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span><span class="n">fg</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="n">command</span> <span class="o">=</span> <span class="n">fichier</span><span class="p">)</span>
<span class="n">bouton3</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">mon_app</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre>
          </div>
          <p>Vous avez-vu avec quelle simplicité ces dialogues se manipulent. Pour chaque type de dialogue, voici les
            méyhodes les plus utiles :</p>
          <ul>
            <li>Méthodes de <code class="language-python">messagebox :</code>showinfo<code
                class="language-python">,</code>showwarning<code class="language-python">,</code>showerror<code
                class="language-python">,</code>askquestion<code class="language-python">,</code>askokcancel<code
                class="language-python">,</code>askyesno<code class="language-python">,</code>askretrycancel`</li>
            <li>Méthodes de <code class="language-python">simpledialog</code> : <code
                class="language-python">askstring</code>, <code class="language-python">askinteger</code> et <code
                class="language-python">askfloat</code></li>
            <li>Méthodes de <code class="language-python">filedialog</code> : <code
                class="language-python">askopenfilename</code> et <code class="language-python">asksaveasfilename</code>
            </li>
          </ul>
          <h2 id="dialogue-de-choix-de-couleur">Dialogue de choix de couleur</h2>
          <p>Il existe un autre type de dialogue destiné à choisir une couleur. Voici comment il fonctionne :</p>
          <div class="hll">
            <pre><span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter.colorchooser</span> <span class="kn">import</span> <span class="n">askcolor</span>

<span class="c1"># Affiche la fenetre de sélection de couleur du système</span>
<span class="k">def</span> <span class="nf">choix</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">askcolor</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;#FFEEDD&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Choix de couleur&quot;</span><span class="p">)</span>
    <span class="c1"># La réponse est un couple avec deux formats de codage :</span>
    <span class="c1"># ((R,G,B) , #Hexadecimal)</span>
    <span class="n">resultat</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>

<span class="c1"># Création de la fenetre proncipale</span>
<span class="n">mon_app</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">mon_app</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Choix de couleur&quot;</span><span class="p">)</span>
<span class="c1"># Création des boutons</span>
<span class="n">resultat</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
<span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span> <span class="n">textvariable</span> <span class="o">=</span> <span class="n">resultat</span><span class="p">)</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">)</span>

<span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Choisir&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;darkgreen&quot;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="n">choix</span><span class="p">)</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Quitter&#39;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="n">mon_app</span><span class="o">.</span><span class="n">destroy</span><span class="p">,</span><span class="n">fg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">mon_app</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre>
          </div>
          <h2 id="a-vous-de-jouer">A vous de jouer</h2>
          <p>Reprendre l'application dessin réalisée précédemment et ajouter un bouton permettant de choisir la couleur
            avec laquelle vous allez dessiner.</p>
          <p>Au moment de quitter, demander un message de confirmation avant de quitter.</p>
          <p>Indication : pour récupérer la couleur sous forme exploitable par TKinter, vous exploiterez la réponde du
            dialogue sous la forme (R,V,B) avec une ligne du type :</p>
          <pre><code class="language-python">couleur="#%02x%02x%02x" % (128, 192, 200)
</code></pre>
          <p>Voici le résultat attendu :
            <img src="../../../../external.html?link=https://postimg.cc/ZWPLcqWy" alt="">
          </p>
          <div class="hll">
            <pre><span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter.colorchooser</span> <span class="kn">import</span> <span class="n">askcolor</span>
<span class="kn">from</span> <span class="nn">tkinter.messagebox</span> <span class="kn">import</span> <span class="n">askokcancel</span>

<span class="c1"># Constantes</span>
<span class="n">LARGEUR</span> <span class="o">=</span> <span class="mi">480</span>
<span class="n">HAUTEUR</span> <span class="o">=</span> <span class="mi">320</span>

<span class="c1"># Variables globales</span>
<span class="n">old_x</span><span class="p">,</span> <span class="n">old_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
<span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;#</span><span class="si">%02x%02x%02x</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">clic</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Gestion de l&#39;événement clic gauche sur la zone graphique &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">old_x</span><span class="p">,</span> <span class="n">old_y</span>
    <span class="c1"># position du pointeur de la souris</span>
    <span class="n">old_x</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span>
    <span class="n">old_y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span>

<span class="k">def</span> <span class="nf">drag</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">old_x</span><span class="p">,</span> <span class="n">old_y</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span>
    <span class="n">surface_dessin</span><span class="o">.</span><span class="n">create_line</span><span class="p">(</span><span class="n">old_x</span><span class="p">,</span> <span class="n">old_y</span> <span class="p">,</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">couleur</span><span class="p">)</span>

    <span class="n">old_x</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span>
    <span class="n">old_y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span>

<span class="k">def</span> <span class="nf">effacer</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Efface la zone graphique &quot;&quot;&quot;</span>
    <span class="n">surface_dessin</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">ALL</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">choix_couleur</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">couleur</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">askcolor</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;#FFEEDD&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Choix de couleur&quot;</span><span class="p">)</span>
    <span class="n">couleur</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">quitter</span><span class="p">():</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">askokcancel</span><span class="p">(</span><span class="s2">&quot;Quitter l&#39;application&quot;</span><span class="p">,</span><span class="s2">&quot;Etes vous sur ?&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
        <span class="n">mon_app</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
        <span class="n">mon_app</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>

<span class="c1"># Création de la fenêtre principale (main window)</span>
<span class="n">mon_app</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">mon_app</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Dessin&#39;</span><span class="p">)</span>

<span class="c1"># Création d&#39;un widget Canvas (zone graphique)</span>
<span class="n">surface_dessin</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">LARGEUR</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">HAUTEUR</span><span class="p">,</span> <span class="n">bg</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="n">surface_dessin</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">padx</span> <span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span> <span class="o">=</span><span class="mi">5</span><span class="p">)</span>


<span class="c1"># La méthode bind() permet de lier un événement avec une fonction :</span>
<span class="c1"># un clic gauche sur la surface provoquera l&#39;appel de la fonction clic()</span>
<span class="n">surface_dessin</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;Button-1&gt;&#39;</span><span class="p">,</span> <span class="n">clic</span><span class="p">)</span>
<span class="n">surface_dessin</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;B1-Motion&gt;&#39;</span><span class="p">,</span> <span class="n">drag</span><span class="p">)</span>
<span class="n">surface_dessin</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">padx</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">pady</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>

<span class="c1"># Création d&#39;un widget Button (bouton effacer)</span>
<span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Effacer&#39;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="n">effacer</span><span class="p">)</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span><span class="n">padx</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">pady</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
<span class="c1"># Création d&#39;un widget Button (bouton Couleur)</span>
<span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span><span class="s1">&#39;Couleur&#39;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="n">choix_couleur</span><span class="p">)</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">pady</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
<span class="c1"># Création d&#39;un widget Button (bouton Quitter)</span>
<span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">mon_app</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Quitter&#39;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="n">quitter</span><span class="p">)</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">mon_app</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre>
          </div>

        </div>
      </div>


    </article>


  </div>

  <div class="form-group">
    &nbsp;
  </div>
  <footer class="text-center footer" id="footer">
    <hr>
    <a href="https://www.lecluse.fr/info/tkinter/">Visitez le site original d'Olivier Lécluse.</a><br>
    <img src="../../../licensebuttons.net/l/by-sa/4.0/80x15.png" alt="Licence Creative Commons BY-SA 4.0"> — Olivier
    Lecluse — 2020
  </footer>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>
        <!-- Ajout de Ronan-->
        <script src="../js/prism.js"></script>
</body>


</html>