<!doctype html>
<html lang="en">

<!-- Mirrored from tkdocs.com/tutorial/onepage.html by HTTraQt Website Copier/1.x [Karbofos 2012-2017] dim., 21 mars 2021 07:06:37 GMT -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>TkDocs Tutorial</title>
    <meta http-equiv="Content-Language" content="English" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="Modern Tk Tutorial for Python, Tcl, Ruby, and Perl" />
    <meta name="keywords" content="TkDocs, Tk, Tkinter, Tkx, GUI, Tcl, Python, Perl, Ruby" />	
  
   <link rel="stylesheet" href="../../stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
   <link rel="stylesheet" href="../../maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">  
    <link rel="stylesheet" type="text/css" href="../tkc.css" media="screen,print" /> 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="../../external.html?link=https://www.googletagmanager.com/gtag/js?id=UA-2043168-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-2043168-3');
</script>


</head>
<body>


<div class="container-fluid">



<div class="tutorial onepage">
<nav><ul class="pagination justify-content-center"><li class="page-item"><a class="page-link" href="index.html">Contents</a></li></ul></ul></nav>


<h1>Introduction</h1>

<p>This tutorial will help you quickly get up to speed and build mainstream desktop graphical user 
interfaces with Tk and, in 
particular, Tk 8.5 and 8.6. Tk 8.5 was a milestone release. It marked a significant
departure from older versions of Tk that most people know and <strike>love</strike> recognize.</p>

<p>The downside is that unless you know one or two crucial things, it's actually <em>not</em> that significant a release.
In fact, it will seem like nothing changed at all.
Due to backward compatibility, unless existing programs make a few simple changes, they won't look any
different.  (Imagine if you just moved into a rustic and quirky historical home. You'd want someone to point out where 
they've hidden the light switches and power outlets, wouldn't you?)</p>

<p>If you're new to Tk or creating a new program, this tutorial will ensure you get started the right way. If you've used Tk before, it will help you bring your knowledge right up to date.  And if you're updating code that may have been written years ago, you'll see step-by-step how to bring it into the modern age. It's a cliche, but I can't believe how much I've learned in
writing this tutorial, and I've been using Tk for over twenty-five years.</p>

<p>The general state of Tk documentation (outside the Tcl-oriented reference documentation, which is excellent) is
unfortunately not at a high point these days.  This is particularly true for developers using Tk from languages other than Tcl,
and developers working on multiple platforms.</p>

<p>So this tutorial will, as much as possible, target developers on the three main platforms (Windows, macOS, Linux), and also
be language-neutral. Initially, the tutorial will cover Tcl, Ruby, Perl and Python.
Over time, additional languages may be added.  Even if your own language isn't included, the chances are you'll still
benefit; since all the languages use the same underlying Tk library, there's obviously a lot of overlap.</p>

<p>It's also not a reference guide. It's not going to cover everything, just the essentials you need in 95%
of applications.  The rest you can find in reference documentation.</p>


 <a name="audience"></a><h2>Who This Tutorial Is For</h2>

<p>This tutorial is designed for developers building tools and applications in Tk.  It's also concerned with fairly
mainstream graphical user interfaces, with buttons, lists, checkboxes, rich text editing, 2D graphics, etc.
So if you're either looking to hack on Tk's internal C code or build the next great 3D immersive game interface,
this is probably not the material for you.</p>

<p>This tutorial also doesn't teach you the underlying programming language (Tcl, Ruby, Perl, Python, etc.), so you should
have a basic grasp on that already.   Similarly, you should have a basic familiarity with desktop applications in
general. While you don't have to be a user interface designer, some appreciation of GUI design is always helpful.</p>



 <a name="bestpractices"></a><h2>Modern Best Practices</h2>

<p>This tutorial is all about building modern user interfaces using the current tools Tk has to offer.  It's all about
the best practices you need to know to do this.</p>

<p>For most tools, you wouldn't think you'd have to say something like that. But for Tk, that's not the case.  Tk has had
a very long evolution (see <a href="../../external.html?link=https://tkdocs.com/resources/backgrounder.html">Tk Backgrounder</a>), and any evolution
tends to leave you with a bit of cruft. Couple that with how much graphical user interface platforms and standards
have evolved in that time. You can see where keeping something as large and complex as a GUI library up to date
(and backward compatible) may be challenging.</p>

<p>Tk has, for most of its lifetime, gotten a bad rap, to put it mildly.  Some of this has been well deserved, most of it not so
much.  Like any GUI tool, it can be used to create absolutely terrible looking and outdated user interfaces. Still, with the proper
care and attention, it can also be used to develop spectacularly good ones.  Most people know about the crappy
ones; most of the good ones people don't even know are done in Tk.  In this tutorial, we're going to focus on what
you need to build good user interfaces. Thankfully, this isn't nearly as hard as it used to be before Tk 8.5.</p>

<p>So to sum up: modern desktop graphical user interfaces, using modern conventions and design sense, using the modern tools
provided by Tk 8.5 and 8.6.</p>


<h3>Tk Extensions</h3>

<p>When it comes to modern best practices, Tk extensions deserve a special word of note.  Over the years, 
developers have created all kinds of add-ons to Tk, for example, adding new widgets not available in the core (or at
least not at the time).  Some well-known and quite popular Tk extensions include BLT, Tix, iWidgets, BWidgets; 
there are many, many others.</p>

<p>Many of these extensions were created decades ago.  Because core Tk has always been highly backward compatible,
these extensions generally continue to work with newer versions. However, they may not reflect current platform conventions or styles.
While they "work", they can make your application appear extremely dated or out of place. In many cases, the facilities they provide have been obsoleted by newer and more modern facilities recently built into Tk itself. </p>

<p>If you decide to use Tk extensions, it's highly recommended that you investigate and review your choices carefully.</p>


 <a name="betterway"></a><h2>The Better Way Forward</h2>

<p>Tk gives you a lot of choices.  There are at least six different ways to layout widgets on the screen. 
Multiple widgets can be used to accomplish the same thing, and that's before considering any Tk extensions.  
Tk emphasized backward compatibility, which is a double-edged sword. Most of these
old ways of doing things still keep working, year after year.  That doesn't necessarily mean you should still be 
using some of them.</p>

<p>So there are many in Tk, but frankly, all that choice gets in the way.  If you want to learn and use Tk,
you don't need to know ten different ways to accomplish the same thing. 
You shouldn't need to do all the research, explore all the options, and make a choice yourself.  
You need to know the <em>right</em> way to do things today. 
That's what this tutorial will give you.  Think of it as the documentation equivalent of 
<a href="../../external.html?link=https://basecamp.com/gettingreal/04.6-make-opinionated-software">opinionated software</a>.</p>

<p>So we'll often use different ways of doing things than you'd find in other documentation or examples. Usually, it's because
when those were written, the better ways didn't even exist yet. 
(Here's a litmus test for Tk documentation: does it use the archaic <code>pack</code> instead of the modern <code>grid</code>?)
Later on, once you're an expert, and you're encountering some wacky situation where the typical choice doesn't fit,
you can go hunt around for alternatives.</p>

 <a name="usage"></a><h2>How to Use</h2>

<p>While the tutorial is designed to be used linearly, feel free to jump around as you see fit.  We'll often
provide links to go for more information, whether links to other documentation on this site,
such as our "widget roundup" providing usage info on each Tk widget, or to external documentation, such as
the full reference for a particular command.</p>

<p>The tutorial also lets you select what language (Tcl, Ruby, Perl or Python) to show.  You can change this by the "Show:"
popup menu which is located in the sidebar, near the top right of each page in the tutorial.  But it also lets you see how
Tk is used by all the different languages, which can itself be quite interesting and useful.</p>

<div class=python><p>You can find a GitHub repository containing many of the larger examples 
  at <a href="../../external.html?link=https://github.com/roseman/tkdocs">https://github.com/roseman/tkdocs</a>.
  
</p></div>

<h3>Conventions</h3>

<p>As is typically done, code listings, interpreter or shell commands and responses will be indicated
with a <code>fixed-width font</code>.  When showing an interactive session with the interpreter, the 
parts you enter will be in <code><b>bold fixed-width</b></code>.</p>

<p>When describing procedure or method calls, the literal parts (e.g., the method name) will be in a
plain fixed-width font, parameters where you should fill in the actual value will add italics,
and optional parameters will be surrounded by '?', e.g. <code>set <em>variable</em> <em>?value?</em></code>.</p>


<p>In general, when referring to these procedures or method calls in the text, we'll omit punctuation
(brackets, parentheses, commas, equals, semicolons, etc.) that may be required by a specific language binding.
Method names that consist of multiple words, (e.g., <code>selection_clear</code>) may look slightly different
in different languages (e.g., <code>selection clear</code> in Tcl). In the text, we'll generally use the 
former notation with the underscore. Language-specific code snippets show the full syntax, of course.</p>



  
  
<p>You'll see some paragraphs that are separated from the main text. These are used for several different things. Each is identified with a different icon, as follows:</p>

<div class=python><p>This paragraph consists of material that is specific to the Python binding to Tk.</p></div>

<div class=tcl><p>This paragraph consists of material that is specific to the Tcl binding to Tk.</p></div>

<div class=ruby><p>This paragraph consists of material that is specific to the Ruby binding to Tk.</p></div>

<div class=perl><p>This paragraph consists of material that is specific to the Perl binding to Tk.</p></div>


<div class=tip><p>This paragraph will help point out common mistakes that people make or suggest useful but not
necessarily obvious solutions related to the topic.</p></div>

<div class=upgrade><p>This indicates a new way of doing things in Tk 8.5 or Tk 8.6 that is very different from how things
would have been done previously.  People familiar with older versions of Tk, or working on 
programs developed with older versions of Tk, should pay close attention.</p></div>

<div class=fyi><p>This paragraph provides some additional background information. It's not strictly necessary to learning
the topic at hand, but that might help you understand a bit more about how or why things are done the
way they are.</p></div>


<div class=yuck><p>This indicates an area in Tk that could most charitably be described as a "rough edge."  It may indicate a
bad or missing API requiring you to use a workaround in your code.  Because these things tend to get
fixed up over time, it's worth marking them in your code with a "TODO." That way, you can remember to go
back later and see if a newer API resolves the problem cleanly.</p></div>





<h1>Installing Tk</h1>

<p>In this chapter, you'll get Tk installed on your machine, verify it works, and then see a quick
example of what a Tk program looks like.</p>

<div class="alert installpicker mx-sm-5 mx-md-0 mx-lg-3 mx-xl-5 my-4 text-center" role="alert">
  <h4>Jump to Tk Install Instructions:</h4>
  <div>
    <span class="btn-group btn-group-toggle btn-group-vertical mx-3 mb-3" data-toggle="buttons">
      <label class="btn btn-success btn-sm font-weight-bold px-3 ml-0"><input type="radio" name="lang" id="langpython" value="python">Python</label>
      <label class="btn btn-success btn-sm font-weight-bold px-3 ml-0"><input type="radio" name="lang" id="langtcl" value="tcl">Tcl</label>
      <label class="btn btn-success btn-sm font-weight-bold px-3 ml-0"><input type="radio" name="lang" id="langruby" value="ruby">Ruby</label>
      <label class="btn btn-success btn-sm font-weight-bold px-3 ml-0"><input type="radio" name="lang" id="langperl" value="perl">Perl</label></span>
    <span class="d-none d-lg-inline" style="font-size:1.5rem;font-style:italic;font-weight:bold;">on</span>
    <span class="btn-group btn-group-toggle btn-group-vertical mx-3 mb-3" data-toggle="buttons">
      <label class="btn btn-success btn-sm font-weight-bold px-3 py-2 ml-0"><input type="radio" name="plat" id="platmac" value="mac">macOS</label>
      <label class="btn btn-success btn-sm font-weight-bold px-3 py-2 ml-0"><input type="radio" name="plat" id="platwin" value="win">Windows</label>
      <label class="btn btn-success btn-sm font-weight-bold px-3 py-2 ml-0"><input type="radio" name="plat" id="platx11" value="x11">Linux/X11</label></span>
    <span class="d-none d-lg-inline" style="font-size:1.5rem;font-style:italic;font-weight:bold;">&xrarr;</span>
    <button type="button" class="btn btn-primary btn-lg mx-3 px-4 font-weight-bold font-italic" onclick="installpicker_navigate();">Go!</button></div>
</div>
<script>window.addEventListener('DOMContentLoaded', (event) => {installpicker_setup();});</script>  

<p>Though pretty much all macOS and Linux machines come with Tk installed already, it's often an
older version (typically 8.4.x or an early 8.5).  You want to make sure you've got at least version 8.5 (preferably 8.6) to use the 
new widget set, so if that's not already there, you'll want to install the newer version.</p>

<p>You'll need both Tk and bindings for the language you're using it from. Sometimes these are bundled together,
  sometimes not. Though there are lots of ways to install Tk, often the easiest is to download and install one of the 
versions provided by ActiveState (<a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>).</p>

<div class=python><p>Users of recent Python versions can avoid this intermediate step. Starting with Python 3.7, the binary installers 
available at <a href="../../external.html?link=https://python.org/">python.org</a> now include everything you need to use Tk out of the box.
If you're using an earlier Python version, or want to compile it yourself, you'll need to install Tcl/Tk on your
system to do so. In this case, ActiveState's distributions are still the recommended way to go.</p>

<p><b>Remember, this tutorial assumes you're using Python 3, not Python 2.</b> There are some significant differences between the two, including module naming, which is the first thing you'll encounter when trying Tkinter.</p>
</div>

<div class=fyi><p>ActiveState is a company that sells professional developer tools for dynamic languages.  They also provide
(for free) quality-controlled distributions of some of these languages, and happen to employ
a number of core developers of these languages.</p></div>







 <a name="installmac"></a><h2>Installing Tk on macOS</h2>


<div class=python><a name='install-mac-python'></a><p><span class='installbadge'>Install Tk for Python (Tkinter) on macOS</span></p>
	
<h3>The Easy Way</h3>  

<p>As noted, the easiest way to get Tk and Tkinter installed on your system is using Python's binary installer,
available at <a href="../../external.html?link=https://python.org/">python.org</a>. Thanks to work by Python core developer Ned Deily, binary
installers starting with version 3.7 include Tcl and Tk.
</p>
<div class=fyi><p>Remember, we're using Python 3.x here, not 2.x. As of this writing, the latest 3.9 installer (3.9.0rc1) includes Tk 8.6.8.</p></div>

<p>If, however, you're compiling Python yourself, you'll have more work to do. Read on...</p>


<h3>Installing Tcl/Tk</h3>

<p>The Tkinter module is included with core Python, of course, but you'll need a version of Tcl/Tk on your system to compile it against. Do yourself a huge favor
and get the most recent version.</p>

<p>Whatever you do, <em>do not rely on the Tk versions included in macOS!</em> Older versions included Tk 8.4.x. Even more recent macOS versions include an early 8.5 version (8.5.9, released in 2010), which has several serious bugs that are easily triggered by Tkinter.</p>
  
<p>While there are several different ways to get Tcl and Tk onto your machine, the easiest and most recommended is to use the ActiveTcl distribution.</p>

<p>In your web browser, visit <a href="../../external.html?link=https://www.activestate.com/products/activetcl/">www.activestate.com/products/activetcl</a>.
Download ActiveTcl (as of this writing, it's version 8.6.9). Make sure to download an 8.6.x version, not something older!
Note that you will need to create an account with ActiveState (no cost) to download it. After it's downloaded, run the installer to get Tcl and Tk loaded onto your machine.</p>

<div class=fyi><p>If you're a masochist and want to read about other Tcl/Tk options and variations and how they interact with Python, 
see the <a href="../../external.html?link=https://www.python.org/download/mac/tcltk/">Mac Tcl/Tk</a> page at python.org If you want to compile Tcl/Tk
from source, see <a href="../../external.html?link=https://www.tcl.tk/">www.tcl.tk</a>.</p></div>

<h3>Compiling Python</h3>

<p>When compiling Python from source, you may need to tell it where to find the ActiveTcl (or other) distribution. Otherwise, it might not find any Tcl/Tk distribution (so Tkinter won't work),
or it could find the (ancient and broken) version of Tcl/Tk supplied with macOS.</p>

<p>If you're using Python 3.9 or newer, the build system will look in <code>/Library/Frameworks</code>, where ActiveState and other custom builds are typically installed.</p>

<pre>% <b>./configure</b>
% <b>make</b></pre>
<div class=tip><p>The initial "%" is the Unix shell prompt; you don't have to type it. The rest of it should all go on one line, without adding line breaks.</p></div>

<p>When compiling Python versions prior to 3.9, you will need to add two new command-line options to the initial <code>./configure</code> in the Python build process. The first provides the locations of the Tcl and Tk include files, and the second provides the locations of the Tcl and Tk libraries. These are usually found in two different locations (i.e., <code>Tcl.framework</code> and <code>Tk.framework</code>). You therefore need to provide two locations for the include files and two for the libraries. Note the location of the quotes in the command below and the spaces separating the Tcl and Tk paths.</p>


<pre>
% ./configure --with-tcltk-includes="-I/Library/Frameworks/Tcl.framework/Headers -I/Library/Frameworks/Tk.framework/Headers" --with-tcltk-libs="/Library/Frameworks/Tcl.framework/Tcl /Library/Frameworks/Tk.framework/Tk"
% make
</pre>

<div class=tip><p>If you have multiple versions of Tcl/Tk installed on your system (and in the same frameworks), you may need to check inside the framework to ensure the most recent version is marked as the current one. If not, you may need to adjust your paths to point to the specific version (i.e., <code>Versions/8.<em>x</em>/</code>) within each framework.</p></div>

<p>When everything is built, be sure to test it out. Start Python from your terminal, e.g. 

<pre>% <b>./python.exe</b></pre>

<p>This should give you the Python command prompt.  From the prompt, enter these two commands:</p>
<pre>
&gt;&gt;&gt; <b>import tkinter</b>
&gt;&gt;&gt; <b>tkinter._test()</b>
</pre>

<p>This should pop up a small window; the first line at the top of the window should say "This is Tcl/Tk version 8.6"; make
sure it is not 8.4 or 8.5!</p>

<div class=tip><p>Get an error saying <code>"No module named tkinter"</code>? You're probably using Python 2. This tutorial assumes Python 3.</p></div>

<p>You can also get the exact version of Tcl/Tk that is being used with:</p>
<pre>&gt;&gt;&gt; <b>tkinter.Tcl().eval('info patchlevel')</b></pre>
<p>It should return something like '8.6.9'.</p>

<div class=fyi><p>Verified install using ActiveTcl 8.6.9.8609.2 and Python 3.90rc1 source code from python.org on macOS 10.15.6.</p></div>

</div>



<div class=tcl><a name='install-mac-tcl'></a><p><span class='installbadge'>Install Tk for Tcl on macOS</span></p>

<p>On macOS, the easiest way to get Tk is to install the "ActiveTcl" distribution from ActiveState, 
which includes Tcl, Tk, plus a number of other extension libraries.</p>

<p>In your web browser, go to <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>, and follow
along the links to download the Community Edition of ActiveTcl.
Note that you will need to create an account with ActiveState (no cost) to download it.
Make sure you're downloading an 8.6.x version, not an older version.</p>

<p>Run the installer to get everything loaded onto your machine.
When you're done, you'll find a shiny new application called "Wish 8.6" inside the Utilities
folder of your Applications folder.  This is the "wish" shell, an application that includes
both Tcl and Tk.</p>

<p>If you launch that application, you'll see two windows popup (see below), one titled "Wish" which will
contain your application, and the second titled "Console" which is where you can type in
Tcl/Tk commands.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/wish-mac.png' alt='screen shot'><br />
The Wish application running on macOS.</p>


<p>For convenient use from the Unix command line, you'll also find a script installed as
<code>/usr/local/bin/wish8.6</code> which will launch the same application.</p>

<p>To verify the exact version of Tcl/Tk that you are running, from the Wish console type the following:</p>
<pre>% <b>info patchlevel</b></pre>

<p>We want this to be returning something like '8.6.9'.</p>

<div class=fyi><p>Verified install using ActiveTcl 8.6.9.8609.2 on macOS 10.15.6.</p></div>

</div>

<div class=ruby><a name='install-mac-ruby'></a><p><span class='installbadge'>Install Tk for Ruby (Ruby/Tk) on macOS</span></p>
<p>While previous versions of macOS included both Ruby and Tk (albeit older 8.4 versions),
since Snow Leopard this has no longer been the case.</p>

<p>Ruby/Tk is a binding that links against an existing but separate Tk library.  So, to get the 
latest version of Tk for Ruby, we're going to have to do first download the latest 8.6.x Tcl/Tk version from ActiveState.</p>


<h3>Install ActiveTcl</h3>

<p>The "ActiveTcl" distribution from ActiveState contains the latest Tk, as well as the latest
version of Tcl (which Ruby's Tk bindings use internally to talk to Tk).  In your web browser, 
go to <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>, and follow along the links 
to download the Community Edition of ActiveTcl.  
Note that you will need to create an account with ActiveState (no cost) to download it.
Again, make sure you're downloading an 8.6.x version.</p>

<p>Run the installer and everything will be loaded onto your machine.</p>

<h3>Install Ruby</h3>

<p>Next, you'll want to install Ruby. There are multiple ways to do this, as explained at
 <a href="../../external.html?link=https://www.ruby-lang.org/">www.ruby-lang.org</a>. One option is to use a package manager like
 <a href="../../external.html?link=https://brew.sh/">Homebrew</a>. Once it's been installed (at <code>/usr/local/bin/brew</code>) 
 you can install Ruby from a command prompt (e.g. Terminal) via:</p>
 <pre>% <b>brew install ruby</b></pre>
 
 <div class=tip><p>The initial "%" is the Unix shell prompt; you don't have to type it.</p></div>
 
<p>That should put the Ruby binaries in <code>/usr/local/opt/ruby/bin</code>).
You can check this via <code>brew info ruby</code>. Below, where we use <code>gem</code> or <code>irb</code>,
make sure you're running the version you just installed. One way to do that is specifying the full
path.</p>

<h3>Install Ruby/Tk</h3>

<p>Next, you'll need to download and install Ruby's Tk module, which is packaged as a Ruby gem. To do so,
  from the command prompt, run:</p>
  <pre>% <b>/usr/local/opt/ruby/bin/gem install tk</b></pre>
  
<p>The Tk gem will look for installed versions of Tcl and Tk in <code>/Library/Frameworks</code>, which is
  where ActiveTcl puts them.</p>

<p>To verify that everything worked, start up <code>/usr/local/opt/ruby/bin/irb</code> and type:</p>
<pre>
% <b>require 'tk'</b>
% <b>Tk::TK_PATCHLEVEL</b>
</pre>

<p>The first line should load Ruby/Tk; typically if there was a problem with finding Tcl/Tk it
would show up here.  The second line will return the version of Tk that you're running,
which should be something like "8.6.9".</p>

<div class=fyi><p>Verified install using ActiveTcl 8.6.9.8609.2 and Ruby 2.7.1 via Homebrew on macOS 10.15.6.</p></div>

</div>

<div class=perl><a name='install-mac-perl'></a><p><span class='installbadge'>Install Tk for Perl (Tkx) on macOS</span></p>
<p>For modern Tk programming using Perl, the "Tkx" module is highly recommended, and we'll
be using that here.  It links against an existing but separate Tk library.  So, to get the 
latest version of Tk for Perl, we're going to have to do first download the latest 8.6.x Tcl/Tk version from ActiveState.</p>

<div class=fyi><p>This tutorial used to rely on the ActivePerl distribution from ActiveState, which bundled a
  full Tcl/Tk installation, as well as the Tkx module. Unfortunately, as of this writing, there is
  not a macOS version of ActivePerl available.</p></div>

<h3>Install ActiveTcl</h3>

<p>The "ActiveTcl" distribution from ActiveState contains the latest Tk, as well as the latest
version of Tcl (which Perl's Tk bindings use internally to talk to Tk).  In your web browser, 
go to <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>, and follow along the links 
to download the Community Edition of ActiveTcl.  
Note that you will need to create an account with ActiveState (no cost) to download it.
Again, make sure you're downloading an 8.6.x version.</p>

<p>Run the installer and everything will be loaded onto your machine.</p>

<h3>Install Perl</h3>

<p>Next, you'll want to install Perl. There are multiple ways to do this, as explained at
 <a href="../../external.html?link=https://www.perl.org/">www.perl.org</a>. One option is to use a package manager like
 <a href="../../external.html?link=https://brew.sh/">Homebrew</a>. Once it's been installed (at <code>/usr/local/bin/brew</code>) 
 you can install Ruby from a command prompt (e.g. Terminal) via:</p>
 <pre>% <b>brew install perl</b></pre>
 
 <div class=tip><p>The initial "%" is the Unix shell prompt; you don't have to type it.</p></div>
 
<p>That should put the Perl binaries in <code>/usr/local/opt/perl/bin</code>).
You can check this via <code>brew info perl</code>. Below, where we use <code>perl</code>,
make sure you're running the version you just installed. One way to do that is specifying the full
path.</p>


<h3>Install Tkx</h3>

<p>Next, you'll need to download and install Perl's Tkx module. We can grab it from CPAN. Unfortunately, at present it will not
  install correctly due to errors in its tests. We can bypass the tests and install it anyway. To do so,
  from the command prompt, run:</p>
  <pre>% <b>/usr/local/opt/perl/bin/perl -MCPAN -e "CPAN::Shell->notest('install','Tkx')"</b></pre>
  
<p>The Tkx module will look for installed versions of Tcl and Tk in <code>/Library/Frameworks</code>, which is
  where ActiveTcl puts them.</p>


<p>To check that this worked, run this from the Unix command line:</p>
<pre>% <b>/usr/local/opt/perl/bin/perl -MTkx -e 'print Tkx::info("patchlevel");'</b></pre>

<p>This will return the version of Tcl/Tk that it found. It should be something like "8.6.9".</p>


<div class=fyi><p>Verified install using ActiveTcl 8.6.9.8609.2 and Perl 5.32.0 via Homebrew on macOS 10.15.6.</p></div>

</div>



 <a name="installwin"></a><h2>Installing Tk on Windows</h2>


<div class=python><a name='install-win-python'></a><p><span class='installbadge'>Install Tk for Python (Tkinter) on Windows</span></p>

<p>Tkinter (and, since Python 3.1, ttk, which is the interface to the newer themed widgets) is included in the Python standard library.  We highly recommend installing
Python using the standard binary distributions from <a href="../../external.html?link=https://python.org/">python.org</a>. These will 
automatically install Tcl/Tk, which of course, is needed by Tkinter.</p>

<p>If you're instead building Python from source code, the Visual Studio projects included in the "PCbuild" directory
can automatically fetch and compile Tcl/Tk on your system.</p>

<p>Once you've installed or compiled Python, test it out to make sure Tkinter works. From the Python prompt, enter these two commands:</p>
<pre>&gt;&gt;&gt; <b>import tkinter</b>
&gt;&gt;&gt; <b>tkinter._test()</b></pre>

<p>This should pop up a small window; the first line at the top of the window should say "This is Tcl/Tk version 8.6"; make
sure it is not 8.4 or 8.5!</p>

<div class=tip><p>Get an error saying <code>"No module named tkinter"</code>? You're probably using Python 2. This tutorial assumes Python 3.</p></div>

<p>You can also get the exact version of Tcl/Tk that is being used with:</p>
<pre>&gt;&gt;&gt; <b>tkinter.Tcl().eval('info patchlevel')</b></pre>
<p>It should return something like '8.6.9'.</p>

<div class=fyi><p>Verified using Python 3.9.0rc1 binary installer from python.org (containing Tcl/Tk 8.6.9) on Windows 10 version 1809.</p></div>
</div>


<div class=tcl><a name='install-win-tcl'></a><p><span class='installbadge'>Install Tk for Tcl on Windows</span></p>


<p>On Windows, the easiest way to get Tcl/Tk onto your machine is to install the "ActiveTcl" distribution 
from ActiveState, which includes Tcl, Tk, plus a number of other extension libraries.</p>

<p>In your web browser, go to <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>, and follow
along the links to download the Community Edition of ActiveTcl for Windows.  Make sure you're downloading 
an 8.6.x version. Note that you will need to create an account with ActiveState (no cost) to download it. </p>

<p>Run the installer, and follow along.  You'll end up with a fresh install
of ActiveTcl, usually located in C:\ActiveTcl.  From a command prompt,
you should then be able to run a Tcl/Tk 8.6 shell via:</p>
<pre>% <b>C:\ActiveTcl\bin\wish</b></pre>

<p>This should pop up a small window titled "wish", which will contain your application.  A second, larger window
titled "Console" is where you can type in Tcl/Tk commands.  To verify the exact version of Tcl/Tk that you are running, 
type the following:</p>
<pre>% <b>info patchlevel</b></pre>

<p>We want this to be returning something like '8.6.9'.</p>

<p>Type "exit" in the console window to exit.
You may also want to add C:\ActiveTcl\bin to your PATH environment variable.</p>

<div class=fyi><p>Verified install using ActiveTcl 8.6.9.8609-2 on Windows 10.</p></div>

</div>


<div class=ruby><a name='install-win-ruby'></a><p><span class='installbadge'>Install Tk for Ruby (Ruby/Tk) on Windows</span></p>
    
<p>Ruby/Tk is the binding for Tk.  In the distant past, installing it on your Windows machine used to be pure hell, involving installing
a separate version of Tcl/Tk, downloading a development environment like Visual Studio, downloading the Ruby
source code, carefully compiling Ruby, ...</p>

<p>Luckily, it is now only mildly painful, thanks to the good folks behind <a href="../../external.html?link=https://rubyinstaller.org/">RubyInstaller for
Windows</a>.</p>

<div class=fyi><p>The one-click installer used to include everything you needed to run Ruby/Tk, including the underlying Tcl/Tk libraries. 
  Unfortunately, Tk was removed from the Ruby standard library (stdlib) in version 2.4, and made available as an external gem.
  RubyInstaller followed suit.</p></div>

<h3>Install ActiveTcl</h3>

<p>First, you'll need to install Tcl/Tk. <p>On Windows, the easiest way to get Tcl/Tk onto your machine is to install the "ActiveTcl" distribution 
from ActiveState, which includes Tcl, Tk, plus a number of other extension libraries.</p>

<p>In your web browser, go to <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>, and follow
along the links to download the Community Edition of ActiveTcl for Windows.  Make sure you're downloading 
an 8.6.x version. Note that you will need to create an account with ActiveState (no cost) to download it. </p>

<p>Run the installer, and follow along.  You'll end up with a fresh install of ActiveTcl in C:\ActiveTcl.</p>

<h3>Install Ruby</h3>

<p>Next, go to <a href="../../external.html?link=https://rubyinstaller.org/">rubyinstaller.org</a>.  Download and run the installer,
which will install everything into the directory you choose, e.g. <code>C:\Ruby26</code>.</p>

<h3>Install Ruby/Tk</h3>

<p>Next, you'll need to download and install Ruby's Tk module, which is packaged as a Ruby gem. To do so,
  open a command prompt and run:</p>
  <pre>% <b>gem install tk</b></pre>
  
 <div class=tip><p>The initial "%" is the Unix shell prompt; you don't have to type it.</p></div>
  
<h3>Tell Ruby Where to Find ActiveTcl</h3>

<p>You're not done yet. If you try to use Tk from Ruby, it will complain that it can't find the underlying Tcl/Tk
  libraries. We'll need to do a couple of things to fix that.</p>

<p>First, Ruby needs to find the <code>tcl86t.dll</code> and <code>tk86t.dll</code> shared libraries.
  These are located in <code>C:\ActiveTcl\bin</code>. Make a copy of them somewhere Ruby can find them, e.g. <code>C:\Ruby26\bin</code>.</p>
  
<p>Second, the Tcl and Tk shared libraries will look for a bunch of initialization and other scripts which were
  installed as part of ActiveTcl. The best way to specify where to find them is to set the <code>TCL_LIBRARY</code> and
  <code>TK_LIBRARY</code> system environment variables.</p>
  
<p>This can be done in the Windows control panel (or search for "system environment variables" from the taskbar). 
  In Windows 10, you'll find a button labelled "Environment Variables..." in the "Advanced" tab of "System Properties".
  Add these system variables:</p>
  <pre>
TCL_LIBRARY     C:\ActiveTcl\lib\tcl8.6
TK_LIBRARY      C:\ActiveTcl\lib\tk8.6</pre>  

<p>If you're running a shell via command prompt you'll need to restart it to see those new additions.</p>
  
<p>To verify the version of Tk, start up your newly installed copy of 'irb' (which would have been
installed in <code>C:\Ruby26\bin</code>), and type:</p>
<pre>% <b>require 'tk'</b>
% <b>Tk::TK_PATCHLEVEL</b></pre>

<p>The first line should load Ruby/Tk.  The second line will return the version of Tk that you're running,
which should be something like "8.6.9".</p>

<div class=fyi><p>Verified install using ActiveTcl 8.6.9.8609-2, RubyInstaller Ruby+DevKit 2.6.6-1 on Windows 10 version 1809.</p></div>
</div>


<div class=perl><a name='install-win-perl'></a><p><span class='installbadge'>Install Tk for Perl (Tkx) on Windows</span></p>

<p>For modern Tk programming using Perl, the "Tkx" module is highly recommended, and we'll
be using that here.  The easiest way to get set up is to use the "ActivePerl"  
distribution from <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>.</p>	

<p>The "ActivePerl" distribution from ActiveState includes not only Perl, but also recent versions of
Tk and Tcl (which Tkx uses internally to talk to Tk).  In your web browser, 
go to <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>, and follow along the links 
to download the Community Edition of ActivePerl. Note that you will need to create an account with ActiveState (no cost) to download it. </p>

<p>Run the installer and everything will be loaded onto your machine.  On our machine, perl.exe was installed
at "C:\Perl64\bin"</p>

<p>To find out what version of Tk Perl and Tkx are using, run this from the Windows command prompt:</p>
<pre>% <b>perl -MTkx -e "print Tkx::info("patchlevel");"</b></pre>
<p>We want this to be returning something like "8.5.13".</p>

<div class=tip><p>Versions of ActivePerl prior to 5.10 (and some of the first 5.10 builds) included earlier versions of 
Tcl/Tk (8.4.x rather than 8.5.x).   Use a more recent version, and and verify that you do have Tk 8.5 or newer.</p></div>

<div class=fyi><p>Verified install using ActivePerl 5.28 on Windows 10 version 1809.</p></div>

</div>


 <a name="installlinux"></a><h2>Installing Tk on Linux</h2>

<div class=python><a name='install-x11-python'></a><p><span class='installbadge'>Install Tk for Python (Tkinter) on Linux/X11</span></p>

<p>Tkinter (and, since Python 3.1, ttk, which is the interface to the newer themed widgets) is included in the Python standard library. It relies on Tcl/Tk being installed on
your system. Depending on how you install Python, this may not happen automatically.

<div class=fyi><p>Remember, we're using Python 3.x here, not 2.x. </p></div>

<p>You have several different options to get Python and Tkinter onto your machine. We'll show you two, using your distro's package manager, or compiling from source.</p>

<h3>Option 1. Your Linux Distribution's Package Manager</h3>

<p>Currently supported Linux distributions usually install a recent version of Python 3.x by default. If not, they have a
package (.deb, .rpm, etc.) that you can install using their package manager. This is usually the easiest way to install
Python.</p>

<p>However, after you're done installing Python, you should verify that Tkinter works correctly. Start up a Python shell (e.g. <code>/usr/bin/python3</code>) and verify the install (see below).</p>

<p>You may find that when you try to <code>import tkinter</code> that you get an error. Sometimes it will tell you that you need to install another package. If so, follow the instructions, and try again. It may also just give you Python's standard error message: 
<code>"ModuleNotFoundError: No module named 'tkinter'"</code>. </p>

<div class=tip><p>If you're getting an error saying <code>"No module named tkinter"</code> (without the single quotes around the module name), you're probably using Python 2. This tutorial assumes Python 3.</p></div>

<p>Sometimes Linux distributions separate out their Tkinter support into a separate package. That saves installing the Tcl/Tk
  libraries for people who are using Python but not Tkinter. If so, you'll need to find and install this package, which
  wiil also ensure that an appropriate version of the Tcl/Tk libraries are installed on your system.</p>

<p>For example, running Ubuntu 20.04LTS, Python 3.8.2 is already installed. However, to use Tkinter, you need to install a separate package, named <code>python3-tk</code>:</p>
<pre>% <b>sudo apt-get install python3-tk</b></pre>

<p>In this case, that package provides Tcl/Tk 8.6.x libraries to be used with Python.</p>


<h3>Option 2. Install Tcl/Tk and Compile the Standard Python Distribution</h3>

<p>If you'd like to use the standard source distribution from <a href="../../external.html?link=https://python.org/">python.org</a>, you can certainly do that.</p>

<p>But to do so, you'll need to get the Tcl and Tk include files and libraries loaded on your machine first.
Again, while there are several ways to do <em>that</em>, the easiest is to download and install ActiveTcl.</p>

<div class=tip><p>Another option would be to install the Tk development package, e.g. <code>tk8.6-dev</code> via your package manager.</p></div>

<p>In your web browser, go to <a href="../../external.html?link=https://www.activestate.com/products/activetcl/">www.activestate.com/products/activetcl</a>.
Download the latest version of ActiveTcl for Linux.  Make sure you're downloading an 8.6 or newer version. Note that you will need to create an account with ActiveState (no cost) to download it. After it's downloaded, unpack it, run the installer 
(<code>sudo ./install.sh</code>), and follow along.  You'll end up with a fresh install
of ActiveTcl, located in e.g. <code>/opt/ActiveTcl-8.6</code>.</p> 

<p>Next, download the current Python 3.x source distribution from <a href="../../external.html?link=https://python.org/">python.org</a>, and unpack it.
On your configure line, you'll need to tell it how to find the version of Tcl/Tk you installed. Then build as usual:</p>

<pre>
% <b>./configure --with-tcltk-includes='-I/opt/ActiveTcl-8.6/include'</b>
       <b>--with-tcltk-libs='</b><b>/opt/ActiveTcl-8.6/lib/libtcl8.6.so</b> <b>/opt/ActiveTcl-8.6/lib/libtk8.6.so'</b>
% <b>make</b>
% <b>make install</b></pre>

<div class=tip><p>If you installed <code>tk8.6-dev</code> via your package manager instead of using ActiveTcl, the include files should
  be found in <code>/usr/include/tcl8.6</code>, and the libraries <code>libtcl8.6.so</code> and <code>libtk8.6.so</code> should
  be in <code>/usr/lib/x86_64-linux-gnu</code>.</p></div>

<p>Make sure to verify your install (see below).

<div class=tip><p>Didn't work? There may have been an error compiling Python's tkinter code. To check, from the main Python
source directory, try <code>touch Modules/_tkinter.c</code> (note the underscore) and then <code>make</code> to recompile it.
Watch closely for error messages. 
</p><p>
The most common thing is that the way you specified the Tcl/Tk include and libraries
needs to be changed somehow. Or if you get messages that certain include files can't be found (e.g. <code>X11/Xlib.h</code>) you
may need to install additional packages on your Linux distribution (e.g. <code>apt-get install libx11-dev</code>). Once
you get it to compile without errors, don't forget to <code>make install</code>.
</p></div>

<h3>Verifying your Install</h3>

<p>At the Python command prompt, enter these two commands:</p>
<pre>&gt;&gt;&gt; <b>import tkinter</b>
&gt;&gt;&gt; <b>tkinter._test()</b></pre>
<p>This should pop up a small window; the first line at the top of the window should say "This is Tcl/Tk version 8.6"; make
sure it is not 8.4!</p>

<p>If it gives you an error when you try to <code>import tkinter</code> (e.g. "If this fails your Python may not be configured for Tk"), 
something hasn't been set up correctly. If you compiled Python yourself, see above to check for compile errors.</p>

<div class=tip><p>Get an error saying <code>"No module named tkinter"</code>? You're probably using Python 2. This tutorial assumes Python 3.</p></div>

<p>You can also get the exact version of Tcl/Tk that is being used with:</p>
<pre>&gt;&gt;&gt; <b>tkinter.Tcl().eval('info patchlevel')</b></pre>
<p>It should return something like '8.6.9'.</p>

<div class=fyi><p>Verified install using ActiveTcl 8.6.9.8609.2 and Python 3.90rc1 source code from python.org on Ubuntu 20.04LTS.</p></div>

	
</div>


<div class=tcl><a name='install-x11-tcl'></a><p><span class='installbadge'>Install Tk for Tcl on Linux/X11</span></p>

<h3>Using a Package Manager</h3>
<p>Pretty much all Linux distributions have Tcl/Tk packages available via their package managers, e.g., <code>apt</code>.
  Usually there are a variety of packages, providing libraries, command-line tools, development options if you're building
  extensions, and many more. On Ubuntu and many other distributions, <code>apt install tk8.6</code> should be enough to 
  install <code>/usr/bin/wish8.6</code>, which you'll use to run your Tcl/Tk programs.</p>
  
<h3>Using ActiveTcl</h3>

<p>Another option is to install the "ActiveTcl" distribution 
from ActiveState, which includes Tcl, Tk, plus a number of other extension libraries.</p>

<p>In your web browser, go to <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>, and follow
along the links to download the Community Edition of ActiveTcl for Linux.  Make sure you're downloading 
an 8.6.x version.  Note that you will need to create an account with ActiveState (no cost) to download it.</p>

<p>Unpack it, and run the installer (<code>sudo ./install.sh</code>), and follow along.  You'll end up with a fresh install
of ActiveTcl, located in /opt/ActiveTcl-8.6.  You should then be able to run a Tcl/Tk 8.6 shell via:</p>
<pre>% <b>/opt/ActiveTcl-8.6/bin/wish8.6</b></pre>

<p>This should pop up a window titled "wish8.6".  	To verify the exact version of Tcl/Tk that you are running, from the Wish 
prompt (in the terminal window) type the following:</p>
<pre>% <b>info patchlevel</b></pre>
<p>We want this to be returning something like '8.6.9'.  	Type a control-D at the prompt in the terminal window
to exit.  You may also want to add /opt/ActiveTcl-8.6/bin to your Unix path.</p>

<div class=fyi><p>Verified install using ActiveTcl 8.6.9.8609.2 on Ubuntu 20.04LTS.</p></div>

</div>

<div class=ruby><a name='install-x11-ruby'></a><p><span class='installbadge'>Install Tk for Ruby (Ruby/Tk) on Linux/X11</span></p>

<p>To get Ruby/Tk working on Linux, we'll rely on your distribution's package manager. The package names and commands shown
  here are for Ubuntu, and may be different on your system.</p>
  
<p>Because Ruby/Tk is an add-on gem, it needs to be compiled on your system. That means we're going to need to install the
  development versions of the Tcl/Tk libraries (<code>tk8.6-dev</code>) as well as Ruby (<code>ruby2.7-dev</code> plus <code>ruby2.7</code>
  for the command-line tools like <code>irb</code> and <code>gem</code>]). This will also ensure we have the necessary compilers, 
  dependent libraries like X11, and so on.</p>

<pre>% <b>sudo apt install tk8.6-dev ruby2.7 ruby2.7-dev</b></pre>

 <div class=tip><p>The initial "%" is the Unix shell prompt; you don't have to type it.</p></div>

<p>Finally, you can install the Ruby/Tk binding with:</p>
<pre>% <b>sudo gem install tk</b></pre>

<p> To verify that everything worked, start up <code>irb</code> and type:</p>
<pre>% <b>require 'tk'</b>
% <b>Tk::TK_PATCHLEVEL</b></pre>

<p>The first line should load Ruby/Tk; typically if there was a problem with compiling it
would show up here.  The second line will return the version of Tk that you're running,
which should be something like "8.6.10".</p>

<div class=fyi><p>Verified install using tk8.6-dev 8.6.10-1, ruby2.7.0 on Ubuntu 20.04LTS.</p></div>
	
</div>




<div class=perl><a name='install-x11-perl'></a><p><span class='installbadge'>Install Tk for Perl (Tkx) on Linux/X11</span></p>

<p>For modern Tk programming using Perl, the "Tkx" module is highly recommended, and we'll
be using that here.  The easiest way to get set up is to use the "ActivePerl"  
distribution from <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>.</p>	

<p>The "ActivePerl" distribution from ActiveState includes not only Perl, but also recent versions of
Tk and Tcl (which Tkx uses internally to talk to Tk).  In your web browser, 
go to <a href="../../external.html?link=https://www.activestate.com/">www.activestate.com</a>, and follow along the links 
to download the Community Edition of ActivePerl. Note that you will need to create an account with ActiveState (no cost) to download it.</p>

<p>Run the installer and everything will be loaded onto your machine, in e.g. /opt/ActivePerl-5.28.</p>

<p>To find out what version of Tk Perl and Tkx are using, run this from the command line:</p>
<pre>% <b>perl -MTkx -e 'print Tkx::info("patchlevel");'</b></pre>
<p>We want this to be returning something like "8.5.13".</p>

<div class=tip><p>Versions of ActivePerl prior to 5.10 (and some of the first 5.10 builds) included earlier versions of 
Tcl/Tk (8.4.x rather than 8.5.x).   Use a more recent version, and and verify that you do have Tk 8.5 or newer.</p></div>

<div class=fyi><p>Verified install using ActivePerl 5.28.1 on Ubuntu 20.04LTS.</p></div>

</div>


 <a name="helloworld"></a><h2>The Obligatory First Program</h2>

<p>To make sure that everything actually did work, let's try to run a "Hello World"
program in Tk.  While for something this short, you could just type it in directly
to the interpreter, instead use your favorite text editor to put it in a file.</p>

<div class=python>
<pre>from tkinter import *
from tkinter import ttk
root = Tk()
ttk.Button(root, text="Hello World").grid()
root.mainloop()
</pre>
<p>Save this to a file named "hello.py".  From a command prompt, type:</p>
<pre>
% <b>python hello.py</b>
</pre>

<div class=tip><p>Couldn't find hello.py?  You might be looking in the wrong directory.  Try providing
the full path to hello.py.</p></div>

</div>

<div class=tcl>
<pre>
package require Tk
grid [ttk::button .b -text "Hello World"] 
</pre>
<p>Save this to a file named "hello.tcl".  From the wish shell, type:</p>
<pre>
% <b>source hello.tcl</b>
</pre>

<div class=tip><p>Couldn't find hello.tcl?  You might be looking in the wrong directory.  You can
either give the full path to hello.tcl, or use Tcl's <code>pwd</code> and <code>cd</code> commands to
see what directory you're in, and change to a different one.</p></div>

</div>

<div class=ruby>
<pre>
require 'tk'
require 'tkextlib/tile'
root = TkRoot.new() 
button = Tk::Tile::TButton.new(root) {text "Hello World"}.grid
Tk.mainloop()
</pre>
<p>Save this to a file named "hello.rb".  Start up [tk::inl "irb"], and from the command
prompt, type:</p>
<pre>
% <b>source "hello.rb"</b>
</pre>

<div class=tip><p>Couldn't find hello.rb?  You might be looking in the wrong directory.  You can
either give the full path to hello.rb, or use Ruby's <code>Dir.pwd</code> and <code>Dir.chdir</code> commands to
see what directory you're in, and change to a different one.</p></div>

</div>

<div class=perl>
<pre>
use Tkx;
Tkx::grid( Tkx::ttk__button(".b", -text => "Hello, world" ) );
Tkx::MainLoop();
</pre>
<div class=tip><p>Note that there are <b>two</b> underscores between "ttk" and "button".</p></div>
<p>Save this to a file named "hello.pl".  From a command prompt, type:</p>
<pre>
% <b>perl hello.pl</b>
</pre>

<div class=tip><p>Couldn't find hello.pl?  You might be looking in the wrong directory.  Try providing
the full path to hello.pl.</p></div>

<div class=tip><p>
Not working?  Are you sure you're using an 8.5 or newer version of Tcl/Tk?  See the install
chapter...</p></div>


</div>




<p class=picture>
<img class='border-0 img-fluid' src='../images/hello_all.png' alt='screen shot'><br />
Our first program. Some work left to do before the IPO.</p>



<h1>A First (Real) Example</h1>

<p>With that out of the way, let's try a slightly more substantial example, which will give you an
initial feel for what the code behind a real Tk program looks like.</p>

 <a name="design"></a><h2>Design</h2>

<p>We'll create a simple GUI tool to convert a distance in feet to the equivalent
distance in meters.   If we were to sketch this out, it might look something like this:</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/calcsketch.png' alt='screen shot'><br />
A sketch of our feet to meters conversion program.</p>

<p>So it looks like we have a short text entry widget that will let us type in the number of
feet. A "Calculate" button will get the value out of that entry, perform the
calculation, and  put the result in a label below the entry.
We've also got three static labels ("feet," "is equivalent to," and "meters"),
which help our user figure out how to work the application.</p>

<p>The next thing we need to do is look at the layout. The widgets that we've included seem to be naturally divided into a grid with three columns and three rows. In terms of layout, things seem to naturally divide into three columns and three rows, as illustrated below:</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/calcgrid.png' alt='screen shot'><br />
The layout of our user interface, which follows a 3 x 3 grid.</p>


 <a name="code"></a><h2>Code</h2>

<div class=python>
<p>Now here is the Python code needed to create this entire application using Tkinter.</p>
<pre>from tkinter import *
from tkinter import ttk

def calculate(*args):
    try:
        value = float(feet.get())
        meters.set(int(0.3048 * value * 10000.0 + 0.5)/10000.0)
    except ValueError:
        pass

root = Tk()
root.title("Feet to Meters")

mainframe = ttk.Frame(root, padding="3 3 12 12")
mainframe.grid(column=0, row=0, sticky=(N, W, E, S))
root.columnconfigure(0, weight=1)
root.rowconfigure(0, weight=1)

feet = StringVar()
feet_entry = ttk.Entry(mainframe, width=7, textvariable=feet)
feet_entry.grid(column=2, row=1, sticky=(W, E))

meters = StringVar()
ttk.Label(mainframe, textvariable=meters).grid(column=2, row=2, sticky=(W, E))

ttk.Button(mainframe, text="Calculate", command=calculate).grid(column=3, row=3, sticky=W)

ttk.Label(mainframe, text="feet").grid(column=3, row=1, sticky=W)
ttk.Label(mainframe, text="is equivalent to").grid(column=1, row=2, sticky=E)
ttk.Label(mainframe, text="meters").grid(column=3, row=2, sticky=W)

for child in mainframe.winfo_children(): 
    child.grid_configure(padx=5, pady=5)

feet_entry.focus()
root.bind("&lt;Return&gt;", calculate)

root.mainloop()
</pre>
</div>


<div class=tcl>
<p>Now here is the Tcl/Tk code needed to create this entire application.</p>
<pre>package require Tk

wm title . "Feet to Meters"
grid [ttk::frame .c -padding "3 3 12 12"] -column 0 -row 0 -sticky nwes
grid columnconfigure . 0 -weight 1; grid rowconfigure . 0 -weight 1

grid [ttk::entry .c.feet -width 7 -textvariable feet] -column 2 -row 1 -sticky we
grid [ttk::label .c.meters -textvariable meters] -column 2 -row 2 -sticky we
grid [ttk::button .c.calc -text "Calculate" -command calculate] -column 3 -row 3 -sticky w

grid [ttk::label .c.flbl -text "feet"] -column 3 -row 1 -sticky w
grid [ttk::label .c.islbl -text "is equivalent to"] -column 1 -row 2 -sticky e
grid [ttk::label .c.mlbl -text "meters"] -column 3 -row 2 -sticky w

foreach w [winfo children .c] {grid configure $w -padx 5 -pady 5}
focus .c.feet
bind . &lt;Return&gt; {calculate}

proc calculate {} {  
   if {[catch {
       set ::meters [expr {round($::feet*0.3048*10000.0)/10000.0}]
   }]!=0} {
       set ::meters ""
   }
}

vwait forever
</pre>
</div>

<div class=ruby>
<p>Now here is the Ruby/Tk code needed to create this entire application.</p>
<pre>require 'tk'
require 'tkextlib/tile'

root = TkRoot.new {title "Feet to Meters"}
content = Tk::Tile::Frame.new(root) {padding "3 3 12 12"}.grid( :sticky =&gt; 'nsew')
TkGrid.columnconfigure root, 0, :weight => 1; TkGrid.rowconfigure root, 0, :weight =&gt; 1

$feet = TkVariable.new; $meters = TkVariable.new
f = Tk::Tile::Entry.new(content) {width 7; textvariable $feet}.grid( :column => 2, :row => 1, :sticky =&gt; 'we' )
Tk::Tile::Label.new(content) {textvariable $meters}.grid( :column => 2, :row => 2, :sticky =&gt; 'we');
Tk::Tile::Button.new(content) {text 'Calculate'; command {calculate}}.grid( :column => 3, :row => 3, :sticky =&gt; 'w')

Tk::Tile::Label.new(content) {text 'feet'}.grid( :column => 3, :row => 1, :sticky =&gt; 'w')
Tk::Tile::Label.new(content) {text 'is equivalent to'}.grid( :column => 1, :row => 2, :sticky =&gt; 'e')
Tk::Tile::Label.new(content) {text 'meters'}.grid( :column => 3, :row => 2, :sticky =&gt; 'w')

TkWinfo.children(content).each {|w| TkGrid.configure w, :padx => 5, :pady =&gt; 5}
f.focus
root.bind("Return") {calculate}

def calculate
  begin
     $meters.value = (0.3048*$feet*10000.0).round()/10000.0
  rescue
     $meters.value = ''
  end
end

Tk.mainloop

</pre>
</div>

<div class=perl>
<p>Now here is the Perl/Tkx code needed to create this entire application.</p>
<pre>use Tkx;

Tkx::wm_title(".", "Feet to Meters");
Tkx::ttk__frame(".c",  -padding =&gt; "3 3 12 12");
Tkx::grid( ".c", -column => 0, -row => 0, -sticky =&gt; "nwes");
Tkx::grid_columnconfigure( ".", 0, -weight =&gt; 1); 
Tkx::grid_rowconfigure(".", 0, -weight =&gt; 1);

Tkx::ttk__entry(".c.feet", -width => 7, -textvariable =&gt; \$feet);
Tkx::grid(".c.feet", -column => 2, -row => 1, -sticky =&gt; "we");
Tkx::ttk__label(".c.meters", -textvariable =&gt; \$meters);
Tkx::grid(".c.meters", -column => 2, -row => 2, -sticky =&gt; "we");
Tkx::ttk__button(".c.calc", -text => "Calculate", -command =&gt; sub {calculate();});
Tkx::grid(".c.calc", -column => 3, -row => 3, -sticky =&gt; "w");

Tkx::grid( Tkx::ttk__label(".c.flbl", -text => "feet"), -column => 3, -row => 1, -sticky =&gt; "w");
Tkx::grid( Tkx::ttk__label(".c.islbl", -text => "is equivalent to"), -column => 1, -row => 2, -sticky =&gt; "e");
Tkx::grid( Tkx::ttk__label(".c.mlbl", -text => "meters"), -column => 3, -row => 2, -sticky =&gt; "w");

foreach (Tkx::SplitList(Tkx::winfo_children(".c"))) {
    Tkx::grid_configure($_, -padx => 5, -pady =&gt; 5);
}
Tkx::focus(".c.feet");
Tkx::bind(".", "&lt;Return&gt;", sub {calculate();});

sub calculate {
   $meters = int(0.3048*$feet*10000.0+.5)/10000.0 || '';
}

Tkx::MainLoop();
</pre>
<div class=fyi><p>As we'll see in the next chapter, there's another, more object-oriented way to do exactly the same thing.
Are we surprised?</p></div>
</div>


<p>And the resulting user interface:</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/f2m_all.png' alt='screen shot'><br />
Screenshot of our completed feet to meters user interface.</p>

<h3>A Note on Coding Style</h3>


<p>Each of the languages included in this tutorial has a variety of coding styles and conventions
available to choose from, which help determine conventions for variable and function naming,
procedural, functional or object-oriented styles, and so on. </p>

<p>Because the focus on this tutorial is Tk, this tutorial will keep things as simple
as possible, generally using a very direct coding style, rather than wrapping
up most of our code in procedures, modules, objects, classes and so on.  As much as 
possible, you'll also see the same names for objects, variables, etc. used across the
languages for each example.</p>





 <a name="walkthrough"></a><h2>Step-by-Step Walkthrough</h2>

<p>Let's take a closer look at that code, piece by piece.  For now, all we're trying to do is get a
basic understanding of the types of things we need to do to create a user interface in Tk, and
roughly what those things look like. We'll go into details later.</p>

<h3>Incorporating Tk</h3>

<p>Our program starts by incorporating Tk.</p>


<div class=python>
<pre>
from tkinter import *
from tkinter import ttk
</pre>
<p>These two lines tell Python that our program needs two modules. The first, <code>tkinter</code>, is the 
standard binding to Tk. When imported, it loads the Tk library on your system.
The second, <code>ttk</code>, is a submodule of <code>tkinter</code>. It implements Python's binding to the 
newer "themed widgets" that were added to Tk in 8.5.  </p>

<div class=tip><p>Notice that we've imported everything (<code>*</code>) from the tkinter module. That way, we can call tkinter functions etc. without
prefixing them with the module name. This is standard Tkinter practice.  
</p><p>
However, because we've imported just <code>ttk</code>
itself, we'll need to prefix anything inside that submodule.  For example, calling <code>Entry(...)</code>
would refer to the <code>Entry</code> class inside the <code>tkinter</code> module (classic widgets). We'd need <code>ttk.Entry(...)</code> to use the <code>Entry</code> class inside <code>ttk</code> (themed widgets).  
</p><p>
As you'll see, several classes are defined in both modules.
Sometimes you will need one or the other, depending on the context.  Explicitly requiring the <code>ttk</code> prefix facilitates this, and will be the style used
in this tutorial.</p></div>

<div class=upgrade><p>One of the first things you'll find if you're migrating Python 2.x code is that the name of the Tkinter module
is now lowercase, i.e. <code>tkinter</code>, rather than <code>Tkinter</code>.  In Python 2.x, <code>Ttk</code> was also its own module, not a sub-module of <code>Tkinter</code>.</p></div>

</div>



<div class=tcl>
<pre>package require Tk</pre>
<p>First thing we do is tell Tcl that our program needs Tk.  Though not strictly necessary, it's
considered good form to include this line.  It can also be used to specify exactly what version
of Tk is needed.</p>
</div>

<div class=ruby>
<pre>
require 'tk'
require 'tkextlib/tile'	
</pre>
<p>These two lines tell Ruby that our program needs two packages. The first, <code>tk</code>, is the 
Ruby binding to Tk, which, when loaded, also causes the existing Tk library on your system to be loaded.
The second, <code>tkextlib/tile</code>, is Ruby Tk's binding to the newer "themed widgets" that were added to Tk
in 8.5.</p>

<div class=yuck><p>The themed widget set evolved out of an earlier Tk add-on called Tile, hence the nomenclature.
Despite that, the Tk::Tile::* calls you'll see in the programs are actually using the
proper ttk versions in 8.5.  Expect this to get better rationalized in the future.</p></div>
</div>

<div class=perl>
<pre>use Tkx;</pre>
<p>The first thing that we need to do is tell Perl to load the "Tkx" module, which provides the Perl
interface to Tk that we are using.</p>

<div class=upgrade><p>As <a href="../../external.html?link=https://tkdocs.com/resources/languages.html">mentioned here</a>, there are other Perl bindings to Tk.
However, we very strongly recommend using Tkx for development, and that will be the only binding
we will be describing here.  Tkx has the advantage of being a very thin layer above Tk's native
Tcl API, which means that in almost all cases it automatically tracks the latest changes to Tk
(something which became a considerable issue with Perl/Tk, which was extremely popular in earlier
years, but has not been recently updated).  As well, by avoiding introducing another layer of code, 
API errors are reduced, and we can also take advantage of available reference documentation for 
Tk (which is usually Tcl oriented).</p></div>

<div class=tip><p>If you set the global variable <code>$Tkx::TRACE</code> to any true value, Tkx will print to stderr
  all calls into Tcl of the translated Tkx commands. This is very useful for debugging.</p></div>

</div>


<h3>Setting up the Main Application Window</h3>

<p>Next, the following code sets up the main application window, giving it the title "Feet to Meters."</p>

<div class=python><pre>root = Tk()
root.title("Feet to Meters")
</pre>
<div class=fyi><p>Yes, the <code>calculate</code> function appeared before this.  We'll describe it down below, but need to include it
	near the start because we reference it in other parts of the program.</p></div>
</div>

<div class=tcl><pre>
wm title . "Feet to Meters"
</pre></div>

<div class=ruby><pre>
root = TkRoot.new {title "Feet to Meters"}
</pre></div>

<div class=perl><pre>Tkx::wm_title(".", "Feet to Meters");
</pre></div>



<h3>Creating a Content Frame</h3>

<p>Next, we create a frame widget, which will hold the contents of our user interface.</p>

<div class=python><pre>
mainframe = ttk.Frame(root, padding="3 3 12 12")
mainframe.grid(column=0, row=0, sticky=(N, W, E, S))
root.columnconfigure(0, weight=1)
root.rowconfigure(0, weight=1)	
</pre>
</div>

<div class=tcl><pre>
grid [ttk::frame .c -padding "3 3 12 12"] -column 0 -row 0 -sticky nwes
grid columnconfigure . 0 -weight 1; grid rowconfigure . 0 -weight 1
</pre></div>

<div class=ruby><pre>
content = Tk::Tile::Frame.new(root) {padding "3 3 12 12"}.grid(:sticky => 'nsew')
TkGrid.columnconfigure root, 0, :weight => 1; TkGrid.rowconfigure root, 0, :weight => 1
</pre></div>

<div class=perl><pre>
Tkx::ttk__frame(".c",  -padding => "3 3 12 12");
Tkx::grid( ".c", -column => 0, -row => 0, -sticky => "nwes");
Tkx::grid_columnconfigure( ".", 0, -weight => 1); 
Tkx::grid_rowconfigure(".", 0, -weight => 1);
</pre></div>


<p>After the frame is created, <code>grid</code> places it directly inside our main application window.
The <code>columnconfigure/rowconfigure</code> bits tell Tk that the frame should expand to fill any extra space
if the window is resized.</p>

<div class=upgrade><p>Why do we put a frame inside the main window?
  Strictly speaking, we could just put the other widgets in our interface directly into the main
application window, without the intervening content frame. That's what you'll see in older Tk programs. 
</p><p>
However, the main window isn't itself part of the newer "themed" widgets. Its background color doesn't match the themed widgets we
will put inside it.  Using a "themed" frame widget to hold the content ensures that the
background is correct. This is illustrated below.

<p class=picture>
<img class='border-0 img-fluid' src='../images/innerfrm.png' alt='screen shot'><br />
Placing a themed frame inside a window.</p>

<p>On macOS, where this problem is most prominent, you can also set the window's background color (via its <code>background</code>
  configuration option) to the predefined color <code>systemWindowHeaderBackground</code>.
</p></div>

<h3>Creating the Entry Widget</h3>

<p>The first widget we'll create is the entry where we can input the number of feet that we want to convert.</p>
  
<div class=python><pre>feet = StringVar()
feet_entry = ttk.Entry(mainframe, width=7, textvariable=feet)
feet_entry.grid(column=2, row=1, sticky=(W, E))
</pre></div>

<div class=tcl><pre>
grid [ttk::entry .c.feet -width 7 -textvariable feet] -column 2 -row 1 -sticky we
</pre></div>

<div class=ruby><pre>
$feet = TkVariable.new; 
f = Tk::Tile::Entry.new(content) {width 7; textvariable $feet}.grid( :column => 2, :row => 1, :sticky => 'we' )
</pre></div>

<div class=perl><pre>Tkx::ttk__entry(".c.feet", -width => 7, -textvariable => \$feet);
Tkx::grid(".c.feet", -column => 2, -row => 1, -sticky => "we");
</pre></div>

  
<p>We need to do two things: create the widget itself, and then place it onscreen.</p>
  
<p>When we create a widget, we need to specify its <em>parent</em>, which is the widget that this widget will be placed inside.
In this case, we want our entry placed inside the content frame. Our entry, and other widgets we'll create shortly, are said to be
<em>children</em> of the content frame. In Tcl and Perl, the widget name is used to specify the parent-child relationship, i.e. <code>.c.feet</code> is a child of <code>.c</code>. In Python and Ruby, the <code><em>parent</em></code> is passed as the first parameter when instantiating a widget object.
</p>

<p>When we create a widget, we can optionally provide it with certain <em>configuration options</em>. 
Here, we specify how wide we want the entry to appear, i.e. 7 characters. 
We also assign it a mysterious <code>textvariable</code>; we'll see what that does shortly.</p>

<p>When widgets are created, they don't automatically show up on the screen, because Tk doesn't know
how you want them to be placed relative to other widgets.  That's what the <code>grid</code> part does.
Remember the layout grid when we sketched out our application? Widgets are placed in the appropriate
column (1, 2, or 3), and row (also 1, 2, or 3).</p>

<p>The <code>sticky</code> option to grid describes how the widget should
line up within the grid cell, using compass directions.  So <code>w</code> (west) means to anchor the widget
to the left side of the cell, <code>we</code> (west-east) means to attach it to both the left and right sides,
and so on. Python also defines constants for these directional strings, which you can provide as a list, e.g. <code>W</code> or <code>(W, E)</code>.</p>
  
  
<h3>Creating the Remaining Widgets</h3>
  
<p>We then do exactly the same thing for the remaining widgets. We have one label that will display the resulting number of meters that we calculate. We have a "Calculate" button that is pressed to perform the calculation. Finally, we have three static text labels to
  make it clear how to use the application. For each of these widgets, we first create it and then place it onscreen in
  the appropriate cell in the grid.</p>
  
<div class=python><pre>
meters = StringVar()
ttk.Label(mainframe, textvariable=meters).grid(column=2, row=2, sticky=(W, E))

ttk.Button(mainframe, text="Calculate", command=calculate).grid(column=3, row=3, sticky=W)

ttk.Label(mainframe, text="feet").grid(column=3, row=1, sticky=W)
ttk.Label(mainframe, text="is equivalent to").grid(column=1, row=2, sticky=E)
ttk.Label(mainframe, text="meters").grid(column=3, row=2, sticky=W)
</pre></div>

<div class=tcl><pre>
grid [ttk::label .c.meters -textvariable meters] -column 2 -row 2 -sticky we
grid [ttk::button .c.calc -text "Calculate" -command calculate] -column 3 -row 3 -sticky w

grid [ttk::label .c.flbl -text "feet"] -column 3 -row 1 -sticky w
grid [ttk::label .c.islbl -text "is equivalent to"] -column 1 -row 2 -sticky e
grid [ttk::label .c.mlbl -text "meters"] -column 3 -row 2 -sticky w
</pre></div>

<div class=ruby><pre>
$meters = TkVariable.new
Tk::Tile::Label.new(content) {textvariable $meters}.grid( :column => 2, :row => 2, :sticky => 'we');
Tk::Tile::Button.new(content) {text 'Calculate'; command {calculate}}.grid( :column => 3, :row => 3, :sticky => 'w')

Tk::Tile::Label.new(content) {text 'feet'}.grid( :column => 3, :row => 1, :sticky => 'w')
Tk::Tile::Label.new(content) {text 'is equivalent to'}.grid( :column => 1, :row => 2, :sticky => 'e')
Tk::Tile::Label.new(content) {text 'meters'}.grid( :column => 3, :row => 2, :sticky => 'w')
</pre></div>

<div class=perl><pre>
Tkx::ttk__label(".c.meters", -textvariable => \$meters);
Tkx::grid(".c.meters", -column => 2, -row => 2, -sticky => "we");
Tkx::ttk__button(".c.calc", -text => "Calculate", -command => sub {calculate();});
Tkx::grid(".c.calc", -column => 3, -row => 3, -sticky => "w");

Tkx::grid( Tkx::ttk__label(".c.flbl", -text => "feet"), -column => 3, -row => 1, -sticky => "w");
Tkx::grid( Tkx::ttk__label(".c.islbl", -text => "is equivalent to"), -column => 1, -row => 2, -sticky => "e");
Tkx::grid( Tkx::ttk__label(".c.mlbl", -text => "meters"), -column => 3, -row => 2, -sticky => "w");
</pre></div>



<h3>Adding Some Polish</h3>

<p>We then put a few finishing touches on our user interface.</p>

<div class=python><pre>for child in mainframe.winfo_children(): 
    child.grid_configure(padx=5, pady=5)
feet_entry.focus()
root.bind("&lt;Return&gt;", calculate)
</pre></div>
<div class=tcl><pre>
foreach w [winfo children .c] {grid configure $w -padx 5 -pady 5}
focus .c.feet
bind . &lt;Return&gt; {calculate}
</pre></div>
<div class=ruby><pre>
TkWinfo.children(content).each {|w| TkGrid.configure w, :padx => 5, :pady => 5}
f.focus
root.bind("Return") {calculate}
</pre></div>
<div class=perl><pre>foreach (Tkx::SplitList(Tkx::winfo_children(".c"))) { Tkx::grid_configure($_, -padx => 5, -pady => 5); }
Tkx::focus(".c.feet");
Tkx::bind(".", "&lt;Return&gt;", sub {calculate();});
</pre></div>


<p>The first part walks through all of the widgets that are contained within our content frame,
and adds a little bit of padding around each, so they aren't so scrunched together.
(We could have added these options to each <code>grid</code> call when we first put the widgets
onscreen, but this is a nice shortcut.)</p>

<p>The second part tells Tk to put the focus on our entry widget.  That way, the cursor will
start in that field, so users don't have to click in it before starting to type.</p>

<p>The third line tells Tk that if a user presses the Return key (Enter on Windows) it should call our calculate routine, 
the same as if they pressed the Calculate button.</p>

<h3>Performing the Calculation</h3>

<p>Speaking of which, here we define our calculate procedure. It's called when a user presses
the Calculate button or hits the Return key.  It performs the feet to meters calculation.</p>

<div class=python><pre>def calculate(*args):
    try:
        value = float(feet.get())
        meters.set(int(0.3048 * value * 10000.0 + 0.5)/10000.0)
    except ValueError:
        pass
</pre></div>
<div class=tcl><pre>
proc calculate {} {  
   if {[catch {
       set ::meters [expr {round($::feet*0.3048*10000.0)/10000.0}]
   }]!=0} {
       set ::meters ""
   }
}
</pre></div>
<div class=ruby><pre>
def calculate
  begin
     $meters.value = (0.3048*$feet*10000.0).round()/10000.0
  rescue
     $meters.value = ''
  end
end
</pre></div>
<div class=perl><pre>sub calculate {
   $meters = int(0.3048*$feet*10000.0+.5)/10000.0 || '';
}</pre></div>

<p>As you can clearly see, this routine takes the number of feet from our entry widget, does the calculation, 
and places the result in our label widget.</p>

<p>Say what?  It doesn't look like we're doing anything with those widgets!  Here's where
the magic <code>textvariable</code> options we specified when creating the widgets come into play.  
We specified the global variable <code>feet</code> as the textvariable for the entry, which means
that anytime the entry changes, Tk will <em>automatically</em> update the global variable <code>feet</code>.
Similarly, if we explicitly change the value of a textvariable associated with a widget
(as we're doing for <code>meters</code> which is attached to our label), the widget will automatically
be updated with the current contents of the variable. 
 
For Python, the only caveat is that these variables must be an instance of the <code>StringVar</code> class. 
Slick.</p>

<div class=fyi><p>The multiplying and dividing by 10000.0 is to avoid the rounding problems inherent in floating-point math. 
  A simple calculation, e.g., <code>0.3048*1.5</code>, could result in a number like
<code>0.45720000000000005</code>, which would neither be correct or visually appealing when displayed.

There are other ways to do this. of course.</p></div>

<h3>Start the Event Loop</h3>

<p>Finally, we need to tell Tk to enter its event loop, which is necessary for everything to appear onscreen and allow users to
interact with it.</p>

<div class=python><pre>root.mainloop()</pre>
</div>

<div class=tcl><pre>vwait forever</pre>
<p>We actually don't need to explicitly provide this (most of the time), as <code>wish</code> will automatically enter the event loop 
after it's read your script.</p>
</div>

<div class=ruby><pre>Tk.mainloop</pre>
</div>

<div class=perl><pre>Tkx::MainLoop();</pre>
</div>




 <a name="missing"></a><h2>What's Missing</h2>

<p>We've now seen how to create widgets, put them onscreen, and respond to users interacting with them. It's certainly not fancy, could probably do with some error checking, but it's a fully-functional GUI application.</p>

<p>It's also worth examing what we <em>didn't</em> have to include in our Tk program to make
it work.  For example:</p>
<ul>
<li> we didn't have to worry about redrawing the screen as things changed
<li> we didn't have to worry about parsing and dispatching events, hit detection, or handling events on each widget
<li> we didn't have to provide a lot of options when we created widgets; the defaults seemed
	 to take care of most things, and so we only had to change things like the text the button displayed
<li> we didn't have to write complex code to get and set the values of simple widgets; we just attached them to variables
<li> we didn't have to worry about what happens when users close the window or resizes it
<li> we didn't need to write extra code to get this all to work cross-platform
</ul>

<div class=python>
  <h3>One More Thing...</h3>
<p>As this tutorial emphasizes Tkinter, our examples use standalone script code, global variables, and simple functions. In practice, you'll likely organize
  anything beyond the simplest scripts in functions or classes. There are different ways to do this: using modules, creating classes for different parts of
  the user interface, inheriting from Tkinter classes, etc.</p>
<p> Often though, you just want to do something simple to encapsulate your data rather than putting everything into the global variable space. Here is the 
  feet to meters example, rewritten to encapsulate the main code into a class. Note the use of <code>self</code> on callbacks (which execute at the global scope)
  and <code>StringVar</code>'s.</p>
<pre>from tkinter import *
from tkinter import ttk

class FeetToMeters:

    def __init__(self, root):

        root.title("Feet to Meters")

        mainframe = ttk.Frame(root, padding="3 3 12 12")
        mainframe.grid(column=0, row=0, sticky=(N, W, E, S))
        root.columnconfigure(0, weight=1)
        root.rowconfigure(0, weight=1)
       
        self.feet = StringVar()
        feet_entry = ttk.Entry(mainframe, width=7, textvariable=self.feet)
        feet_entry.grid(column=2, row=1, sticky=(W, E))
        self.meters = StringVar()

        ttk.Label(mainframe, textvariable=self.meters).grid(column=2, row=2, sticky=(W, E))
        ttk.Button(mainframe, text="Calculate", command=self.calculate).grid(column=3, row=3, sticky=W)

        ttk.Label(mainframe, text="feet").grid(column=3, row=1, sticky=W)
        ttk.Label(mainframe, text="is equivalent to").grid(column=1, row=2, sticky=E)
        ttk.Label(mainframe, text="meters").grid(column=3, row=2, sticky=W)

        for child in mainframe.winfo_children(): 
            child.grid_configure(padx=5, pady=5)

        feet_entry.focus()
        root.bind("&lt;Return&gt;", self.calculate)
        
    def calculate(self, *args):
        try:
            value = float(self.feet.get())
            self.meters.set(int(0.3048 * value * 10000.0 + 0.5)/10000.0)
        except ValueError:
            pass

root = Tk()
FeetToMeters(root)
root.mainloop()</pre>
</div>


<h1>Tk Concepts</h1>

<p>With your first example behind you, you now have a basic idea of what a Tk program looks like
and the type of code you need to write to make it work. In this chapter, we'll step back and look at three broad concepts
that you need to know to understand Tk: widgets, geometry management, and event handling.</p>


 <a name="widgets"></a><h2>Widgets</h2>

<p>Widgets are all the things that you see onscreen.  In our example, we had a button, an entry, a few labels,
and a frame.  Others are things like checkboxes, tree views, scrollbars, text areas, and so on.  Widgets
are  often referred to as "controls." You'll also sometimes see them referred to as "windows," particularly
in Tk's documentation. This is a holdover from its X11 roots (under that terminology, both your toplevel application window and
things like a button would be called windows).</p>

<p>Here is an example showing some of Tk's widgets, which we'll cover individually shortly.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/w_several_all.png' alt='screen shot'><br />
Several Tk Widgets.</p>


<h3>Widget Classes</h3>

<p>Widgets are objects, instances of classes that represent buttons, frames, and so on.  When you want to create a widget, the first
thing you'll need to do is identify the specific class of the widget you'd like to instantiate.  
This tutorial and the <a href="../../external.html?link=https://tkdocs.com/widgets/index.html">widget roundup</a> will help with that.</p>

<h3>Widget Hierarchy</h3>

<p>Besides the widget class, you'll need one other piece of information to create it: its <em>parent</em>. Widgets don't float off in space. Instead, they're contained within something else, like a window. In Tk, all widgets are part of a <em>widget (or window) hierarchy</em>, with a single root at the top of the hierarchy.</p>

<p>In our metric conversion example, we had a single frame that was created as a child of the root 
window, and that frame had all the other controls as children.  The root window was a <em>container</em>
for the frame and was, therefore, the frame's <em>parent</em>.  The complete hierarchy for the example
looked like this:</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/hierarchy.png' alt='screen shot'><br />
The widget hierarchy of the metric conversion example.</p>

<p>This hierarchy can be arbitrarily deep, so you might have a button in a frame in
another frame within the root window.  Even a new window in your application (often called a <em>toplevel</em>) is part 
of that same hierarchy. That window and all its contents form a subtree of the overall widget hierarchy.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/deephierarchy.png' alt='screen shot'><br />
Hierarchy of a more substantial application. Leaf nodes (buttons, labels, etc.) omitted.</p>


<h3>Creating Widgets</h3>


<div class=python>
<p>Each separate widget is a Python object.  When instantiating a widget, you must pass its parent as a
parameter to the widget class.  The <em>only</em> exception is the "root" window,
which is the toplevel window that will contain everything else.  That is automatically created when you instantiate <code>Tk</code>.
It does not have a parent.  For example:</p>
<pre>
root = Tk()
content = ttk.Frame(root)
button = ttk.Button(content)
</pre>

<p>Whether or not you save the widget object in a variable is entirely up to you, depending on
whether you'll need to refer to it later.  Because the object is inserted into the widget
hierarchy, it won't be garbage collected even if you don't keep your own reference to it.</p>

<div class=fyi><p>If you sneak a peek at how Tcl manages widgets, you'll see each widget has a specific pathname;
you'll also see this pathname referred to in Tk reference documentation.  Tkinter chooses and
manages all these pathnames for you behind the scenes, so you should never have to worry about 
them.  If you do, you can get the pathname from a widget by calling <code>str(widget)</code>.</p></div>

</div>

<div class=tcl>
<p>In Tcl, each widget is given an explicit <em>pathname</em>, which both differentiates it from other
widgets, and also indicates its place in the window hierarchy.  The root of the hierarchy, the
toplevel widget that Tk automatically creates, is named simply <code>.</code> (dot).  </p>

<p>The frame, which was a child of the root, was named <code>.c</code>.  We could have put pretty much anything in 
place of the "c", naming it for example <code>.content</code>.  This name is purely for use by your program,
so it's best to choose something meaningful.  The controls that were children of the frame were given
names like <code>.c.feet</code>, <code>.c.meters</code>, <code>.c.flbl</code>, and so on.  If there were any widgets at a deeper
level of the hierarchy, we'd add another <code>.</code> and then a unique identifier.</p>

<p>So to create a widget, we need to provide the widget class, and the pathname.  The pathname is
used to indicate the widget's parent (which must of course exist also), and hence its position
in the window hierarchy.  For example:</p>

<pre>
ttk::button .b
ttk::frame .f
ttk::entry .f.entry
</pre>
<p>This also creates a new <em>object command</em> with the same name as the widget's pathname, which will
let us communicate with the widget.  So the above code would produce new Tcl commands named <code>.b</code>,
<code>.f</code>, <code>.f.entry</code>, and so on.  You can then use that object command to communicate
further with the widget, calling e.g. <code>.b invoke</code>, or <code>.f.entry state disabled</code>.
Because of the obvious parallels with many object-oriented systems, we'll often refer to the object
commands as <em>objects</em>, and calls on those objects (like the <code>invoke</code>) as <em>method</em> calls.
For example, we'll see below the use of the <code>configure</code> and <code>cget</code> methods.</p>

<p>Speaking of which, Tcl uses a more shell-like syntax than the other languages covered in this tutorial,
  with spaces separating parameters rather than commas or other delimeters.
  Some procedure or method names that are written as multiple words in Tcl (e.g., <code>selection clear</code>)
  are implemented as a single identifier in most other Tk language bindings (e.g. <code>selection_clear</code>).
  We'll generally use the latter notation when referring to these methods in the text, while language-specific
  notation is used in accompanying code snippets.</p>


</div>

<div class=ruby>
<p>Each separate widget is a Ruby object.  When creating a widget, you must pass its parent as a
parameter to the widget class' <code>new</code> method.  The <em>only</em> exception is the "root" window,
which is the toplevel window that will contain everything else.  That is instantiated from 
the TkRoot class, and it does not have a parent.  For example:</p>
<pre>
root = TkRoot.new 
content = Tk::Tile::Frame.new(root)
Tk::Tile::Button.new(content)
</pre>

<p>Whether or not you save the widget object in a variable is entirely up to you, and depends of
course whether you'll need to refer to it later.  Because the object is inserted into the widget
hierarchy, it won't be garbage collected even if you don't keep your own reference to it.</p>

<div class=fyi><p>If you sneak a peek at how Tcl manages widgets, you'll see each widget has a specific pathname;
you'll also see this pathname referred to in Tk reference documentation.  Ruby/Tk chooses and
manages all these pathnames for you behind the scenes, so you should never have to worry about 
them.  If you do though, you can get the pathname from a widget with its <code>path</code> method.</p></div>

</div>

<div class=perl>
<p>In Perl, each widget is given an explicit <em>pathname</em>, which both differentiates it from other
widgets, and also indicates its place in the window hierarchy.  The root of the hierarchy, the
toplevel widget that Tk automatically creates, is named simply <code>.</code> (dot).  </p>

<p>The frame, which was a child of the root, was named <code>.c</code>.  We could have put pretty much anything in 
place of the "c", naming it for example <code>.content</code>.  This name is purely for use by your program,
so it's best to choose something meaningful.  The controls that were children of the frame were given
names like <code>.c.feet</code>, <code>.c.meters</code>, <code>.c.flbl</code>, and so on.  If there were any widgets at a deeper
level of the hierarchy, we'd add another <code>.</code> and then a unique identifier.</p>

<p>So to create a widget, we need to provide the widget class, and the pathname.  The pathname is
used to indicate the widget's parent (which must of course exist also), and hence its position
in the window hierarchy.  For example:</p>

<pre>
Tkx::ttk__button(".b", -text => "hello");
Tkx::ttk__frame(".f");
Tkx::ttk__entry(".f.entry");
</pre>

<h4>Widget Objects</h4>

<p>Many widgets have operations that you can call on them, such as to disable a widget, invoke a button's
command, and so on.  If we were doing this in Tcl, we'd write something like <code>.b invoke</code> or
<code>.f.entry state disabled</code>.  Essentially you'd think of ".b" or ".f.entry" as objects, and
"invoke" and "state" as methods, the latter having a single parameter "disabled".  In Perl, you can
call the exact Tcl command like this:
<pre>Tkx::i::call(".b", "invoke");
Tkx::i::call(".f.entry", "state", "disabled");</pre>
<p>Admittedly, that's pretty lame.  Ideally, we'd want to have these widgets behave just like Perl
objects.  Luckily, Tkx lets us do exactly that.  </p>

<p>The first thing we need to do is get a reference to an object for these widgets.  We can do that
like this, passing the widget pathname to <code>Tkx::widget->new</code>:</p>

<pre>
my $b = Tkx::widget->new(".b");
my $e = Tkx::widget->new(".f.entry");</pre>
<p>Then we can invoke methods on these objects just how you'd expect:</p>

<pre>$b->invoke;
$e->state("disabled");</pre>
<p>Creating each widget and then getting a reference to it as a separate step is a bit much.
So there's another way to create widgets.  If you have an object reference to the parent widget in the
widget hierarchy, you can ask it to create a child.  </p>

<pre>my $mw = Tkx::widget->new(".");
my $b = $mw->new_ttk__button(-text => "hello");
my $f = $mw->new_ttk__frame;
my $e = $f->new_ttk__entry;</pre>
<p>In this case, Tkx will choose the widget pathname for you (it'll look something like ".b", ".f.e", ".f.e2", etc.).</p>

<div class=tip><p>You can get this path by calling the object's "_mpath" method (e.g. <code>$b->_mpath</code>).  If you stringify the
object itself (e.g. trying to print it out), it will also be the widget pathname.</p></div>

<p>You also saw in our earlier example that some Tkx commands (like "grid") take the widget pathname as their
first argument.  There's a way to do that using the widget object instead.  We invoke a method which is the
name of the command, prefixed by "g_", e.g. "g_grid".  So this:</p>

<pre>Tkx::ttk__entry(".c.feet", -width => 7, -textvariable => \$feet);
Tkx::grid(".c.feet", -column => 2, -row => 1, -sticky => "we");</pre>
<p>becomes this:</p>
<pre>my $mw = Tkx::widget->new(".");
my $ft = $mw->new_ttk__entry(-width => 7, -textvariable => \$feet);
$ft->g_grid(-column => 2, -row => 1, -sticky => "we");</pre>

<h4>Translation Rules</h4>
<p>What's somewhat scary about the Tkx module is that it implements all of this on a purely syntactic level.
That is, it has no clue about buttons and entries and grid.  It just knows that if it sees a method "new_<em>something</em>"
it's creating a widget using the Tcl command "<em>something</em>", or if you call a method "g_<em>otherthing</em>", that
it's going to invoke a Tcl command "<em>otherthing</em>", and pass the widget pathname associated with the object as a
first parameter (followed by any other parameters passed to the method).</p>

<div class=fyi><p>It's this pure syntactic mapping which gives Tkx its power and amazing brevity (check out the code in Tkx.pm!).  
It also explains why it can automatically track any changes in Tk.  Any new commands and options don't need to be 
explicitly implemented in Tkx code; they are automatically available just by using the right syntax.</p></div>

<p>Now let's talk about those underscores in the Tkx commands and method names.  If you've glanced at the Tcl version
of the code in this tutorial, you know that they can take several forms, i.e.</p>
<ul>
<li> a single toplevel command, like <code>grid</code>
<li> a multi-word command (called an ensemble in Tcl), e.g. <code>wm title</code>
<li> a command in a namespace, e.g. <code>ttk::button</code>
<li> a single toplevel command with underscores, e.g. <code>tk_messageBox</code>
</ul>

<p>No translations are needed for simple commands like "grid", but the others need to be tweaked.
To translate these into Perl, Tkx uses underscores in the following way:</p>
<ul>
<li> a single underscore is replaced with a space, e.g. <code>wm_title</code> in Perl becomes <code>wm title</code> in Tcl
<li> two underscores is replaced with the namespace qualifier "::", e.g. <code>ttk__button</code> becomes <code>ttk::button</code>
<li> three underscores is replaced with a single underscore, e.g. <code>tk___messageBox</code> becomes <code>tk_messageBox</code>
</ul>

<p>Given that this purely syntactic translation is all that Tkx does, let's state the obvious: whether or not you
use the pure command form, which we used in the "feet to meters" example, or the object oriented form, <em>they
both do exactly the same thing</em> (i.e. invoke the same underlying Tcl command).  </p>

<p>Because you can get an object's
widget pathname, or get an object reference from a widget pathname, you can also freely intermix them.  Most
programs of any length will probably be a bit simpler if they predominately use the object oriented form,
but this is almost entirely a stylistic issue.</p>


<h4>Feet to Meters, Object Style</h4>
<p>Here's the earlier "feet to meters" example, this time rewritten in the object oriented style.
The programs do exactly the same thing.</p>

<pre>use Tkx;

my $mw = Tkx::widget-&gt;new(".");
$mw-&gt;g_wm_title("Feet to Meters");
my $frm = $mw->new_ttk__frame(-padding =&gt; "3 3 12 12");
$frm->g_grid(-column => 0, -row => 0, -sticky =&gt; "nwes");
$mw->g_grid_columnconfigure(0, -weight =&gt; 1);
$mw->g_grid_rowconfigure(0, -weight =&gt; 1);

my $ef = $frm->new_ttk__entry(-width => 7, -textvariable =&gt; \$feet);
$ef->g_grid(-column => 2, -row => 1, -sticky =&gt; "we");
my $em = $frm->new_ttk__label(-textvariable =&gt; \$meters);
$em->g_grid(-column => 2, -row => 2, -sticky =&gt; "we");
my $cb = $frm->new_ttk__button(-text => "Calculate", -command =&gt; sub {calculate();});
$cb->g_grid(-column => 3, -row => 3, -sticky =&gt; "w");

$frm->new_ttk__label(-text => "feet")->g_grid(-column => 3, -row => 1, -sticky =&gt; "w");
$frm->new_ttk__label(-text => "is equivalent to")->g_grid(-column => 1, -row => 2, -sticky =&gt; "e");
$frm->new_ttk__label(-text => "meters")->g_grid(-column => 3, -row => 2, -sticky =&gt; "w");

foreach (Tkx::SplitList($frm-&gt;g_winfo_children)) {
    Tkx::grid_configure($_, -padx => 5, -pady =&gt; 5);
}
$ef-&gt;g_focus;
$mw->g_bind("&lt;Return&gt;", sub {calculate();});

sub calculate {
   $meters = int(0.3048*$feet*10000.0+.5)/10000.0 || '';
}

Tkx::MainLoop();
</pre>

</div>



<h3>Configuration Options</h3>

<p>All widgets have several <em>configuration options</em>. These control how the widget is displayed or how it behaves.</p>

<p>The available options for a widget depend upon the widget class, of course. There is a lot of consistency 
between different widget classes, so options that do pretty much the same thing tend to be named the same.
For example, both a button and a label have a <code>text</code> option to adjust the text that the widget displays, while a
scrollbar would not have a <code>text</code> option since it's not needed.  Similarly, the
button has a <code>command</code> option telling it what to do when pushed, while a label, which holds just
static text, does not.</p>

<p>Configuration options can be set when the widget is first created by specifying their names and
values as optional parameters.  Later, you can retrieve the current values of those options, 
and with a very small number of exceptions, change them at any time. </p>

<p>If you're not sure what configuration options a widget supports, you can ask the widget to describe them.  This gives you
a long list of all its options. </p>

<p>This is all best illustrated with the following interactive dialog with the interpreter.</p>

<div class=python><pre>
% <b>python</b>
&gt;&gt;&gt; <b>from tkinter import *</b>
&gt;&gt;&gt; <b>from tkinter import ttk</b>
&gt;&gt;&gt; <b>root = Tk()</b>
<em>create a button, passing two options:</em>
&gt;&gt;&gt; <b>button = ttk.Button(root, text="Hello", command="buttonpressed")</b>
&gt;&gt;&gt; <b>button.grid()</b>
<em>check the current value of the text option:</em>
&gt;&gt;&gt; <b>button['text']</b>
'Hello'
<em>change the value of the text option:</em>
&gt;&gt;&gt; <b>button['text'] = 'goodbye'</b>
<em>another way to do the same thing:</em>
&gt;&gt;&gt; <b>button.configure(text='goodbye')</b>
<em>check the current value of the text option:</em>
&gt;&gt;&gt; <b>button['text']</b>
'goodbye'
<em>get all information about the text option:</em>
&gt;&gt;&gt; <b>button.configure('text')</b>
('text', 'text', 'Text', '', 'goodbye')
<em>get information on all options for this widget:</em>
&gt;&gt;&gt; <b>button.configure()</b>
{'cursor': ('cursor', 'cursor', 'Cursor', '', ''), 'style': ('style', 'style', 'Style', '', ''), 
'default': ('default', 'default', 'Default', &lt;index object at 0x00DFFD10&gt;, &lt;index object at 0x00DFFD10&gt;), 
'text': ('text', 'text', 'Text', '', 'goodbye'), 'image': ('image', 'image', 'Image', '', ''), 
'class': ('class', '', '', '', ''), 'padding': ('padding', 'padding', 'Pad', '', ''), 
'width': ('width', 'width', 'Width', '', ''), 
'state': ('state', 'state', 'State', &lt;index object at 0x0167FA20&gt;, &lt;index object at 0x0167FA20&gt;), 
'command': ('command', 'command' , 'Command', '', 'buttonpressed'), 
'textvariable': ('textvariable', 'textVariable', 'Variable', '', ''), 
'compound': ('compound', 'compound', 'Compound', &lt;index object at 0x0167FA08&gt;, &lt;index object at 0x0167FA08&gt;), 
'underline': ('underline', 'underline', 'Underline', -1, -1), 
'takefocus': ('takefocus', 'takeFocus', 'TakeFocus', '', 'ttk::takefocus')}
</pre></div>

<div class=tcl><pre>
% <b>wish8.5</b>
<em>create a button, passing two options:</em>
% <b>grid [ttk::button .b -text "Hello" -command {button_pressed}]</b>
<em>check the current value of the text option:</em>
% <b>.b cget -text</b>
Hello
<em>check the current value of the command option:</em>
% <b>.b cget -command</b>
button_pressed
<em>change the value of the text option:</em>
% <b>.b configure -text Goodbye</b>
<em>check the current value of the text option:</em>
% <b>.b cget -text</b>
Goodbye
<em>get all information about the text option:</em>
% <b>.b configure -text</b>
-text text Text {} Goodbye
<em>get information on all options for this widget:</em>
% <b>.b configure</b>
{-takefocus takeFocus TakeFocus ttk::takefocus ttk::takefocus} 
{-command command Command {} button_pressed} {-default default Default normal normal} 
{-text text Text {} Goodbye} {-textvariable textVariable Variable {} {}} 
{-underline underline Underline -1 -1} {-width width Width {} {}} {-image image Image {} {}} 
{-compound compound Compound none none} {-padding padding Pad {} {}} 
{-state state State normal normal} {-takefocus takeFocus TakeFocus {} ttk::takefocus} 
{-cursor cursor Cursor {} {}} {-style style Style {} {}} {-class {} {} {} {}}
</pre></div>

<div class=ruby><pre>
% <b>irb</b>
irb(main):001:0> <b>require 'tk'</b>
=> true
irb(main):002:0> <b>require 'tkextlib/tile'</b>
=> true
<em>create a button, passing two options:</em>
irb(main):003:0> <b>root = TkRoot.new</b>
=> #&lt;TkRoot:0xb7c8c9d8 @path="."&gt;
irb(main):004:0> <b>button = Tk::Tile::Button.new(root) {text "Hello"; command "button_pressed"}.grid</b>
=> #&lt;Tk::Tile::TButton:0xb7c86ab0 @cmdtbl=["c00001"], @path=".w00000"&gt;
<em>check the current value of the text option:</em>
irb(main):005:0> <b>button['text']</b>
=> "Hello"
<em>check the current value of the command option:</em>
irb(main):006:0> <b>button['command']</b>
=> #&lt;cb_entry:fdbe42342&gt;
<em>change the value of the text option:</em>
irb(main):007:0> <b>button['text'] = 'goodbye'</b>
=> "goodbye"
<em>check the current value of the text option:</em>
irb(main):008:0> <b>button['text']</b>
=> "goodbye"
<em>get all information about the text option:</em>
irb(main):009:0> <b>button.configinfo 'text'</b>
=> ["text", "text", "Text", "", "goodbye"]
<em>get information on all options for this widget:</em>
irb(main):010:0> <b>button.configinfo</b>
=> [["takefocus", "takeFocus", "TakeFocus", true, true], ["command", "command", "Command", "", #<cb_entry:fdbe42342>], 
["default", "default", "Default", "normal", "normal"], ["text", "text", "Text", "", "goodbye"],
 ["textvariable", "textVariable", "Variable", nil, nil], 
["underline", "underline", "Underline", -1, -1], ["width", "width", "Width", "", ""], 
["image", "image", "Image", "", ""], ["compound", "compound", "Compound", "none", "none"], 
["padding", "padding", "Pad", "", ""], ["state", "state", "State", "normal", "normal"], 
["takefocus", "takeFocus", "TakeFocus", nil, true], ["cursor", "cursor", "Cursor", "", ""], 
["style", "style", "Style", [], []], ["class", "", "", "", ""]]
</pre></div>

<div class=perl><pre>
<em>run Perl interactively using the program "psh":</em>
% <b>psh</b>
Perl> <b>use Tkx</b>
Perl> <b>$mw = Tkx::widget->new(".")</b>
.
<em>create a button, passing two options:</em>
Perl> <b>($b = $mw->new_ttk__button(-text => "Hello", -command => sub {button_pressed();}))->g_grid</b>
.b
<em>check the current value of the text option:</em>
<em>  (note that "m_&lt;foo&gt;" is another one of those magic Tkx translations 
   like "g_&lt;foo&gt;"; in this case it means call the &lt;foo&gt; method on the object)</em>
Perl> <b>$b->m_cget(-text)</b>
Hello
<em>conveniently, the "m_" part is almost always optional:</em>
Perl> <b>$b->cget(-text)</b>
Hello
<em>check the current value of the command option:</em>
Perl> <b>$b->cget(-command)</b>
::perl::CODE(0x839020)
<em>change the value of the text option:</em>
Perl> <b>$b->configure(-text => "Goodbye")</b>

<em>check the current value of the text option:</em>
Perl> <b>$b->cget(-text)</b>
Goodbye
<em>get all information about the text option:</em>
Perl> <b>$b->configure(-text)</b>
-text text Text {} Goodbye
<em>convert the Tcl list this returns into a Perl list:</em>
Perl> <b>Tkx::SplitList($b->configure(-text))</b>
-text, text, Text, , Goodbye
<em>get information on all options for this widget:</em>
Perl> <b>$b->configure</b>
{-takefocus takeFocus TakeFocus ttk::takefocus ttk::takefocus} 
{-command command Command {} ::perl::CODE(0x839020)} {-default default Default normal normal} 
{-text text Text {} Goodbye} {-textvariable textVariable Variable {} {}} 
{-underline underline Underline -1 -1} {-width width Width {} {}} {-image image Image {} {}} 
{-compound compound Compound none none} {-padding padding Pad {} {}} 
{-state state State normal normal} {-takefocus takeFocus TakeFocus {} ttk::takefocus} 
{-cursor cursor Cursor {} {}} {-style style Style {} {}} {-class {} {} {} {}}
</pre></div>


<p>As you can see, for each option, Tk will show you the name of the option and its
current value (along with three other attributes which you won't normally need to worry about).</p>
  
<div class=fyi><p>Ok, if you really want to know, here are the details on the five pieces of data provided for each configuration option. 
  The most useful are the first, which is the option's name, and the fifth, which is the option's current value. 
  The fourth is the default value of the option, or in other words, the value it would have if you didn't change it.
  The other two relate to something called the option database. We'll touch on it when we discuss menus,
  but it's not something that's used in modern applications. The second item is the name of the option in the database, and the 
  third is its class.</p></div>


<h3>Widget Introspection</h3>

<p>Tk exposes a treasure trove of information about each and every widget that your application can take advantage of. 
  Much of it is available via the <code>winfo</code> facility; see the see the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/winfo.htm"><code>winfo</code></a> command reference 
  for full details.</p>
  

<p>This short example traverses the widget hierarchy, using each widget's <code>winfo_children</code> method to identify any child widgets
  that need to examined. For each widget, we print some basic information, including it's class (button, frame, etc.), it's width and height,
  and it's position relative to it's parent.</p>

<div class=python><pre>def print_hierarchy(w, depth=0):
    print('  '*depth + w.winfo_class() + ' w=' + str(w.winfo_width()) + ' h=' + str(w.winfo_height()) + ' x=' + str(w.winfo_x()) + ' y=' + str(w.winfo_y()))
    for i in w.winfo_children():
        print_hierarchy(i, depth+1)
print_hierarchy(root)
</pre></div>
<div class=tcl><pre>proc print_hierarchy {w {depth 0}} {
    puts "[string repeat "  " $depth][winfo class $w] w=[winfo width $w] h=[winfo height $w] x=[winfo x $w] y=[winfo y $w]"
    foreach i [winfo children $w] {
        print_hierarchy $i [expr {$depth+1}]
    }
}
print_hierarchy .
</pre></div>
<div class=ruby><pre>def print_hierarchy(w, depth=0)
    print("  "*depth + w.winfo_class() + ' w=' + w.winfo_width().to_s + ' h=' + w.winfo_height().to_s + ' x=' + w.winfo_x().to_s + ' y=' + w.winfo_y().to_s + "\n")
    w.winfo_children().each do |i| 
        print_hierarchy(i, depth+1)
    end
end
print_hierarchy root
</pre></div>
<div class=perl><pre>sub print_hierarchy {
    my ($w, $depth) = @_;
    $depth //= 0;
    print("  "x$depth, $w->g_winfo_class(), " w=", $w->g_winfo_width(), " h=", $w->g_winfo_height(), " x=", $w->g_winfo_x(), " y=", $w->g_winfo_y(), "\n");
    foreach (Tkx::SplitList($w->g_winfo_children())) {
        print_hierarchy(Tkx::widget->new($_), $depth+1);
    }
}
print_hierarchy($mw);
</pre></div>

<p>The following are some of the most useful methods:</p>
<dl class="row ml-sm-1">
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>winfo_class</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">a class identifying the type of widget, e.g. <code>TButton</code> for a themed button</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>winfo_children</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">a list of widgets that are the direct children of a widget in the hierarchy</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>winfo_parent</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">parent of the widget in the hierarchy</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>winfo_toplevel</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">the toplevel window containing this widget</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>winfo_width, winfo_height</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">current width and height of the widget; not accurate until appears onscreen</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>winfo_reqwidth, winfo_reqheight</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">the width and height the widget requests of the geometry manager (more on this shortly)</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>winfo_x, winfo_y</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">the position of the top-left corner of the widget relative to its parent</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>winfo_rootx, winfo_rooty</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">the position of the top-left corner of the widget relative to the entire screen</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>winfo_vieweable</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">whether the widget is displayed or hidden (all its ancestors in the hierarchy must be viewable for it to be viewable)</dd>  
</dl>




 <a name="geometry"></a><h2>Geometry Management</h2>

<p>If you've been running code interactively, you've probably that just by creating widgets, they didn't appear
onscreen.  Placing widgets onscreen, and precisely <em>where</em> they are placed, is a separate step called <em>geometry management</em>.</p>

<p>In our example, positioning each widget was accomplished by the <code>grid</code> command. We specified the column and row we
wanted each widget to go in, how things were to be aligned within the grid, etc.  Grid is an example of a
<em>geometry manager</em> (of which there are several in Tk, grid being the most useful). 
For now, we'll look at geometry management in general; we'll talk about grid in a later chapter.</p>

<p>A geometry manager's job is to figure out exactly where those widgets are going to be put.  This turns out to be a complex
optimization problem, and a good geometry manager relies on quite sophisticated algorithms.  A good geometry
manager provides the flexibility, power, and ease of use that makes programmers happy. It also makes it easy to create good looking user interface layouts without needing to jump through hoops. Tk's <code>grid</code> is, without
a doubt, one of the absolute best.  A poor geometry manager... well, all the Java programmers who have suffered
through "GridBagLayout" please raise their hands.</p>

<div class=upgrade><p>
We'll go into more detail in a later chapter, but <code>grid</code> was introduced several years after Tk became popular.
Before that, an older geometry manager named <code>pack</code> was most commonly used. It's very powerful, but is much harder to use,
and makes it extremely difficult to create layouts that look appealing today. Unfortunately, much of the example Tk code and documentation out
there uses <code>pack</code> instead of <code>grid</code> (a good clue to how current it is). The widespread use of <code>pack</code> is one major reason that so many Tk user interfaces look terrible. Start new code with <code>grid</code>, and upgrade old code when you can.
</p></div>

<h3>The Problem</h3>

<p>The problem for a geometry manager is to take all the different widgets the program creates, plus the program's instructions
for where in the window each should go (explicitly, or more often, relative to other widgets),
and then actually position them in the window.</p>

<p>In doing so, the geometry manager has to balance multiple constraints. Consider these situations:</p>

<ul>
<li> The widgets may have a <em>natural</em> size, e.g., the natural width of a label would depend on the text 
it displays and the font used to display it. What if the application window containing all these different widgets isn't big enough to 
	 accommodate them? The geometry manager must decide which widgets to shrink to fit, by how much, etc.</li>
<li> If the application window is bigger than the natural size of all the widgets, how is the extra space used?  Is 
	 extra space placed between each widget, and if so, how is that space distributed?  Is it used to make certain widgets
	 larger than they normally want to be, such as a text entry growing to fill a wider window? Which widgets should grow?</li>
<li> If the application window is resized, how does the size and position of each widgets inside it change?  Will certain areas
	 (e.g., a text entry area) expand or shrink while other parts stay the same size, or is the area distributed 
	 differently?  Do certain widgets have a minimum size that you want to avoid going below? A maximum size? Does the window
   itself have a minimum or maximum size?</li>
<li> How can widgets in different parts of the user interface be aligned with each other? How much space should be left between them?
  This is needed to present a clean layout and comply with platform-specific user interface guidelines.</li>
<li> For a complex user interface, which may have many frames nested in other frames nested in the window (etc.), 
	 how can all the above be accomplished, trading off the conflicting demands of different parts of the entire
	 user interface?</li>
</ul>

<h3>How it Works</h3>

<p>Geometry management in Tk relies on the concept of <em>master</em> and <em>slave</em> widgets.  A master is a widget,
typically a toplevel application window or a frame, which contains other widgets, called slaves.  You can think of
a geometry manager taking control of the master widget and deciding how all the slave widgets will be displayed within.</p>

<div class=fyi><p>The computing community has embraced the more general societal trend towards more diversity, sensitivity, and awareness about the 
  impacts of language. Recognizing this, the Tk core will slowly be adopting a more inclusive set of terminology. For example, 
  where it makes sense, "parent" and "child" will be preferred over "master" and "slave." To preserve backward compatibility, the current
  terminology will not be disappearing. This is something to be aware of for the future. For more details, see
  <a href="../../external.html?link=https://tip.tcl.tk/581">TIP #581</a>.</p></div>

<p>Your program tells the geometry manager what slaves to manage within the master, i.e., via calling <code>grid</code>. Your program also 
  provides hints as to how it would like each slave to be displayed, e.g., via the <code>column</code> and <code>row</code> options. 
  You can also provide other things to the geometry manager. For example, we used <code>columnconfigure</code> and <code>rowconfigure</code> to indicate
the columns and rows we'd like to expand if there is extra space available in the window.  It's worth noting that all these
parameters and hints are specific to <code>grid</code>; other geometry managers would use different ones.</p>


<p>The geometry manager takes all the information about the slaves in the master, as well as information about how large the master
is. It then asks each slave widget for its natural size, i.e., how large it would ideally like to be displayed. The geometry manager's internal algorithm calculates the area each slave will be allocated (if any!).  The slave is then
responsible for rendering itself within that particular rectangle.  And of course, any time the size of the master changes
(e.g., because the toplevel window was resized), the natural size of a slave changes (e.g., because we've changed the
text in a label), or any of the geometry manager parameters change (e.g., like <code>row</code>, <code>column</code>, or <code>sticky</code>) we repeat
the whole thing.</p>

<p>This all works recursively as well.  In our example, we had a content frame inside the toplevel application window, and then several
other widgets inside the content frame.  We, therefore, had to manage the geometry for two different masters.  At the
outer level, the toplevel window was the master, and the content frame was its slave.  At the inner level, the content
frame was the master, with each of the other widgets being slaves.  Notice that the same widget, e.g., the content frame, 
can be both a master and a slave!  As we saw previously, this widget hierarchy can be nested much more deeply.</p>

<div class=fyi><p>While each master can be managed by only one geometry manager (e.g. <code>grid</code>), different masters can have
different geometry managers. While <code>grid</code> is the right choice most of the time, others may make sense for a particular layout used in one
part of your user interface.  Other Tk geometry managers include <code>pack</code>, which we've mentioned, and <code>place</code>, which leaves all layout decisions entirely up to you. Some complex widgets like <code>canvas</code> and <code>text</code> let you embed other widgets, making them de facto geometry managers.
</p><p>
Finally, we've been making the assumption that slave widgets are the immediate children of
their master in the widget hierarchy.  While this is usually the case, and mostly there's no good reason to do it
any other way, it's also possible (with some restrictions) to get around this.</p></div>


 <a name="events"></a><h2>Event Handling</h2>

<p>Tk, as with most other user interface toolkits, runs an <em>event loop</em> that receives events from the
operating system.  These are things like button presses, keystrokes, mouse movement, window resizing, and so on.</p>

<p>Generally, Tk takes care of managing this event loop for you.  It will figure out what widget the event applies
to (did a user click on this button?  if a key was pressed, which textbox had the focus?), and dispatch it
accordingly.  Individual widgets know how to respond to events; for example, a button might change color when
the mouse moves over it, and revert back when the mouse leaves.</p>

<div class=tip><p>
It's critical in event-driven applications that the event loop not be <em>blocked</em>.
The event loop should run continuously, normally executing dozens of steps per second. At every step, it processes an event. 
If your program is performing a long operation, it can potentially
block the event loop. In that case, no events would be processed, no drawing would be done, and it
would appear as if your application is frozen. There are many ways to avoid this happening, mostly related to the
structure of your application. We'll discuss this in more detail in a later chapter.
</p></div>


<h3>Command Callbacks</h3>

<p>You often want your program to handle some event in a particular way, e.g., do something when a button is 
pushed.  For those events that are most frequently customized (what good is a button without something
happening when you press it?), the widget will allow you to specify a <em>callback</em> as a widget configuration option.
We saw this in the example with the <code>command</code> option of the button.</p>

<div class=python><pre>
def calculate(*args):
    ...

ttk.Button(mainframe, text="Calculate", command=calculate)
</pre></div>

<div class=tcl><pre>
proc calculate {} {...}

ttk::button .c.calc -text "Calculate" -command calculate
</pre></div>

<div class=ruby><pre>
def calculate
   ...
   
Tk::Tile::Button.new(content) {text 'Calculate'; command {calculate}}   
</pre></div>

<div class=perl><pre>
sub calculate {...}

Tkx::ttk__button(".c.calc", -text => "Calculate", -command => sub {calculate();});
</pre></div>


<p>Callbacks in Tk tend to be simpler than in user interface toolkits used with compiled languages (where a callback must 
be a procedure with a certain set of parameters or an object method with a certain signature).
Instead, the callback is just an ordinary bit of code that the interpreter evaluates.  While it can be as complicated
as you want to make it, most of the time, you'll just want your callback to call some other procedure.</p>


<h3>Binding to Events</h3>

<p>For events that don't have a widget-specific command callback associated with them, you can use Tk's <code>bind</code> to capture any
event, and then (like with callbacks) execute an arbitrary piece of code.  </p>

<p>Here's a (silly) example showing a label responding to different events. When an event occurs, a description of the
  event is displayed in the label.</p>

<div class=python><pre>from tkinter import *
from tkinter import ttk
root = Tk()
l =ttk.Label(root, text="Starting...")
l.grid()
l.bind('&lt;Enter&gt;', lambda e: l.configure(text='Moved mouse inside'))
l.bind('&lt;Leave&gt;', lambda e: l.configure(text='Moved mouse outside'))
l.bind('&lt;ButtonPress-1&gt;', lambda e: l.configure(text='Clicked left mouse button'))
l.bind('&lt;3&gt;', lambda e: l.configure(text='Clicked right mouse button'))
l.bind('&lt;Double-1&gt;', lambda e: l.configure(text='Double clicked'))
l.bind('&lt;B3-Motion&gt;', lambda e: l.configure(text='right button drag to %d,%d' % (e.x, e.y)))
root.mainloop()
</pre>	
</div>
<div class=tcl>
<pre>
package require Tk
grid [ttk::label .l -text "Starting..."] 
bind .l &lt;Enter&gt; {.l configure -text "Moved mouse inside"}
bind .l &lt;Leave&gt; {.l configure -text "Moved mouse outside"}
bind .l &lt;ButtonPress-1&gt; {.l configure -text "Clicked left mouse button"}
bind .l &lt;3&gt; {.l configure -text "Clicked right mouse button"}
bind .l &lt;Double-1&gt; {.l configure -text "Double clicked"}
bind .l &lt;B3-Motion&gt; {.l configure -text "right button drag to %x %y"}
</pre>
<div class=tip><p>Note that the <code>bind</code> command lives in the global namespace; there is not a <code>ttk::bind</code> command.</p></div>	
</div>
<div class=ruby>
<pre>
require 'tk'
require 'tkextlib/tile'
root = TkRoot.new
l = Tk::Tile::Label.new(root) {text "Starting..."}.grid
l.bind("Enter") {l['text'] = "Moved mouse inside"}
l.bind("Leave") {l['text'] = "Moved mouse outside"}
l.bind("ButtonPress-1") {l['text'] = "Clicked left mouse button"}
l.bind("3") {l['text'] = "Clicked right mouse button"}
l.bind("Double-1") {l['text'] = "Double clicked"}
l.bind("B3-Motion", proc{|x,y| l['text'] = "right button drag to #{x} #{y}"}, "%x %y")
Tk.mainloop	
</pre>
</div>
<div class=perl><pre>
use Tkx;
my $mw = Tkx::widget->new(".");
(my $l = $mw->new_ttk__label(-text => "Starting..."))->g_grid;
$l->g_bind("&lt;Enter&gt;",     sub {$l->configure(-text => "Moved mouse inside")});
$l->g_bind("&lt;Leave&gt;",     sub {$l->configure(-text => "Moved mouse outside")});
$l->g_bind("&lt;ButtonPress-1&gt;",         sub {$l->configure(-text => "Clicked left mouse button")});
$l->g_bind("&lt;3&gt;",         sub {$l->configure(-text => "Clicked right mouse button")});
$l->g_bind("&lt;Double-1&gt;",  sub {$l->configure(-text => "Double clicked")});
$l->g_bind("&lt;B3-Motion&gt;", [sub { my($x,$y) = @_;
                                 $l->configure(-text => "right button drag to $x $y")
	                   }, Tkx::Ev("%x", "%y")]);
Tkx::MainLoop();
</pre></div>

<p>The first two bindings are pretty straightforward, just watching for simple events.
An <code>&lt;Enter&gt;</code> event means the mouse has moved over top the widget, while the <code>&lt;Leave&gt;</code> event is 
generated when the mouse moves outside the widget to a different one.</p>

<p>The next binding looks for a mouse click, specifically a <code>&lt;ButtonPress-1&gt;</code> event. Here, 
the <code>&lt;ButtonPress&gt;</code> is the actual event, but the <code>-1</code> is an <em>event detail</em> specifying the left (main)
mouse button on the mouse. The binding will only trigger when a <code>&lt;ButtonPress&gt;</code> event is generated involving 
the main mouse button. If another mouse button was clicked, this binding would ignore it.</p>

<p>This next binding looks for a <code>&lt;3&gt;</code> event. This is actually a shorthand for <code>&lt;ButtonPress-3&gt;</code>.
It will respond to events generated when the right mouse button is clicked. The next binding, <code>&lt;Double-1&gt;</code>
(shorthand for <code>&lt;Double-ButtonPress-1&gt;</code>) adds another modifier,
<code>Double</code>, and so will respond to the left mouse button being double clicked.</p>

<p>The last binding also uses a modifier: capture mouse movement (<code>Motion</code>), but only when the right 
mouse button (<code>B3</code>) is held down.  This binding also shows an example of how to use <em>event
parameters</em>. Many events, such as mouse clicks or movement carry additional information like the current position of the
mouse.  Tk provides access to these parameters in Tcl callback scripts through the use of <em>percent substitutions</em>.  
These percent substitutions let you capture them so they can be used in your script.</p>


<div class=python>
<p>Tkinter abstracts away these percent substitutions and instead encapsulates all the event parameters in an <em>event object.</em>
  Above, we used the <code>x</code> and <code>y</code> fields to retrieve the mouse position. We'll see percent substitutions used
  later in another context, entry widget validation.</p>  
  
<div class=fyi><p>What's with the <code>lambda</code> expressions?
Tkinter expects you to provide a function as the event callback, whose first argument is an event object
representing the event that triggered the callback.  It's sometimes not worth the bother of defining regular
named functions for one-off trivial callbacks such as in this example. Instead, we've just used Python's anonymous
functions via <code>lambda</code>. In real applications, you'll almost always use a regular function, such as the
<code>calculate</code> function in our feet to meters example, or a method of an object.</p></div>
</div>

<div class=ruby><div class=tip><p>
As we've described here, and throughout Tk's documentation, events in Tk are surrounded by angle brackets, e.g. <code>&lt;Enter&gt;</code>.
The Ruby/Tk authors decided to strip the angle brackets from events in its API, e.g., <code>Enter</code>. 
</p></div></div>

<div class=perl>
<div class=fyi><p>Tkx lets us provide command callbacks as just a Perl function (the first five), or as a two element 
array (the last case).  The first element is the Perl code to be called, while the second array element
specifies parameters to pass to that code.  The function <code>Tkx::Ev()</code> will expand its parameter
(<code>%x %y</code> in this case) when the callback is invoked, which will perform the percent
substitutions.  These then are passed as parameters to our function.</p></div>
</div>




<h3>Multiple Bindings for an Event</h3>

<p>We've just seen how event bindings can be set up for an individual widget. When a matching event is received by that
  widget, the binding will trigger. But that's not all you can do.</p>
  
<p>Your binding can capture not just a single event, but a short sequence of events. The <code>&lt;Double-1&gt;</code> binding 
  triggers when two mouse clicks occur in a short time. You can do the same thing to capture two keys pressed in a row,
  e.g., <code>&lt;KeyPress-A&gt;&lt;KeyPress-B&gt;</code> or simply <code>&lt;ab&gt;</code>.</p>

<p>You can also set up an event binding on a toplevel window. When a matching event occurs anywhere in that window, the
  binding will be triggered.  In our example, we set up a binding for the Return key on the main application
  toplevel window. If the Return key was pressed when any widget in the toplevel window had the focus, that binding would fire.</p>

<p>Less commonly, you can create event bindings that are triggered when a matching event occurs anywhere in the application,
  or even for events received by any widget of a given class, e.g., all buttons.</p>
  

<div class=fyi><p>
More than one binding can fire for an event.  This keeps event handlers concise and limited in scope, meaning more modular code. 
For example, the behavior of each widget class in Tk is itself defined with script-level event bindings. These stay separate from event bindings in your application.
Event bindings can also be changed or deleted. They can be modified to alter event handling
for widgets of a certain class or parts of your application. You can reorder, extend, or change the sequence 
of event bindings that will be triggered for each widget; 
see the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/bindtags.htm"><code>bindtags</code></a> command reference if you're curious.

</p></div>



<h3>Available Events</h3>

<p>The most commonly used events are described below, along with the circumstances when they are generated. 
  Some are generated on some platforms and not others. 
For a complete description of all the different event names, 
modifiers, and the different event parameters that are available with each, the best place to look is the 
<a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/bind.htm"><code>bind</code></a> command reference.</p>


<dl class="row ml-sm-1">
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;Activate&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Window has become active.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;Deactivate&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Window has been deactivated.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;MouseWheel&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Scroll wheel on mouse has been moved.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;KeyPress&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Key on keyboard has been pressed down.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;KeyRelease&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Key has been released.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;ButtonPress&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A mouse button has been pressed.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;ButtonRelease&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A mouse button has been released.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;Motion&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Mouse has been moved.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;Configure&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Widget has changed size or position.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;Destroy&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Widget is being destroyed.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;FocusIn&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Widget has been given keyboard focus.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;FocusOut&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Widget has lost keyboard focus.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;Enter&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Mouse pointer enters widget.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>&lt;Leave&gt;</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Mouse pointer leaves widget.</dd>
</dl>

<p>Event detail for mouse events are the button that was pressed, e.g. <code>1</code>, <code>2</code>, or <code>3</code>.
For keyboard events, it's the specific key, e.g. <code>A</code>, <code>9</code>, <code>space</code>, <code>plus</code>,
<code>comma</code>, <code>equal</code>. A complete list can be found in the
<a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/keysyms.htm"><code>keysyms</code></a> command reference.</p>


<p>Event modifiers for include, e.g. <code>B1</code> or <code>Button1</code> to signify the main mouse button being held down,
  <code>Double</code> or <code>Triple</code> for sequences of the same event. Key modifiers for when keys on the keyboard are 
  held down inline <code>Control</code>, <code>Shift</code>, <code>Alt</code>, <code>Option</code>, and <code>Command</code>.</p>


<h3>Virtual Events</h3>

<p>The events we've seen so far are low-level operating system events like mouse clicks and window resizes.
Many widgets also generate higher level or semantic events called <em>virtual events</em>. These are indicated
by double angle brackets around the event name, e.g., <code>&lt;&lt;foo&gt;&gt;</code>.</p>

<div class=ruby>
As we've mentioned, Ruby/Tk strips away the (single) angle brackets from regular event names. Virtual events use
a single set of angle brackets, e.g., <code>&lt;foo&gt;</code>.
</div>

<p>For example, a listbox widget will
generate a <code>&lt;&lt;ListboxSelect&gt;&gt;</code> virtual event whenever its selection changes. The same virtual event is generated
whether a user clicked on an item, moved to it using the arrow keys, or some other way.  Virtual events
avoid the problem of setting up multiple, possibly platform-specific event bindings to capture
common changes.  The available virtual events for a widget will be listed in the documentation
for the widget class.</p>

<p>Tk also defines virtual events for common operations that are triggered in different ways for different platforms.
  These include <code>&lt;&lt;Cut&gt;&gt;</code>, <code>&lt;&lt;Copy&gt;&gt;</code> and <code>&lt;&lt;Paste&gt;&gt;</code>.</p>
  
<p>You can define your own virtual events, which can be specific to your application. This can be a useful way
  to keep platform-specific details isolated in a single module, while you use the virtual event throughout your
  application. Your own code can generate virtual events that work in exactly the same way that virtual events generated
  by Tk do.</p>

<div class=python><pre><em>root</em>.event_generate("&lt;&lt;MyOwnEvent&gt;&gt;")</pre></div>
<div class=tcl><pre>event generate . "&lt;&lt;MyOwnEvent&gt;&gt;"</pre></div>
<div class=ruby><pre>Tk.event_generate(<em>root</em>, "&lt;MyOwnEvent&gt;")</pre></div>
<div class=perl><pre>Tkx::event_generate(<em>$mw</em>, "&lt;&lt;MyOwnEvent&gt;&gt;");</pre></div>




<h1>Basic Widgets</h1>

<p>This chapter introduces the basic Tk widgets that you'll find in just about any user interface:
frames, labels, buttons, checkbuttons, radiobuttons, entries, and comboboxes.  By the end,
you'll know how to use all the widgets you'd ever need for a typical fill-in-the-form
type of user interface.</p>

<p>You'll find it easiest to read this chapter (and those following that discuss more widgets) in order.  Because
there is so much commonality between many widgets, we'll introduce certain concepts when describing one
widget that will also apply to a widget we describe later.  Rather than going over the same ground multiple times,
we'll refer back to when the concept was first introduced.</p>

<p>At each widget is introduced, we'll 
refer to the <a href="../../external.html?link=https://tkdocs.com/widgets/index.html">widget roundup</a> page for the specific widget, as well as the 
<a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/contents.htm">Tk reference manual page</a>. 

As a reminder, this tutorial highlights the <em>most useful parts</em> of Tk and how to use
them to build effective modern user interfaces. The reference documentation, which details <em>everything</em> that can be
done in Tk, serves a very different purpose.</p>



 <a name="frame"></a><h2>Frame</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/frame.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_frame.htm">Reference Manual</a></li>
</ul>

<p>A <b>frame</b> is a widget that displays as a simple rectangle.  Frames help to organize your user interface, often
  both visually and at the coding level. Frames often act as master widgets for a geometry manager like <code>grid</code>, 
  which manages the slave widgets contained within the frame.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_frame_all.png' alt='screen shot'><br />
Frame widgets.</p>

<div class=python><p>Frames are created using the <code><b>ttk.Frame</b></code> class:</p><pre>frame = ttk.Frame(<em>parent</em>)</pre></div>
<div class=tcl><p>Frames are created using the <code><b>ttk::frame</b></code> command:</p><pre>ttk::frame .frame</pre></div>
<div class=ruby><p>Frames are created using the <code><b>Tk::Tile::Frame</b></code> class:</p><pre>frame = Tk::Tile::Frame.new(<em>parent</em>)</pre></div>
<div class=perl><p>Frames are created using the <code><b>new_ttk__frame</b></code> method, a.k.a. <code><b>Tkx::ttk__frame()</b></code>:</p><pre>$frame = $<em>parent</em>->new_ttk__frame;</pre></div>
<p>Frames can take several different configuration options, which can alter how they are displayed.</p>

<h4>Requested Size</h4>

<p>Typically, the size of a frame is determined by the size and layout of any widgets within it
  In turn, this is controlled by the geometry manager that manages the contents of the frame itself). </p>

<p>If, for some reason, you want an empty frame that does not contain other widgets, you can instead 
explicitly set its size using the 
<code>width</code> and/or <code>height</code> configuration options (otherwise, you'll end up with a
very small frame indeed).  </p>

<p>Screen distances such as width and height are usually specified as a number of pixels screen.  
You can also specify them via one of several suffixes.  For example, <code>350</code> means
350 pixels, <code>350c</code> means 350 centimeters, <code>350m</code> means 350 millimeters, <code>350i</code> means 350 inches, and <code>350p</code> means 350 printer's points (1/72 inch).</p>

<div class=tip><p>Remember, if you request that a frame (or any widget) to have a given size, the geometry manager has the final
  say. If things aren't showing up the way you want them, make sure to check there too.</p></div>

<h4>Padding</h4>

<p>The <code>padding</code> configuration option is used to request extra space around the inside of
the widget. If you're putting other widgets inside the frame, there will be a bit of a
margin all the way around.  You can specify the same padding for all sides, different horizontal and
vertical padding, or padding for each side separately.</p>

<div class=python><pre>
f['padding'] = 5           <em># 5 pixels on all sides</em>
f['padding'] = (5,10)      <em># 5 on left and right, 10 on top and bottom</em>
f['padding'] = (5,7,10,12) <em># left: 5, top: 7, right: 10, bottom: 12</em>
</pre></div>
<div class=tcl><pre>
.f configure -padding 5           ;<em># 5 pixels on all sides</em>
.f configure -padding "5 10"      ;<em># 5 on left and right, 10 on top and bottom</em>
.f configure -padding "5 7 10 12" ;<em># left: 5, top: 7, right: 10, bottom: 12</em>
</pre></div>
<div class=ruby><pre>
f['padding'] = '5'          ;<em># 5 pixels on all sides</em>
f['padding'] = '5 10'       ;<em># 5 on left and right, 10 on top and bottom</em>
f['padding'] = '5 7 10 12'  ;<em># left: 5, top: 7, right: 10, bottom: 12</em>
</pre></div>
<div class=perl><pre>
$f->configure(-padding => "5");         <em># 5 pixels on all sides</em>
$f->configure(-padding => "5 10");      <em># 5 on left and right, 10 on top and bottom</em>
$f->configure(-padding => "5 7 10 12"); <em># left: 5, top: 7, right: 10, bottom: 12</em>
</pre></div>

<h4>Borders</h4>

<p>You can display a border around a frame widget to visually separate it from its surroundings.
  You'll see this often used to make a part of the user interface look sunken or raised.  To do this,
you need to set the <code>borderwidth</code> configuration option (which defaults to 0, i.e., no border),
and the <code>relief</code> option, which specifies the visual appearance of the border. This can be one of:
<code>flat</code> (default), <code>raised</code>, <code>sunken</code>, <code>solid</code>, <code>ridge</code>, or <code>groove</code>.</p>

<div class=python><pre>frame['borderwidth'] = 2
frame['relief'] = 'sunken'</pre></div>
<div class=tcl><pre>.frame configure -borderwidth 2 -relief sunken</pre></div>
<div class=ruby><pre>frame['borderwidth'] = 2
frame['relief'] = 'sunken'</pre></div>
<div class=perl><pre>$frame->configure(-borderwidth => 2, -relief => "sunken");</pre></div>

<h4>Changing Styles</h4>

<p>Frames have a <code>style</code> configuration option, which is common to all of the themed widgets.
This lets you control many other aspects of their appearance or behavior.  This is a bit more
advanced, so we won't go into it in too much detail right now. But here's a quick example of creating a "Danger"
frame with a red background and a raised border.</p>

<div class=python><pre>s = ttk.Style()
s.configure('Danger.TFrame', background='red', borderwidth=5, relief='raised')
ttk.Frame(root, width=200, height=200, style='Danger.TFrame').grid()</pre></div>
<div class=tcl><pre>ttk::style configure Danger.TFrame -background red -borderwidth 5 -relief raised
grid [ttk::frame .f -width 200 -height 200 -style Danger.TFrame]</pre></div>
<div class=ruby><pre>Tk::Tile::Style.configure('Danger.TFrame', "background" => "red", "borderwidth" => 5, "relief" => "raised")
f = Tk::Tile::Frame.new(root) {width 200; height 200; style "Danger.TFrame"}.grid()</pre></div>
<div class=perl><pre>Tkx::ttk__style_configure("Danger.TFrame", -background => "red", -borderwidth => 5, -relief => "raised");
my $f = $mw->new_ttk__frame(-width => 200, -height => 200, -style => "Danger.TFrame")->g_grid();</pre></div>


<div class=fyi><p>What elements of widgets can be changed by styles vary by widget and platform. 
  On Windows and Linux, it does what you'd expect.
  On current macOS, the frame will have a red raised border, but the background will remain the default grey. 
  Much more on why this is in a later chapter.</p></div>

<div class=upgrade><p>Styles mark a sharp departure from how most aspects of a widget's visual appearance were changed
in the "classic" Tk widgets.  In classic Tk, you could provide a wide range of options to finely
control every aspect of an individual widget's behavior, e.g., foreground color, background color, font, highlight thickness,
selected foreground color, and padding. When using the new themed widgets, these changes are made by modifying styles, 
not adding options to each widget. 
</p><p>
As such, many options you may be familiar with in certain classic widgets are not present in their themed version.  
However, overuse of such options was a key factor undermining the appearance of Tk applications, especially when
used across different platforms. Transitioning from classic to themed widgets provides an opportune time to review and
refine how (and if!) such appearance changes are made.</p></div>






 <a name="label"></a><h2>Label</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/label.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_label.htm">Reference Manual</a></li>
</ul>

<p>A <b>label</b> is a widget that displays text or images, typically that users will just
view but not otherwise interact with.  Labels are used for to identify
controls or other parts of the user interface, provide textual feedback or results, etc.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_label_all.png' alt='screen shot'><br />
Label widgets.</p>


<div class=python><p>Labels are created using the <code><b>ttk.Label</b></code> class. Often, the text or image the label will display are 
specified via configuration options at the same time:</p>
	<pre>label = ttk.Label(<em>parent</em>, text='Full name:')</pre></div>
<div class=tcl><p>Labels are created using the <code><b>ttk::label</b></code> command. Often, the text or image the label will display are 
specified via configuration options at the same time:</p>
	<pre>ttk::label .label -text {Full name:}</pre></div>
<div class=ruby><p>Labels are created using the <code><b>Tk::Tile::Label</b></code> class. Often, the text or image the label will display are 
specified via configuration options at the same time:</p>
	<pre>label = Tk::Tile::Label.new(<em>parent</em>) {text 'Full name:'}</pre></div>
<div class=perl><p>Labels are created using the <code><b>new_ttk__label</b></code> method, a.k.a. <code><b>Tkx::ttk__label()</b></code>. 
Often, the text or image the label will display are specified via configuration options at the same time:</p><pre>$label = $<em>parent</em>->new_ttk__label(-text => "Full name:");</pre></div>
<p>Like frames, labels can take several different configuration options, which can alter how they are displayed.</p>


<h4>Displaying Text</h4>

<p>The <code>text</code> configuration option (shown above when creating the label) is the most commonly used, particularly when
the label is purely decorative or explanatory.  You can change what text is displayed by modifying this configuration option.
This can be done at any time, not only when first creating the label.</p>

<p>You can also have the widget monitor a variable in your script. Anytime the variable changes, the label will
display the new value of the variable. This is done with the <code>textvariable</code> option:</p>

<div class=python><pre>resultsContents = StringVar()
label['textvariable'] = resultsContents
resultsContents.set('New value to display')</pre>
<p>Tkinter only allows you to attach widgets to an instance of the <code>StringVar</code> class, and not arbitrary Python variables.
This class contains all the
logic to watch for changes and communicate them back and forth between the variable and Tk.  Use the <code>get</code> and <code>set</code> methods
to read or write the current value of the variable.</p>
</div>
<div class=tcl><pre>.label configure -textvariable resultContents
set resultContents "New value to display"</pre>
<p>Variables must be global, or the fully qualified name given for those within a namespace.</p>
</div>
<div class=ruby><pre>$resultsVar = TkVariable.new
label['textvariable'] = $resultsVar
$resultsVar.value = 'New value to display'</pre>
<p>Ruby's Tk binding only allows you to attach to an instance of the <code>TkVariable</code> class, which contains all the
logic to watch for changes, communicate them back and forth between the variable and Tk, and so on.  You
need to read or write the current value using the <code>value</code> accessor, as shown.</p>
</div>
<div class=perl><pre>$label->configure(-textvariable => \$resultContents);
$resultContents = "New value to display";</pre>
</div>


<h4>Displaying Images</h4>

<p>Labels can also display an image instead of text. If you just want an image displayed in your
user interface, this is normally the way to do it.  We'll go into images in more detail in a later chapter,
but for now, let's assume you want to display a GIF stored in a file on disk.  This
is a two-step process. First, you will create an image "object." Then, you can tell the label to use that object
via its <code>image</code> configuration option:</p>

<div class=python><pre>image = PhotoImage(file='myimage.gif')
label['image'] = image</pre></div>
<div class=tcl><pre>image create photo imgobj -file "myimage.gif"
.label configure -image imgobj</pre></div>
<div class=ruby><pre>image = TkPhotoImage.new(:file => "myimage.gif")
label['image'] = image</pre></div>
<div class=perl><pre>Tkx::image_create_photo( "imgobj", -file => "myimage.gif");
$label->configure(-image => "imgobj");</pre></div>

<p>Labels can also display both an image and text at the same time. You'll often see this in toolbar buttons. To do so, use the 
<code>compound</code> configuration option.  The default value is <code>none</code>, meaning display
only the image if present; if there is no image, display the text specified by the <code>text</code> or
<code>textvariable</code> options.  Other possible values for the <code>compound</code> option are: <code>text</code> (text only), <code>image</code> (image only),
<code>center</code> (text in the center of image), <code>top</code> (image above text), <code>left</code>, <code>bottom</code>, and <code>right</code>.</p>


<h4>Fonts, Colors, and More</h4>

<p>Like with frames, you normally don't want to change things like fonts and colors directly.
If you need to change them (e.g., to create a special type of label), the preferred method would be to
create a new style, which is then used by the widget with the <code>style</code> option.</p>

<p>Unlike most themed widgets, the label widget also provides explicit widget-specific configuration options
as an alternative. Again, you should use these only in special one-off cases when using a style
didn't necessarily make sense.</p>

<p>You can specify the font used to display the label's text using the <code>font</code> configuration
option.  While we'll go into fonts in more detail in a later chapter, here are the names of some
predefined fonts you can use:</p>

<dl class="row ml-sm-1">
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkDefaultFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Default for all GUI items not otherwise specified.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkTextFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Used for entry widgets, listboxes, etc.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkFixedFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A standard fixed-width font.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkMenuFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The font used for menu items.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkHeadingFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A font for column headings in lists and tables.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkCaptionFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A font for window and dialog caption bars.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkSmallCaptionFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Smaller captions for subwindows or tool dialogs.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkIconFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A font for icon captions.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkTooltipFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A font for tooltips.</dd>
</dl>

<div class=tip><p>Because font choices are so platform-specific, be careful of hardcoding specifics (font families, sizes, etc.).
This is something else you'll see in many older Tk programs that can make them look ugly.</p></div>

<div class=python><pre>label['font'] = "TkDefaultFont"</pre></div>
<div class=tcl><pre>.label configure -font TkDefaultFont</pre></div>
<div class=ruby><pre>label['font'] = "TkDefaultFont"</pre></div>
<div class=perl><pre>$label->configure(-font => "TkDefaultFont");</pre></div>



<p>The foreground (text) and background color of the label can also be changed via the <code>foreground</code> and
<code>background</code> configuration options.  Colors are covered in detail later, but you can specify them as either
color names (e.g., <code>red</code>) or hex RGB codes (e.g., <code>#ff340a</code>).</p>

<p>Labels also accept the <code>relief</code> configuration option discussed for frames to make them appear sunken or raised.</p>


<h4>Layout</h4>

<p>While the overall layout of the label (i.e., where it is positioned within the user interface,
and how large it is) is determined by the geometry manager, several options can
help you control how the label will be displayed within the rectangle the geometry manager gives it.</p>

<p>If the box given to the label is larger than the label requires for its contents, you can use
the <code>anchor</code> option to specify what edge or corner the label should be attached to,
which would leave any empty space in the opposite edge or corner.  Possible values are
specified as compass directions: <code>n</code> (north, or top edge), <code>ne</code>, (north-east, or top right corner),
<code>e</code>, <code>se</code>, <code>s</code>, <code>sw</code>, <code>w</code>, <code>nw</code> or <code>center</code>.  </p>

<div class=tip><p>Things not appearing where you think they should? It may be that the geometry manager is not putting the label 
where you think it is. For example, if you're using <code>grid</code>, you may need to adjust the <code>sticky</code> options.
When debugging, it can help to change the background color of each widget, so you know exactly where each is positioned.
This is a good example of those "one-off" cases we just mentioned where you might use configuration options rather than styles
to modify appearance.
</p></div>

<h4>Multi-line Labels</h4>

<p>Labels can display more than one line of text.  To do so, embed carriage
returns (<code>\n</code>) in the <code>text</code> (or <code>textvariable</code>) string.  Labels can also 
automatically wrap your text into multiple lines via the <code>wraplength</code> option,
which specifies the maximum length of a line (in pixels, centimeters, etc.).</p>

<div class=upgrade><p>Multi-line labels are a replacement for the older <code>message</code> widgets in classic Tk.</p></div>

<p>You can also control how the text is justified via the <code>justify</code> option. It
can have the values <code>left</code>, <code>center</code>, or <code>right</code>.  If you have only a single line of text, you
probably want the <code>anchor</code> option instead.</p>





 <a name="button"></a><h2>Button</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/button.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_button.htm">Reference Manual</a></li>
</ul>

<p>A <b>button</b>, unlike a frame or label, is very much there to interact with. Users press a button to perform an action.  Like labels, they can display text or images, but accept additional options to change their behavior.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_button_all.png' alt='screen shot'><br />
Button widgets.</p>


<div class=python><p>Buttons are created using the <code><b>ttk.Button</b></code> class:</p>
		<pre>button = ttk.Button(<em>parent</em>, text='Okay', command=submitForm)</pre></div>
<div class=tcl><p>Buttons are created using the <code><b>ttk::button</b></code> command. Typically, their contents and command callback are specified at the same time:</p>
	<pre>ttk::button .button -text "Okay" -command "submitForm"</pre></div>
<div class=ruby><p>Buttons are created using the <code><b>Tk::Tile::Button</b></code> class. Typically their contents and command callback are specified at the same time:</p>
	<pre>button = Tk::Tile::Button.new(<em>parent</em>) {text 'Okay'; command 'submitForm'}</pre></div>
<div class=perl><p>Buttons are created using the <code><b>new_ttk__button</b></code> method, a.k.a. <code><b>Tkx::ttk__button()</b></code>. 
	Typically, their contents and command callback are specified at the same time:</p><pre>$button = $<em>parent</em>->new_ttk__button(-text => "Okay", -command => sub {submitForm();});</pre></div>
<p>Typically, their contents and command callback are specified at the same time. As with other widgets, buttons can take several different configuration options, including the standard <code>style</code> option,
which can alter their appearance and behavior.</p>


<h4>Text or Image</h4>

<p>Buttons take the same <code>text</code>, <code>textvariable</code> (rarely used), <code>image</code>, and <code>compound</code>
configuration options as labels. These control whether the button displays text and/or an image.</p>

<p>Buttons have a <code>default</code> configuration option. If specified as <code>active</code>, this tells Tk that the 
button is the default button in the user interface; otherwise it is <code>normal</code>. Default buttons are invoked
if users hit the Return or Enter key).  Some platforms and styles will draw this default button with
a different border or highlight.  Note that setting this option doesn't create an event binding that will make the Return or Enter key
activate the button; that you have to do yourself.</p>


<h4>The Command Callback</h4>

<p>The <code>command</code> option connects the button's action and your application.
When a user presses the button, the script provided by the option is evaluated by the interpreter.</p>

<p>You can also ask the button to invoke the command callback from your application.  That way, you don't
need to repeat the command to be invoked several times in your program. If you change the command attached to the
button, you don't need to change it elsewhere too. Sounds like a useful way to add that event binding on our default
button, doesn't it?</p>

<div class=python><pre>action = ttk.Button(root, text="Action", default="active", command=myaction)
root.bind('&lt;Return&gt;', lambda e: action.invoke())</pre></div>
<div class=tcl><pre>ttk::button .action -text "Action" -default active -command myaction
bind . &lt;Return&gt; ".action invoke"</pre></div>
<div class=ruby><pre>action = Tk::Tile::Button.new(root) {text "Action"; default "active"; command {myaction}}
root.bind("Return", proc{action.invoke()})</pre></div>
<div class=perl><pre>$action = $mw->new_ttk__button(-text => "Action", -default => "active", -command => sub {myaction();});
Tkx::bind(".", "&lt;Return&gt;", sub{$action->invoke();});</pre></div>

<div class=tip><p>Standard behavior for dialog boxes and many other windows on most platforms is to set up a binding on
  the window for the Return key (<code>&lt;Return&gt;</code> or <code>&lt;Key-Return&gt;</code>) to invoke the active button if it exists,
  as we've done here. If there is a "Close" or "Cancel" button, create a binding to the Escape key (<code>&lt;Key-Escape&gt;</code>).
  On macOS, you should additionally bind the Enter key on the keyboard (<code>&lt;KP_Enter&gt;</code>) to the active
  button, and Command-period (<code>&lt;Command-.&gt;</code>) to the close or cancel button.</p></div>

<h4>Button State</h4>

<p>Buttons and many other widgets start off in a normal state. A button will respond to mouse movements, can be pressed, and
will invoke its command callback. Buttons can also be put into
a disabled state, where the button is greyed out, does not respond to mouse movements, and cannot be pressed.  
Your program would disable the button when its command is not applicable at a given point in time.</p>

<p>All themed widgets maintain an internal state, represented as a series of binary flags.  Each flag can either be set (on) or cleared (off).
You can set or clear these different flags, and check the current setting using the <code>state</code> and <code>instate</code> methods.  
Buttons make use of the <code>disabled</code> flag to control whether or not users can press the button.  For example:</p>


<div class=python><pre>
b.state(['disabled'])          <em># set the disabled flag</em>
b.state(['!disabled'])         <em># clear the disabled flag</em>
b.instate(['disabled'])        <em># true if disabled, else false</em>
b.instate(['!disabled'])       <em># true if not disabled, else false</em>
b.instate(['!disabled'], cmd)  <em># execute 'cmd' if not disabled</em>
</pre>
<div class=tip><p>Note that these commands accept an <b>array</b> of state flags as their argument.</p></div>
</div>
<div class=tcl>
<pre>
.b state disabled            ;<em># set the disabled flag</em>
.b state !disabled           ;<em># clear the disabled flag</em>
.b instate disabled          ;<em># 1 if disabled, else 0</em>
.b instate !disabled         ;<em># 1 if not disabled, else 0</em>
.b instate !disabled {mycmd} ;<em># execute 'mycmd' if not disabled</em>
</pre>
</div>
<div class=ruby>
<pre>
b.state('disabled')            ;<em># set the disabled flag</em>
b.state('!disabled')           ;<em># clear the disabled flag</em>
b.instate('disabled')          ;<em># true if disabled, else false</em>
b.instate('!disabled')         ;<em># true if not disabled, else false</em>
b.instate('!disabled', 'cmd')  ;<em># execute 'cmd' if not disabled</em>
</pre>
</div>
<div class=perl>
<pre>
$b->state("disabled");                  <em># set the disabled flag</em>
$b->state("!disabled");                 <em># clear the disabled flag</em>
$b->instate("disabled");                <em># 1 if disabled, else 0</em>
$b->instate("!disabled");               <em># 1 if not disabled, else 0</em>
$b->instate("!disabled", sub {mycmd});  <em># execute 'mycmd' if not disabled</em>
</pre>
</div>

<p>The full list of state flags available to themed widgets is: <code>active</code>, <code>disabled</code>, <code>focus</code>, <code>pressed</code>, <code>selected</code>,
<code>background</code>, <code>readonly</code>, <code>alternate</code>, and <code>invalid</code>.  These are described in the
<a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_widget.htm">themed widget reference</a>. While all widgets have the same set of state flags, not all states
are meaningful for all widgets.  It's also possible to get fancy in the <code>state</code> and <code>instate</code> methods
and specify multiple state flags at the same time.
</p>

<div class=upgrade><p>The <code>state</code> and <code>instate</code> methods replace the older <code>state</code> configuration option (which took the values <code>normal</code> or
<code>disabled</code>).  
</p><p>
That configuration option is actually still available for themed widgets in Tk 8.5, but "write-only," which means that
changing the option calls the appropriate <code>state</code> command.  It's mainly intended as a convenience so you can
specify a widget should be disabled when you first create it. However, any changes made using the new <code>state</code>
command do not update the configuration option.  To avoid confusion, you should update your code to 
use the new state flags for all themed widgets.</p></div>	



 
 <a name="checkbutton"></a><h2>Checkbutton</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/checkbutton.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_checkbutton.htm">Reference Manual</a></li>
</ul>

<p>A <b>checkbutton</b> widget is like a regular button that also holds a binary value of some kind (i.e., a toggle).  
When pressed, a checkbutton flips the toggle and then invokes its callback.
Checkbutton widgets are frequently used to allow users to turn an option on or off.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_checkbutton_all.png' alt='screen shot'><br />
Checkbutton widgets.</p>


<div class=python><p>Checkbuttons are created using the <code><b>ttk.Checkbutton</b></code> class. Typically, their contents and behavior are specified at the same time:</p>
		<pre>measureSystem = StringVar()
check = ttk.Checkbutton(<em>parent</em>, text='Use Metric', 
	    command=metricChanged, variable=measureSystem,
	    onvalue='metric', offvalue='imperial')</pre></div>
<div class=tcl><p>Checkbuttons are created using the <code><b>ttk::checkbutton</b></code> command. Typically, their contents and behavior are specified at the same time:</p>
	<pre>ttk::checkbutton .check -text "Use Metric" -command "metricChanged" 
	    -variable measuresystem -onvalue metric -offvalue imperial</pre></div>
<div class=ruby><p>Checkbuttons are created using the <code><b>Tk::Tile::CheckButton</b></code> class. Typically, their contents and behavior are specified at the same time:</p>
	<pre>$measureSystem = TkVariable.new
check = Tk::Tile::CheckButton.new(<em>parent</em>) {text 'Use Metric'; 
	    command 'metricChanged'; variable $measureSystem; 
	    onvalue 'metric'; offvalue 'imperial'}</pre></div>
<div class=perl><p>Checkbuttons are created using the <code><b>new_ttk__checkbutton</b></code> method, a.k.a. <code><b>Tkx::ttk__checkbutton</b></code>.
Typically, their contents and behavior are specified at the same time:</p>
	<pre>$check = $<em>parent</em>->new_ttk__checkbutton(-text => "Use Metric", -command => sub {metricChanged},
	    -variable => \$measuresystem, -onvalue => "metric", -offvalue => "imperial");</pre></div>

<p>Checkbuttons use many of the same options as regular buttons but add a few more.  The <code>text</code>, <code>textvariable</code>,
<code>image</code>, and <code>compound</code> configuration options control the display of the label (next to the checkbox itself). 
Similarly, the <code>command</code> option lets you specify a command to be called every time a user toggles the checkbutton; and the 
<code>invoke</code> method will also execute the same command.
The <code>state</code> and <code>instate</code> methods allow you to manipulate the <code>disabled</code> state flag to enable or disable the checkbutton.  </p>

<h4>Widget Value</h4>

<p>Unlike regular buttons, checkbuttons also hold a value.  We've seen before how the <code>textvariable</code> option can link
the label of a widget to a variable in your program. The <code>variable</code> option for checkbuttons behaves similarly, except
it links a variable to current value of the widget. The variable is updated whenever the widget is toggled.  By default, 
checkbuttons use a value of <code>1</code> when the widget is checked, and <code>0</code> when not checked. These can be changed to 
something else using the <code>onvalue</code> and <code>offvalue</code> options.</p>

<p>A checkbutton doesn't automatically set (or create) the linked variable. Therefore, your program needs to initialize it 
to the appropriate starting value.</p>

<p>What happens when the linked variable contains neither the <code>onvalue</code> or the <code>offvalue</code> (or even doesn't exist)?  In that case,
the checkbutton is put into a special "tristate" or indeterminate mode. When in this mode, the checkbox might display a single dash, instead of 
being empty or holding a checkmark.  Internally, the state flag <code>alternate</code> is set, which you can inspect
via the <code>instate</code> method:</p>

<div class=python><pre>check.instate(['alternate'])</pre></div>
<div class=tcl><pre>.check instate alternate</pre></div>
<div class=ruby><pre>check.instate('alternate')</pre></div>
<div class=perl><pre>$check->instate("alternate")</pre></div>

<div class=python>
<p>While we've been using an instance of the <code>StringVar</code> class, Tkinter provides other
variable classes that can hold booleans, integers, or floating-point numbers. You can always
use a <code>StringVar</code> (because the Tcl API that Tkinter uses is string-based) but can choose one of the others if 
the data that will be stored in it fits the type. All are subclasses of the base class <code>Variable</code>.
</p><p>
We saw in the feet to meters example that you can call the <code>get</code> method of a <code>Variable</code> to retrieve its value or
the <code>set</code> method to provide a new value. You can also supply an initial value when you instantiate it.</p>
<pre>
s = StringVar(value="abc")   <em># default value is ''</em>
b = BooleanVar(value=True)   <em># default is False</em>
i = IntVar(value=10)         <em># default is 0</em>
d = DoubleVar(value=10.5)    <em># default is 0.0</em>
</pre>
</div>




 <a name="radiobutton"></a><h2>Radiobutton</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/radiobutton.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_radiobutton.htm">Reference Manual</a></li>
</ul>

<p>A <b>radiobutton</b> widget lets you choose between one of several mutually exclusive choices.
Unlike a checkbutton, they are not limited to just two options.  Radiobuttons are always used 
together in a set, where multiple radiobutton widgets are tied to a single choice or preference.
They are appropriate to use when the number of options is relatively small, e.g., 3-5.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_radiobutton_all.png' alt='screen shot'><br />
Radiobutton widgets.</p>


<div class=python><p>Radiobuttons are created using the <code><b>ttk.Radiobutton</b></code> class. Typically, you'll create and initialize several of them at once:</p>
	<pre>phone = StringVar()
home = ttk.Radiobutton(<em>parent</em>, text='Home', variable=phone, value='home')
office = ttk.Radiobutton(<em>parent</em>, text='Office', variable=phone, value='office')
cell = ttk.Radiobutton(<em>parent</em>, text='Mobile', variable=phone, value='cell')</pre></div>
<div class=tcl><p>Radiobuttons are created using the <code><b>ttk::radiobutton</b></code> command. Typically, you'll create and initialize several of them at once:</p>
	<pre>ttk::radiobutton .home -text "Home" -variable phone -value home
ttk::radiobutton .office -text "Office" -variable phone -value office
ttk::radiobutton .cell -text "Mobile" -variable phone -value cell</pre></div>
<div class=ruby><p>Radiobuttons are created using the <code><b>Tk::Tile::RadioButton</b></code> class. Typically, you'll create and initialize several of them at once:</p>
	<pre>$phone = TkVariable.new
home = Tk::Tile::RadioButton.new(<em>parent</em>) {text 'Home'; variable $phone; value 'home'}
office = Tk::Tile::RadioButton.new(<em>parent</em>) {text 'Office'; variable $phone; value 'office'}
cell = Tk::Tile::RadioButton.new(<em>parent</em>) {text 'Mobile'; variable $phone; value 'cell'}</pre></div>
<div class=perl><p>Radiobuttons are created using the <code><b>new_ttk__radiobutton</b></code> method, a.k.a. <code><b>Tkx::ttk__radiobutton</b></code>. Typically, you'll create and initialize several of them at once:</p>
	<pre>$home = $<em>parent</em>->new_ttk__radiobutton(-text => "Home", -variable => \$phone, -value => "home");
$office = $<em>parent</em>->new_ttk__radiobutton(-text => "Office", -variable => \$phone, -value => "office");
$cell = $<em>parent</em>->new_ttk__radiobutton(-text => "Mobile", -variable => \$phone, -value => "cell");</pre></div>

<p>Radiobuttons share most of the same configuration options as checkbuttons.  One exception is that the 
<code>onvalue</code> and <code>offvalue</code> options are replaced with a single <code>value</code> option.
Each radiobutton in the set will have the same linked variable, but a different value. 
When the variable holds the matching value, that radiobutton will visually indicate it is selected. 
If it doesn't match, the radiobutton will be unselected.  
If the linked variable doesn't exist, or you don't specify one with the <code>variable</code> option,
radiobuttons also display as "tristate" or indeterminate. This can be checked via the <code>alternate</code> state flag.</p>



 <a name="entry"></a><h2>Entry</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/entry.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_entry.htm">Reference Manual</a></li>
</ul>

<p>An <b>entry</b> widget presents users with a single line text field where they can
type in a string value.  These can be just about anything: a name, a city, a password, social 
security number, etc.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_entry_all.png' alt='screen shot'><br />
Entry widgets.</p>


<div class=python><p>Entries are created using the <code><b>ttk.Entry</b></code> class:</p>
	<pre>username = StringVar()
name = ttk.Entry(<em>parent</em>, textvariable=username)</pre></div>
<div class=tcl><p>Entries are created using the <code><b>ttk::entry</b></code> command:</p>
	<pre>ttk::entry .name -textvariable username</pre></div>
<div class=ruby><p>Entries are created using the <code><b>Tk::Tile::Entry</b></code> class:</p>
	<pre>$username = TkVariable.new
name = Tk::Tile::Entry.new(<em>parent</em>) { textvariable $username }</pre></div>
<div class=perl><p>Entries are created using the <code><b>new_ttk__entry</b></code> method, a.k.a. <code><b>Tkx::ttk__entry</b></code>:</p>
	<pre>$name = $<em>parent</em>->new_ttk__entry(-textvariable => \$username);</pre></div>

<p>A <code>width</code> configuration option may be specified to provide the number of
characters wide the entry should be. This allows you, for example, to display a shorter
entry for a zip or postal code.</p>

<h4>Entry Contents</h4>

<p>We've seen how checkbutton and radiobutton widgets have a value associated with them.
Entries do as well, and that value is usually accessed through a linked variable
specified by the <code>textvariable</code> configuration option. </p>

<div class=tip><p>Unlike the various buttons, entries don't have a text or image beside them to
identify them. Use a separate label widget for that.</p></div>

<p>You can also get or change the value of the entry widget without going
through the linked variable.  The <code>get</code> method returns the current value, and
the <code>delete</code> and <code>insert</code> methods let you change the contents, e.g.</p>

<div class=python><pre>print('current value is %s' % name.get())
name.delete(0,'end')          <em># delete between two indices, 0-based</em>
name.insert(0, 'your name')   <em># insert new text at a given index</em></pre></div>
<div class=tcl><pre>puts "current value is [.name get]"
.name delete 0 end           ; <em># delete between two indices, 0-based</em>
.name insert 0 "your name"   ; <em># insert new text at a given index</em></pre></div>
<div class=ruby><pre>puts ("current value is #{name.get}")
name.delete(0, end)          ; <em># delete between two indices, 0-based</em>
name.insert(0, 'your name')  ; <em># insert new text at a given index</em></pre></div>
<div class=perl><pre>print "current value is " . $name->get;
$name->delete(0, "end");       <em># delete between two indices, 0-based</em>
$name->insert(0, "your name"); <em># insert new text at a given index</em></pre></div>

<h4>Watching for Changes</h4>

<p>Entry widgets don't have a <code>command</code> option to invoke a
callback whenever the entry is changed.  To watch for changes, you should watch
for changes to the linked variable. See also "Validation", below.</p>

<div class=python>
<pre>
def it_has_been_written(*args):
    ...
username.trace_add("write", it_has_been_written)
</pre>

</div>

<div class=tcl><pre>proc it_has_been_written {args} {...}
trace add variable username write it_has_been_written
</pre></div>
<div class=ruby><pre>def it_has_been_written()
  ...
end
$username.trace("write", proc{it_has_been_written})
</pre></div>
<div class=perl><pre>
sub it_has_been_written {...}
Tkx::trace("add", "variable", \$username, "write", sub{it_has_been_written});
</pre>
</div>

<p>You'll be fine if you stick with simple uses of <code>trace_add</code> like that shown above. You might want to know that
this is a small part of a much more complex system for observing variables and invoking callbacks when they are read, written,
or deleted. You can trigger multiple callbacks, add or delete them (<code>trace_remove</code>), and introspect 
them (<code>trace_info</code>).</p>

<div class=upgrade><p>These methods also replace a now-deprecated set of older methods (<code>trace</code>, <code>trace_variable</code>, <code>trace_vdelete</code>,
and <code>trace_vinfo</code>) that should not be used.</p></div>

<div class=python>Tkinter allows you to watch for changes on a <code>StringVar</code> (or any subclass of <code>Variable</code>).
  Both the older and newer tracing tools are a very thin (and not terribly Pythonic) front end to Tcl's <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TclCmd/trace.htm"><code>trace</code></a> command.</p>

</div>


<h4>Passwords</h4>

<p>Entries can be used for passwords, where the actual contents are displayed as a bullet or other symbol.
To do this, set the <code>show</code> configuration option to the character you'd like to display.</p>

<div class=python><pre>passwd = ttk.Entry(<em>parent</em>, textvariable=password, show="*")</pre></div>
<div class=tcl><pre>ttk::entry .passwd -textvariable password -show "*"</pre></div>
<div class=ruby><pre>passwd = Tk::Tile::Entry.new(<em>parent</em>) { textvariable $password; show "*"}</pre></div>
<div class=perl><pre>$passwd = $<em>parent</em>->new_ttk__entry(-textvariable => \$password, show => "*");</pre></div>

<h4>Widget States</h4>

<p>Like the various buttons, entries can also be put into a disabled state via the <code>state</code> command (and queried
with <code>instate</code>).  Entries can also use the state flag <code>readonly</code>; if set, users cannot change the entry,
though they can still select the text in it (and copy it to the clipboard).  There is also an <code>invalid</code>
state, set if the entry widget fails validation, which leads us to...</p>

<h3>Validation</h3>

<p>Users can type any text they like into an entry widget. However, if you'd like to restrict what they can type into the
  entry, you can do so with <em>validation</em>. For example, an entry might only accept an integer or a valid zip or
  postal code.</p>
  
<p>Your program can specify what makes an entry valid or invalid, as well as when to check its validity. As we'll see soon, the two 
  are related. We'll start with a simple example, an entry that can only hold an integer up to five digits long. </p>
  
<p>The validation criteria is specified via an entry's <code>validatecommand</code> configuration option. You supply a piece of
  code whose job is to validate the entry. It functions like a widget callback or event binding, except that it returns
  a value (whether or not the entry is valid). We'll arrange to validate the entry on any keystroke, which 
  is specified by providing a value of <code>key</code> to the <code>validate</code> configuration option.</p> 
  
<div class=python><pre>import re
def check_num(newval):
    return re.match('^[0-9]*$', newval) is not None and len(newval) &lt;= 5
check_num_wrapper = (root.register(check_num), '%P')

num = StringVar()
e = ttk.Entry(root, textvariable=num, validate='key', validatecommand=check_num_wrapper)
e.grid(column=0, row=0, sticky='we')
</pre></div>
<div class=tcl><pre>proc check_num {newval} {
   return [expr {[regexp {^[0-9]*$} $newval] && [string length $newval]&lt;=5}]
}
ttk::entry .e -textvariable num -validate key -validatecommand "check_num %P"
grid .e -column 0 -row 0 -sticky we
</pre></div>
<div class=ruby><pre>def check_num(newval)
  return /^[0-9]*$/.match(newval) && newval.length &lt;= 5
end

num = TkVariable.new
e = Tk::Tile::Entry.new(root) {textvariable num; validate 'key'; validatecommand [proc{|v| check_num(v)}, '%P']}
e.grid :column => 0, :row => 0, :sticky => 'we'
</pre></div>
<div class=perl><pre>sub check_num {
   my ($newval) = @_;
   return $newval =~ /^[0-9]*$/ && length($newval) &lt;= 5 ? 1 : 0;
}

$e = $mw->new_ttk__entry(-textvariable => \$num, -validate => 'key', -validatecommand => [\&check_num, Tkx::Ev('%P')]);
$e->g_grid(-column => 0, -row => 0, -sticky => 'we');
</pre></div>

  
<p>A few things are worth noting. First, as with event bindings, we can access more information about the conditions that 
  triggered the validation via <em>percent substitutions.</em> We used one of these here:
  <code>%P</code> is the new value of the entry <em>if</em> the validation passes. We'll use a simple regular expression and a length
  check to determine if the change is valid. To reject the change, our validation command can 
  return a false value, and the entry will remain unchanged.</p>

<div class=python>
<p>Taking advantage of these percent substitutions requires a bit of gymnastics. You'll recall that Tkinter abstracts away percent 
  substitutions in event binding callbacks. There, all of the event parameters are wrapped into an event object which is always passed to the
  callback. There's not an equivalent abstraction for validation callbacks. Instead, we have to choose which percent substitutions 
  we're interested in. The <code>register</code> method (which can be called on any widget, not just 
  <code>root</code>) creates a Tcl procedure which will call our Python function. The percent substitutions we've chosen will be
  passed to it as parameters.</p>
</div> 

<p>Let's extend our example so that the entry will accept a US zip code, formatted as "#####" or "#####-####" ("#" can be any digit).
We'll still do some validation on each keystroke (only allowing entry of numbers or a hyphen). However, We can no longer fully validate 
the entry on every keystroke; if they've just typed the first digit, it's not valid yet. So full validation will
only happen when the entry loses focus (e.g., a user tabs away from it). Tk refers to this as <em>revalidation</em>, in contrast
  with <em>prevalidation</em> (accepting changes on each keystroke).</p>

<p>How should we respond to errors? Let's add a message reminding users of the format. It will appear if they type a wrong key or tab away
from the entry when it's not holding a valid zip code. We'll remove the message when they return to the entry or type a valid key.
We'll also add a (dummy) button to "process" the zip code, which will be disabled 
unless the zip entry is valid. Finally, we'll also add a "name" entry so you can tab away from the zip entry.</p>

<div class=python><pre>import re
errmsg = StringVar()
formatmsg = "Zip should be ##### or #####-####"

def check_zip(newval, op):
    errmsg.set('')
    valid = re.match('^[0-9]{5}(\-[0-9]{4})?$', newval) is not None
    btn.state(['!disabled'] if valid else ['disabled'])
    if op=='key':
        ok_so_far = re.match('^[0-9\-]*$', newval) is not None and len(newval) &lt;= 10
        if not ok_so_far:
            errmsg.set(formatmsg)
        return ok_so_far
    elif op=='focusout':
        if not valid:
            errmsg.set(formatmsg)
    return valid
check_zip_wrapper = (root.register(check_zip), '%P', '%V')

zip = StringVar()
f = ttk.Frame(root)
f.grid(column=0, row=0)
ttk.Label(f, text='Name:').grid(column=0, row=0, padx=5, pady=5)
ttk.Entry(f).grid(column=1, row=0, padx=5, pady=5)
ttk.Label(f, text='Zip:').grid(column=0, row=1, padx=5, pady=5)
e = ttk.Entry(f, textvariable=zip, validate='all', validatecommand=check_zip_wrapper)
e.grid(column=1, row=1, padx=5, pady=5)
btn = ttk.Button(f, text="Process")
btn.grid(column=2, row=1, padx=5, pady=5)
btn.state(['disabled'])
msg = ttk.Label(f, font='TkSmallCaptionFont', foreground='red', textvariable=errmsg)
msg.grid(column=1, row=2, padx=5, pady=5, sticky='w')
</pre></div>
<div class=tcl><pre>set ::formatmsg "Zip should be ##### or #####-####"
proc check_zip {newval op} {
    set ::errmsg ""
    set valid [expr {[regexp {^[0-9]{5}(\-[0-9]{4})?$} $newval]}]
    .f.btn state [expr {$valid ? "!disabled" : "disabled"}]
    if {$op=="key"} {
        set ok_so_far [expr {[regexp {^[0-9\-]*$} $newval] && [string length $newval]&lt;=10}]
        if {!$ok_so_far} {set ::errmsg $::formatmsg }
        return $ok_so_far
    } elseif {$op=="focusout"} {
        if {!$valid} {set ::errmsg $::formatmsg}
    }
    return $valid
}

grid [ttk::frame .f] -column 0 -row 0
grid [ttk::label .f.l1 -text "Name:"] -column 0 -row 0 -padx 5 -pady 5
grid [ttk::entry .f.e1] -column 1 -row 0 -padx 5 -pady 5
grid [ttk::label .f.l -text "Zip:"] -column 0 -row 1 -padx 5 -pady 5
ttk::entry .f.e -textvariable zip -validate all -validatecommand "check_zip %P %V"
grid .f.e -column 1 -row 1 -padx 5 -pady 5
grid [ttk::button .f.btn -text Process] -column 2 -row 1 -padx 5 -pady 5
.f.btn state disabled
ttk::label .f.msg -font TkSmallCaptionFont -foreground red -textvariable errmsg
grid .f.msg -column 1 -row 2 -padx 5 -pady 5 -sticky w
</pre></div>
<div class=ruby><pre>$errmsg = TkVariable.new
$formatmsg = "Zip should be ##### or #####-####"
def check_zip(newval, op)
  $errmsg.value = ''
  valid = /^[0-9]{5}(\-[0-9]{4})?$/.match(newval)
  $btn.state(valid ? '!disabled' : 'disabled')
  if op=='key'
    ok_so_far = /^[0-9\-]*$/.match(newval) && newval.length &lt;= 10
    $errmsg.value = $formatmsg if not ok_so_far
    return ok_so_far
  elsif op=='focusout'
    $errmsg.value = $formatmsg if not valid
  end
  return valid
end

zip = TkVariable.new
f = Tk::Tile::Frame.new(root)
f.grid :column => 0, :row =>0
Tk::Tile::Label.new(f) {text 'Name:'}.grid :column => 0, :row => 0, :padx => 5, :pady => 5
Tk::Tile::Entry.new(f).grid :column => 1, :row => 0, :padx => 5, :pady => 5
Tk::Tile::Label.new(f) {text 'Zip:'}.grid :column => 0, :row => 1, :padx => 5, :pady => 5
e = Tk::Tile::Entry.new(f) {textvariable zip; validate 'all'; validatecommand [proc{|v,o| check_zip(v,o)}, '%P', '%V']}
e.grid :column => 1, :row => 1, :padx => 5, :pady => 5
$btn = Tk::Tile::Button.new(f) {text 'Process'}
$btn.grid :column => 2, :row => 1, :padx => 5, :pady => 5
$btn.state 'disabled'
msg = Tk::Tile::Label.new(f) {font 'TkSmallCaptionFont'; foreground 'red'; textvariable $errmsg}
msg.grid :column => 1, :row => 2, :padx => 5, :pady => 5, :sticky => 'w'
</pre></div>
<div class=perl><pre>our $errmsg = "";
our $formatmsg = "Zip should be ##### or #####-####";

sub check_zip {
   my ($newval,$op) = @_;
   $errmsg = "";
   $valid = $newval =~ /^[0-9]{5}(\-[0-9]{4})?$/;
   $btn->state($valid ? "!disabled" : "disabled");
   if ($op eq "key") {
      $ok_so_far = $newval =~ /^[0-9\-]*$/ && length($newval) &lt;= 10;
      $errmsg = $formatmsg if not $ok_so_far;
      return $ok_so_far ? 1 : 0;        
   } elsif ($op eq "focusout") {
      $errmsg = $formatmsg if not $valid;
   }
   return $valid ? 1 : 0;
}

$f = $mw->new_ttk__frame();
$f->g_grid(-column => 0, -row => 0);
$f->new_ttk__label(-text => 'Name:')->g_grid(-column => 0, -row => 0, -padx => 5, -pady => 5);
$f->new_ttk__entry()->g_grid(-column => 1, -row => 0, -padx => 5, -pady => 5);
$f->new_ttk__label(-text => 'Zip:')->g_grid(-column => 0, -row => 1, -padx => 5, -pady => 5);
$e = $f->new_ttk__entry(-textvariable => \$zip, -validate => 'all', -validatecommand => [\&check_zip, Tkx::Ev('%P', '%V')]);
$e->g_grid(-column => 1, -row => 1);
our $btn = $f->new_ttk__button(-text => 'Process:');
$btn->g_grid(-column => 2, -row => 1, -padx => 5, -pady => 5);
$btn->state('disabled');
$msg = $f->new_ttk__label(-font => 'TkSmallCaptionFont', -foreground => 'red', -textvariable => \$errmsg);
$msg->g_grid(-column => 1, -row => 2, -padx => 5, -pady => 5, -sticky => 'w');
</pre></div>

<p>Notice that the <code>validate</code> configuration option has been changed from <code>key</code> to <code>all</code>.
That arranges for the <code>validatecommand</code> callback to be invoked on not only keystrokes but other triggers.
The trigger is passed to the callback using the <code>%V</code> percent substitution.
The callback differentiated between <code>key</code> and <code>focusout</code> triggers (you can also check for <code>focusin</code>).</p>

<div class=fyi><p>There's a few more things to know about validation. First, if your <code>validatecommand</code> ever generates an error 
(or doesn't return a boolean), validation will be disabled for that widget. Your callback can modify the entry, e.g.,
change its textvariable. You can ask the widget to validate at any time by calling
it's <code>validate</code> method, which returns true if validation passes (the <code>%V</code> substitution is set to <code>forced</code>).
</p><p>
There is an <code>invalidcommand</code> configuration option (which works like <code>validatecommand</code>) that is called whenever 
validation fails. You can use it to accomplish nasty things like forcing the focus back on the widget that didn't validate. 
In practice, it's rarely used. As mentioned earlier, the entry's <code>invalid</code> state flag (which can be checked via
the <code>instate invalid</code> method) is automatically updated as validation succeeds or fails.
</p><p>
Other percent substitutions allow you to get the entry's contents prior to editing (<code>%s</code>), differentiate between insert and delete (<code>%d</code>), where an insert or delete occurs (<code>%i</code>), what is being inserted or deleted (<code>%S</code>), the
current setting of the <code>validate</code> option (<code>%v</code>) and the name of the widget (<code>%W</code>).
</p></div>




 <a name="combobox"></a><h2>Combobox</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/combobox.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_combobox.htm">Reference Manual</a></li>
</ul>

<p>A <b>combobox</b> widget combines an entry with a list of choices.  This lets users
either choose from a set of values you've provided (e.g., typical settings), but also put in their
own value (e.g., for less common cases).</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_combobox_all.png' alt='screen shot'><br />
Combobox widgets.</p>


<div class=python><p>Comboboxes are created using the <code><b>ttk.Combobox</b></code> class:</p>
		<pre>countryvar = StringVar()
country = ttk.Combobox(<em>parent</em>, textvariable=countryvar)</pre></div>
<div class=tcl><p>Comboboxes are created using the <code><b>ttk::combobox</b></code> command:</p>
	<pre>ttk::combobox .country -textvariable country</pre></div>
<div class=ruby><p>Comboboxes are created using the <code><b>Tk::Tile::Combobox</b></code> class:</p>
	<pre>$countryvar = TkVariable.new
country = Tk::Tile::Combobox.new(<em>parent</em>) { textvariable $countryvar }</pre></div>
<div class=perl><p>Comboboxes are created using the <code><b>new_ttk__combobox</b></code> method, a.k.a. <code><b>Tkx::ttk__combobox</b></code>:</p>
	<pre>$country = $<em>parent</em>->new_ttk__combobox(-textvariable => \$countryvar);</pre></div>

<p>Like entries, the <code>textvariable</code> option links a variable in your program to the
current value of the combobox.  As with other widgets, you should initialize
the linked variable in your own code. </p>

<p>A combobox will generate a <code>&lt;&lt;ComboboxSelected&gt;&gt;</code> virtual event that you can bind to whenever its value changes.
  (You could also trace changes on the <code>textvariable</code>, as we've seen in the previous few widgets we covered.
  Binding to the event is more straightforward, and so tends to be our preferred choice.)</p>

<div class=python><pre>country.bind('&lt;&lt;ComboboxSelected&gt;&gt;', <em>function</em>)</pre></div>
<div class=tcl><pre>bind .country &lt;&lt;ComboboxSelected&gt;&gt; { <em>script</em> }</pre></div>
<div class=ruby><pre>country.bind("&lt;ComboboxSelected&gt;") { <em>script</em> }</pre></div>
<div class=perl><pre>$country->g_bind("&lt;&lt;ComboboxSelected&gt;&gt;", sub { <em>script</em> });</pre></div>

<h4>Predefined Values</h4>

<p>You can provide a list of values that users can choose from using the <code>values</code> configuration
option:</p>

<div class=python><pre>country['values'] = ('USA', 'Canada', 'Australia')</pre></div>
<div class=tcl><pre>.country configure -values [list USA Canada Australia]</pre></div>
<div class=ruby><pre>country['values'] = [ 'USA', 'Canada', 'Australia'] </pre></div>
<div class=perl><pre>$country->configure(-values => "USA Canada Australia");</pre></div>

<p>If set, the <code>readonly</code> state flag will restrict users to making choices only from the list
of predefined values, but not be able to enter their own (though if the current value of the
combobox is not in the list, it won't be changed).  </p>

<div class=python><pre>country.state(["readonly"])</pre></div>
<div class=tcl><pre>.country state readonly</pre></div>
<div class=ruby><pre>country.state('readonly')</pre></div>
<div class=perl><pre>$country->state("readonly");</pre></div>

<div class=tip><p>If you're using the combobox in <code>readonly</code> mode, I'd recommend
that when the value changes (i.e., on a <code>&lt;&lt;ComboboxSelected&gt;&gt;</code> event), that
you call the <code>selection_clear</code> method. It looks a bit odd visually 
without doing that.</p></div>


<p>You can also get the current value using the <code>get</code> method, and change the current value using the <code>set</code> 
method (which takes a single argument, the new value).</p>

<p>As a complement to the <code>get</code> and <code>set</code> methods, you can also use the <code>current</code> method to determine
which item in the predefined values list is selected. Call <code>current</code> with no arguments; it will
return a 0-based index into the list, or -1 if the current value is not in the list. You can select
an item in the list by calling <code>current</code> with a single 0-based index argument.</p>

<div class=tip><p>Want to associate some other value with each item in the list so that your program can use one value internally,
but it gets displayed in the combobox as something else?  You'll want to have a look at
the section entitled "Keeping Extra Item Data" when we get to the discussion of listboxes in a couple of 
chapters from now.</p></div>



<h1>The Grid Geometry Manager</h1>

<p>We'll take a bit of a break from talking about different widgets (what to put onscreen) and
focus instead on geometry management (where to put those widgets).  We introduced the general idea of 
geometry management in the "Tk Concepts" chapter. Here, we focus on one specific geometry manager: <code>grid</code>.</p>

<p>As we've seen, <code>grid</code> lets you layout widgets in columns and rows.  If you're familiar with using
HTML tables to do layout, you'll feel right at home here.  This chapter illustrates the various ways
you can tweak grid to give you all the control you need for your user interface.</p>

<p>Grid is one of several geometry managers available in Tk, but its mix of power, flexibility, and ease of use make it the best choice
for general use.   Its constraint model is a natural fit with today's layouts that rely on the alignment of widgets.
There are other geometry managers in Tk: <code>pack</code> is also quite powerful, but harder to
use and understand, while <code>place</code> gives you complete control of positioning each element. 
Even widgets like paned windows, notebooks, canvas, and text that we'll explore later can act as geometry managers.</p>


<div class=upgrade><p>It's worth noting that <code>grid</code> was first introduced to Tk in 1996, several years after Tk became popular, and it took a while to catch on.
Before that, developers had always used <code>pack</code> to do constraint-based geometry management.  When <code>grid</code> came
out, many developers kept using <code>pack</code>, and you'll still find it used in many Tk programs and documentation.
While there's nothing technically wrong with <code>pack</code>, the algorithm's behavior is often hard to understand.
More importantly, because the order that widgets are packed is significant in determining layout, modifying
existing layouts can be more difficult.  Aligning widgets in different parts of the user interface is also much trickier.
</p><p>
Grid has all the power of pack, produces nicer layouts (that align widgets both horizontally and vertically), and is easier to learn and use.
Because of that, we think grid is the right choice for most developers most of the time.  Start
your new programs using grid, and switch old ones to grid as you're making changes to an existing user interface.</p></div>

<p>The <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/grid.htm">reference documentation for grid</a> provides an
exhaustive description of grid, its behaviors and all options.</p>



 <a name="colsrows"></a><h2>Columns and Rows</h2>

<p>In grid, widgets are assigned a <code>column</code> number and a <code>row</code> number. These indicate each widget's position
relative to other widgets. All widgets in the same column will be above or below each other.
Those in the same row will be to the left or right of each other.</p>

<p>Column and row numbers must be positive integers (i.e., 0, 1, 2, ...). You don't have to start at 0 and can
leave gaps in column and row numbers (e.g., column 1, 2, 10, 11, 12, 20, 21). This is useful
if you plan to add more widgets in the middle of the user interface later.</p>

<p>The width of each column will vary depending on the width of the widgets contained within the column.
  Ditto for the height of each row.  This means when sketching out your user interface and 
dividing it into rows and columns, you don't need to worry about each column or row being
equal width.</p>


 <a name="span"></a><h2>Spanning Multiple Cells</h2>

<p>Widgets can take up more than a single cell in the grid; to do this, we'll use the <code>columnspan</code>
and <code>rowspan</code> options when gridding the widget.  These are analogous to the "colspan" and "rowspan"
attribute of HTML tables. </p>

<p>Here is an example of creating a user interface with multiple widgets, some that take up
more than a single cell.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/gridexample1.png' alt='screen shot'><br />
Gridding multiple widgets.</p>

<div class=python><pre>from tkinter import *
from tkinter import ttk

root = Tk()

content = ttk.Frame(root)
frame = ttk.Frame(content, borderwidth=5, relief="ridge", width=200, height=100)
namelbl = ttk.Label(content, text="Name")
name = ttk.Entry(content)

onevar = BooleanVar(value=True)
twovar = BooleanVar(value=False)
threevar = BooleanVar(value=True)

one = ttk.Checkbutton(content, text="One", variable=onevar, onvalue=True)
two = ttk.Checkbutton(content, text="Two", variable=twovar, onvalue=True)
three = ttk.Checkbutton(content, text="Three", variable=threevar, onvalue=True)
ok = ttk.Button(content, text="Okay")
cancel = ttk.Button(content, text="Cancel")

content.grid(column=0, row=0)
frame.grid(column=0, row=0, columnspan=3, rowspan=2)
namelbl.grid(column=3, row=0, columnspan=2)
name.grid(column=3, row=1, columnspan=2)
one.grid(column=0, row=3)
two.grid(column=1, row=3)
three.grid(column=2, row=3)
ok.grid(column=3, row=3)
cancel.grid(column=4, row=3)

root.mainloop()
</pre></div>

<div class=tcl><pre>
ttk::frame .c
ttk::frame .c.f -borderwidth 5 -relief ridge -width 200 -height 100
ttk::label .c.namelbl -text Name
ttk::entry .c.name
ttk::checkbutton .c.one -text One -variable one -onvalue 1; set one 1
ttk::checkbutton .c.two -text Two -variable two -onvalue 1; set two 0
ttk::checkbutton .c.three -text Three -variable three -onvalue 1; set three 1
ttk::button .c.ok -text Okay
ttk::button .c.cancel -text Cancel

grid .c -column 0 -row 0
grid .c.f -column 0 -row 0 -columnspan 3 -rowspan 2
grid .c.namelbl -column 3 -row 0 -columnspan 2
grid .c.name -column 3 -row 1 -columnspan 2
grid .c.one -column 0 -row 3
grid .c.two -column 1 -row 3
grid .c.three -column 2 -row 3
grid .c.ok -column 3 -row 3
grid .c.cancel -column 4 -row 3</pre></div>
<div class=ruby><pre>
require 'tk'
require 'tkextlib/tile'
root = TkRoot.new

content = Tk::Tile::Frame.new(root)
frame = Tk::Tile::Frame.new(content) {borderwidth 5; relief "ridge"; width 200; height 100}
namelbl = Tk::Tile::Label.new(content) {text "Name"}
name = Tk::Tile::Entry.new(content)
$option_one = TkVariable.new( 1 )
one = Tk::Tile::CheckButton.new(content) {text "One"; variable $option_one; onvalue 1}
$option_two = TkVariable.new( 0 )
two = Tk::Tile::CheckButton.new(content) {text "Two"; variable $option_two; onvalue 1}
$option_three = TkVariable.new( 1 ) 
three = Tk::Tile::CheckButton.new(content) {text "Three"; variable $option_three; onvalue 1}
ok = Tk::Tile::Button.new(content) {text "Okay"}
cancel = Tk::Tile::Button.new(content) {text "Cancel"}

content.grid :column => 0, :row => 0 
frame.grid :column => 0, :row => 0, :columnspan => 3, :rowspan => 2
namelbl.grid :column => 3, :row => 0, :columnspan => 2
name.grid :column => 3, :row => 1, :columnspan => 2
one.grid :column => 0, :row => 3
two.grid :column => 1, :row => 3
three.grid :column => 2, :row => 3
ok.grid :column => 3, :row => 3
cancel.grid :column => 4, :row => 3

Tk.mainloop
</pre></div>
<div class=perl><pre>use Tkx;

my $mw = Tkx::widget->new(".");
my $content = $mw->new_ttk__frame;
my $frame = $content->new_ttk__frame(-borderwidth => 5, -relief => "ridge", -width => 200, -height => 100);
my $namelbl = $content->new_ttk__label(-text => "Name");
my $name = $content->new_ttk__entry;
$option_one = 1; $option_two = 0; $option_three = 1;
my $one = $content->new_ttk__checkbutton(-text => "One", -variable => \$option_one, -onvalue => 1); 
my $two = $content->new_ttk__checkbutton(-text => "Two", -variable => \$option_two, -onvalue => 1);
my $three = $content->new_ttk__checkbutton(-text => "Three", -variable => \$option_three, -onvalue => 1);
my $ok = $content->new_ttk__button(-text => "Okay");
my $cancel = $content->new_ttk__button(-text => "Cancel");

$content->g_grid(-column => 0, -row => 0);
$frame->g_grid(-column => 0, -row => 0, -columnspan => 3, -rowspan => 2);
$namelbl->g_grid(-column => 3, -row => 0, -columnspan => 2);
$name->g_grid(-column => 3, -row => 1, -columnspan => 2);
$one->g_grid(-column => 0, -row => 3);
$two->g_grid(-column => 1, -row => 3);
$three->g_grid(-column => 2, -row => 3);
$ok->g_grid(-column => 3, -row => 3);
$cancel->g_grid(-column => 4, -row => 3);

Tkx::MainLoop;
</pre></div>

 <a name="incell"></a><h2>Layout within the Cell</h2>


<p>Because the width of a column (and height of a row) depends on all the widgets that have been
added to it, the odds are that at least some widgets will have a smaller width or height than
has been allocated for the cell its been placed in.  So the question becomes, where exactly 
should it be put within the cell?</p>

<p>By default, if a cell is larger than the widget contained in it, the widget will be centered
within it, both horizontally and vertically. The master's background will display
in the empty space around it. In the figure below, the widget in the top right is smaller than the
cell allocated to it. The (white) background of the master fills the rest of the cell.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/gridlayout.png' alt='screen shot'><br />
Layout within the cell and the 'sticky' option.</p>

<p>The <code>sticky</code> option can change this default behavior.
Its value is a string of 0 or more of the compass directions <code>nsew</code>, 
specifying which edges of the cell the widget should be "stuck" to.  For example, a
value of <code>n</code> (north) will jam the widget up against the top side, with any extra vertical
space on the bottom; the widget will still be centered horizontally.  A value of <code>nw</code> (north-west)
means the widget will be stuck to the top left corner, with extra space on the bottom and right.</p>

<div class=python>
<div class=tip><p>In Tkinter, you can also specify this as a list containing any of <code>N</code>, <code>S</code>, <code>E</code>, and <code>W</code>.
It's a stylistic choice, and we'll tend to use the list format in this book. 
</p></div>
</div>

<p>Specifying two opposite edges, such as <code>we</code> (west, east) means that the widget will be stretched.
In this case, it will be stuck to both the left and right edge of the cell.  So the widget will then be wider
than its "ideal" size.</p>	

<p>If you want the widget to expand to fill up the entire cell, grid it with a sticky value of <code>nsew</code>
(north, south, east, west), meaning it will stick to every side. This is shown in the bottom left widget in the above figure.</p>

<div class=tip><p>
Most widgets have options that can control how they are displayed if
they are larger than needed.  For example, a label widget has an <code>anchor</code> option that
controls where the label's text will be positioned within the widget's boundaries. The bottom left label 
in the figure above uses the default anchor (<code>w</code>, i.e., left side, vertically centered). 
</p><p>
If you're having trouble getting things to line up the way you want them to,
first make sure you know large the widget is. As we discussed with the
<code>label</code> widget in the previous chapter, changing the widget's background or border can help.
the </p></div>


 <a name="resize"></a><h2>Handling Resize</h2>

<p>If you've tried to resize the example, you'll notice that nothing moves at all, as shown below.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/gridnoresize.png' alt='screen shot'><br />
Resizing the window.</p>

<p>
Even if you took a peek below and added the extra <code>sticky</code> options to our example, you'd still see the
same thing. It looks like <code>sticky</code> may tell Tk <em>how</em> to react if the cell's row or column does resize, 
but doesn't actually say that the row or columns <em>should</em> resize if extra room becomes available.  
Let's fix that. </p>

<p>Every column and row in the grid has a <code>weight</code> option associated with it. This tells <code>grid</code> how much 
the column or row should grow if there is extra room in the master to fill.  By default, the weight of each column or
row is 0, meaning it won't expand to fill any extra space.</p>

<p>For the user interface to resize then, we'll need to specify a positive weight to the columns that
we'd like to expand.  This is done using the <code>columnconfigure</code> and <code>rowconfigure</code> methods of <code>grid</code>.
This weight is relative. If two columns have the same weight, they'll expand at the same rate.
In our example, we'll give the three leftmost columns (holding the checkbuttons) a weight of 3, and the two rightmost columns
a weight of 1. For every one pixel the right columns grow, the left columns will grow by three pixels. So as the window grows
larger, most of the extra space will go to the left side. </p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/gridresize.png' alt='screen shot'><br />
Resizing the window after adding weights.</p>

<p>Both <code>columnconfigure</code> and <code>rowconfigure</code> also take a <code>minsize</code> grid option,
which specifies a minimum size which you really don't want the column or row to shrink beyond.</p>


 <a name="padding"></a><h2>Padding</h2>


<p>Normally, each column or row will be directly adjacent to the next, so that widgets will be
right next to each other.  This is sometimes what you want (think of a listbox and its scrollbar),
but often you want some space between widgets.  In Tk, this is called padding, and there are
several ways you can choose to add it.</p>

<p>We've already actually seen one way, and that is using a widget's own options to add the extra
space around it.  Not all widgets have this, but one that does is a frame; this is useful because
frames are most often used as the master to grid other widgets.  The frame's <code>padding</code>
option lets you specify a bit of extra padding inside the frame, whether the same amount for
each of the four sides or even different for each.</p>

<p>A second way is using the <code>padx</code> and <code>pady</code> grid options when adding the widget.  As you'd
expect, <code>padx</code> puts a bit of extra space to the left and right, while <code>pady</code>
adds extra space top and bottom.  A single value for the option puts the same padding on
both left and right (or top and bottom), while a two-value list lets you put different amounts
on left and right (or top and bottom).  Note that this extra padding is within the grid cell
containing the widget.</p>

<p>If you want to add padding around an entire row or column, the <code>columnconfigure</code> and <code>rowconfigure</code>
methods accept a <code>pad</code> option, which will do this for you.</p>

<p>Let's add the extra sticky, resizing, and padding behavior to our example (additions in bold).</p>

<div class=python><pre>from tkinter import *
from tkinter import ttk

root = Tk()

content = ttk.Frame(root, <b>padding=(3,3,12,12)</b>)
frame = ttk.Frame(content, borderwidth=5, relief="ridge", width=200, height=100)
namelbl = ttk.Label(content, text="Name")
name = ttk.Entry(content)

onevar = BooleanVar()
twovar = BooleanVar()
threevar = BooleanVar()

onevar.set(True)
twovar.set(False)
threevar.set(True)

one = ttk.Checkbutton(content, text="One", variable=onevar, onvalue=True)
two = ttk.Checkbutton(content, text="Two", variable=twovar, onvalue=True)
three = ttk.Checkbutton(content, text="Three", variable=threevar, onvalue=True)
ok = ttk.Button(content, text="Okay")
cancel = ttk.Button(content, text="Cancel")

content.grid(column=0, row=0, <b>sticky=(N, S, E, W)</b>)
frame.grid(column=0, row=0, columnspan=3, rowspan=2, <b>sticky=(N, S, E, W)</b>)
namelbl.grid(column=3, row=0, columnspan=2, <b>sticky=(N, W), padx=5</b>)
name.grid(column=3, row=1, columnspan=2, <b>sticky=(N,E,W),</b> <b>pady=5,</b> <b>padx=5</b>)
one.grid(column=0, row=3)
two.grid(column=1, row=3)
three.grid(column=2, row=3)
ok.grid(column=3, row=3)
cancel.grid(column=4, row=3)

<b>root.columnconfigure(0, weight=1)</b>
<b>root.rowconfigure(0, weight=1)</b>
<b>content.columnconfigure(0, weight=3)</b>
<b>content.columnconfigure(1, weight=3)</b>
<b>content.columnconfigure(2, weight=3)</b>
<b>content.columnconfigure(3, weight=1)</b>
<b>content.columnconfigure(4, weight=1)</b>
<b>content.rowconfigure(1, weight=1)</b>

root.mainloop()</pre></div>

<div class=tcl><pre>
ttk::frame .c <b>-padding "3 3 12 12"</b>
ttk::frame .c.f -borderwidth 5 -relief ridge -width 200 -height 100 
ttk::label .c.namelbl -text Name
ttk::entry .c.name
ttk::checkbutton .c.one -text One -variable one -onvalue 1; set one 1
ttk::checkbutton .c.two -text Two -variable two -onvalue 1; set two 0
ttk::checkbutton .c.three -text Three -variable three -onvalue 1; set three 1
ttk::button .c.ok -text Okay
ttk::button .c.cancel -text Cancel

grid .c -column 0 -row 0 <b>-sticky nsew</b>
grid .c.f -column 0 -row 0 -columnspan 3 -rowspan 2 <b>-sticky nsew</b>
grid .c.namelbl -column 3 -row 0 -columnspan 2 <b>-sticky nw -padx 5</b>
grid .c.name -column 3 -row 1 -columnspan 2 <b>-sticky new -pady 5 -padx 5</b>
grid .c.one -column 0 -row 3
grid .c.two -column 1 -row 3
grid .c.three -column 2 -row 3
grid .c.ok -column 3 -row 3
grid .c.cancel -column 4 -row 3

<b>grid columnconfigure . 0 -weight 1</b>
<b>grid rowconfigure . 0 -weight 1</b>
<b>grid columnconfigure .c 0 -weight 3</b>
<b>grid columnconfigure .c 1 -weight 3</b>
<b>grid columnconfigure .c 2 -weight 3</b>
<b>grid columnconfigure .c 3 -weight 1</b>
<b>grid columnconfigure .c 4 -weight 1</b>
<b>grid rowconfigure .c 1 -weight 1</b>
</pre></div>
<div class=ruby><pre>
require 'tk'
require 'tkextlib/tile'
root = TkRoot.new

content = Tk::Tile::Frame.new(root) <b>{padding "3 3 12 12"}</b>
frame = Tk::Tile::Frame.new(content) {borderwidth 5; relief "ridge"; width 200; height 100}
namelbl = Tk::Tile::Label.new(content) {text "Name"}
name = Tk::Tile::Entry.new(content)
$option_one = TkVariable.new( 1 )
one = Tk::Tile::CheckButton.new(content) {text "One"; variable $option_one; onvalue 1}
$option_two = TkVariable.new( 0 )
two = Tk::Tile::CheckButton.new(content) {text "Two"; variable $option_two; onvalue 1}
$option_three = TkVariable.new( 1 ) 
three = Tk::Tile::CheckButton.new(content) {text "Three"; variable $option_three; onvalue 1}
ok = Tk::Tile::Button.new(content) {text "Okay"}
cancel = Tk::Tile::Button.new(content) {text "Cancel"}

content.grid :column => 0, :row => 0, <b>:sticky => 'nsew'</b>
frame.grid :column => 0, :row => 0, :columnspan => 3, :rowspan => 2, <b>:sticky => 'nsew'</b>
namelbl.grid :column => 3, :row => 0, :columnspan => 2, <b>:sticky => 'nw', :padx => 5</b>
name.grid :column => 3, :row => 1, :columnspan => 2, <b>:sticky => 'new', :pady => 5, :padx => 5</b>
one.grid :column => 0, :row => 3
two.grid :column => 1, :row => 3
three.grid :column => 2, :row => 3
ok.grid :column => 3, :row => 3
cancel.grid :column => 4, :row => 3

<b>TkGrid.columnconfigure( root, 0, :weight => 1 )
TkGrid.rowconfigure( root, 0, :weight => 1 )
TkGrid.columnconfigure( content, 0, :weight => 3 )
TkGrid.columnconfigure( content, 1, :weight => 3 )
TkGrid.columnconfigure( content, 2, :weight => 3 )
TkGrid.columnconfigure( content, 3, :weight => 1 )
TkGrid.columnconfigure( content, 4, :weight => 1 )
TkGrid.rowconfigure( content, 1, :weight => 1)</b>

Tk.mainloop
</pre></div>
<div class=perl><pre>use Tkx;

my $mw = Tkx::widget->new(".");
my $content = $mw->new_ttk__frame(<b>-padding => "3 3 12 12"</b>);
my $frame = $content->new_ttk__frame(-borderwidth => 5, -relief => "ridge", -width => 200, -height => 100);
my $namelbl = $content->new_ttk__label(-text => "Name");
my $name = $content->new_ttk__entry;
$option_one = 1; $option_two = 0; $option_three = 1;
my $one = $content->new_ttk__checkbutton(-text => "One", -variable => \$option_one, -onvalue => 1); 
my $two = $content->new_ttk__checkbutton(-text => "Two", -variable => \$option_two, -onvalue => 1);
my $three = $content->new_ttk__checkbutton(-text => "Three", -variable => \$option_three, -onvalue => 1);
my $ok = $content->new_ttk__button(-text => "Okay");
my $cancel = $content->new_ttk__button(-text => "Cancel");

$content->g_grid(-column => 0, -row => 0, <b>-sticky => "nsew"</b>);
$frame->g_grid(-column => 0, -row => 0, -columnspan => 3, -rowspan => 2, <b>-sticky => "nsew"</b>);
$namelbl->g_grid(-column => 3, -row => 0, -columnspan => 2, <b>-sticky => "nw", -padx => 5</b>);
$name->g_grid(-column => 3, -row => 1, -columnspan => 2, <b>-sticky => "new", -pady => 5, -padx => 5</b>);
$one->g_grid(-column => 0, -row => 3);
$two->g_grid(-column => 1, -row => 3);
$three->g_grid(-column => 2, -row => 3);
$ok->g_grid(-column => 3, -row => 3);
$cancel->g_grid(-column => 4, -row => 3);

<b>$mw->g_grid_columnconfigure(0, -weight => 1);
$mw->g_grid_rowconfigure(0, -weight => 1);
$content->g_grid_columnconfigure(0, -weight => 3);
$content->g_grid_columnconfigure(1, -weight => 3);
$content->g_grid_columnconfigure(2, -weight => 3);
$content->g_grid_columnconfigure(3, -weight => 1);
$content->g_grid_columnconfigure(4, -weight => 1);
$content->g_grid_rowconfigure(1, -weight => 1);</b>

Tkx::MainLoop;
</pre></div>

<p>This looks more promising.  Play around with the example to get a feel for the resize behavior.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/gridexample2.png' alt='screen shot'><br />
Grid example, handling in-cell layout and resize.</p>



 <a name="morefeatures"></a><h2>Additional Grid Features</h2>

<p>If you look at the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/grid.htm">reference documentation</a> for <code>grid</code>, you'll see
many other things you can do with grid.  Here are a few of the more useful ones.</p>



<h3>Querying and Changing Grid Options</h3>

<p>Like widgets themselves, it's easy to introspect the various grid options or change them.
Setting options when you first grid the widget is certainly convenient, but you can change
them anytime you'd like.</p>

<p>The <code>slaves</code> method will tell you all the widgets that have been gridded inside a master, or optionally
those within just a certain column or row.  The <code>info</code> method will return a list of all the grid
options for a widget and their values.  Finally, the <code>configure</code> method lets you change one or more
grid options on a widget. </p>

<p>These are illustrated in this interactive session:</p>

<div class=python><pre>
&gt;&gt;&gt; <b>content.grid_slaves()</b>
[&lt;tkinter.ttk.Button object .!frame.!button2&gt;, &lt;tkinter.ttk.Button object .!frame.!button&gt;,
&lt;tkinter.ttk.Checkbutton object .!frame.!checkbutton3&gt;, &lt;tkinter.ttk.Checkbutton object .!frame.!checkbutton2&gt;,
&lt;tkinter.ttk.Checkbutton object .!frame.!checkbutton&gt;, &lt;tkinter.ttk.Entry object .!frame.!entry&gt;, 
&lt;tkinter.ttk.Label object .!frame.!label&gt;, &lt;tkinter.ttk.Frame object .!frame.!frame&gt;]
&gt;&gt;&gt; <b>for w in content.grid_slaves(): print(w)</b>
...
.!frame.!button2
.!frame.!button
.!frame.!checkbutton3
.!frame.!checkbutton2
.!frame.!checkbutton
.!frame.!entry
.!frame.!label
.!frame.!frame
&gt;&gt;&gt; <b>for w in content.grid_slaves(row=3): print(w)</b>
...
.!frame.!button2
.!frame.!button
.!frame.!checkbutton3
.!frame.!checkbutton2
.!frame.!checkbutton
&gt;&gt;&gt; <b>for w in content.grid_slaves(column=0): print(w)</b>
...
.!frame.!checkbutton
.!frame.!frame
&gt;&gt;&gt; <b>namelbl.grid_info()</b>
{'in': &lt;tkinter.ttk.Frame object .!frame&gt;, 'column': 3, 'row': 0, 'columnspan': 2, 'rowspan': 1, 
'ipadx': 0, 'ipady': 0, 'padx': 5, 'pady': 0, 'sticky': 'nw'}
&gt;&gt;&gt; <b>namelbl.grid_configure(sticky=(E,W))</b>
&gt;&gt;&gt; <b>namelbl.grid_info()</b>
{'in': &lt;tkinter.ttk.Frame object .!frame&gt;, 'column': 3, 'row': 0, 'columnspan': 2, 'rowspan': 1, 
'ipadx': 0, 'ipady': 0, 'padx': 5, 'pady': 0, 'sticky': 'ew'}</pre></div>
<div class=tcl><pre>
% <b>grid slaves .c</b>
.c.cancel .c.ok .c.three .c.two .c.one .c.name .c.namelbl .c.f
% <b>grid slaves .c -row 3</b>
.c.cancel .c.ok .c.three .c.two .c.one
% <b>grid slaves .c -column 0</b>
.c.one .c.f
% <b>grid info .c.namelbl</b>
-in .c -column 3 -row 0 -columnspan 2 -rowspan 1 -ipadx 0 -ipady 0 -padx 5 -pady 0 -sticky nw
% <b>grid configure .c.namelbl -sticky ew</b>
% <b>grid info .c.namelbl</b>
-in .c -column 3 -row 0 -columnspan 2 -rowspan 1 -ipadx 0 -ipady 0 -padx 5 -pady 0 -sticky ew
</pre></div>
<div class=ruby><pre>
>> <b>TkGrid.slaves(content, nil)</b>
=> [#&lt;Tk::Tile::TButton:0x380fa4 @path=".w00000.w00008">, 
#&lt;Tk::Tile::TButton:0x500d20 @path=".w00000.w00007">, 
#&lt;Tk::Tile::TCheckButton:0x50aac8 @path=".w00000.w00006">, 
#&lt;Tk::Tile::TCheckButton:0x524158 @path=".w00000.w00005">, 
#&lt;Tk::Tile::TCheckButton:0x54b4b0 @path=".w00000.w00004">, 
#&lt;Tk::Tile::TEntry:0x5d07a0 @path=".w00000.w00003">, 
#&lt;Tk::Tile::TLabel:0x5fa9b0 @path=".w00000.w00002">,
#&lt;Tk::Tile::TFrame:0x5ff280 @visual=nil, @container=nil, @colormap=nil, 
@path=".w00000.w00001", @db_class=Tk::Tile::TFrame, @classname="TFrame">]
>> <b>TkGrid.slaves(content, :row => 3)</b>
=> [#&lt;Tk::Tile::TButton:0x380fa4 @path=".w00000.w00008">, 
#&lt;Tk::Tile::TButton:0x500d20 @path=".w00000.w00007">, 
#&lt;Tk::Tile::TCheckButton:0x50aac8 @path=".w00000.w00006">, 
#&lt;Tk::Tile::TCheckButton:0x524158 @path=".w00000.w00005">, 
#&lt;Tk::Tile::TCheckButton:0x54b4b0 @path=".w00000.w00004">]
>> <b>TkGrid.slaves(content, :column => 0)</b>
=> [#&lt;Tk::Tile::TCheckButton:0x54b4b0 @path=".w00000.w00004">, 
#&lt;Tk::Tile::TFrame:0x5ff280 @visual=nil, @container=nil, @colormap=nil, 
@path=".w00000.w00001", @db_class=Tk::Tile::TFrame, @classname="TFrame">]
>> <b>TkGrid.info(namelbl)</b>
=> {"ipadx"=>0, "ipady"=>0, "columnspan"=>2, "row"=>0, "column"=>3, 
"in"=>#&lt;Tk::Tile::TFrame:0x60ef78 @visual=nil, @container=nil, @colormap=nil,
 @path=".w00000", @db_class=Tk::Tile::TFrame, @classname="TFrame">, "rowspan"=>1, 
"sticky"=>"nw", "padx"=>5, "pady"=>0}
>> <b>TkGrid.configure(namelbl, :sticky => 'ew')</b>
=> ""
>> <b>TkGrid.info(namelbl)</b>
=> {"ipadx"=>0, "ipady"=>0, "columnspan"=>2, "row"=>0, "column"=>3, 
"in"=>#&lt;Tk::Tile::TFrame:0x60ef78 @visual=nil, @container=nil, @colormap=nil, 
@path=".w00000", @db_class=Tk::Tile::TFrame, @classname="TFrame">, "rowspan"=>1, 
"sticky"=>"ew", "padx"=>5, "pady"=>0}
</pre></div>
<div class=perl><pre>
Perl> <b>$content->g_grid_slaves</b>
.f.b2 .f.b .f.c3 .f.c2 .f.c .f.e .f.l .f.f
Perl> <b>$content->g_grid_slaves(-row => 3)</b>
.f.b2 .f.b .f.c3 .f.c2 .f.c
Perl> <b>$content->g_grid_slaves(-column => 0)</b>
.f.c .f.f
Perl> <b>$namelbl->g_grid_info</b>
-in .f -column 3 -row 0 -columnspan 2 -rowspan 1 -ipadx 0 -ipady 0 -padx 5 -pady 0 -sticky nw
Perl> <b>$namelbl->g_grid_configure(-sticky => "ew")</b>

Perl> <b>$namelbl->g_grid_info</b>
-in .f -column 3 -row 0 -columnspan 2 -rowspan 1 -ipadx 0 -ipady 0 -padx 5 -pady 0 -sticky ew	
</pre></div>

<h3>Internal Padding</h3>

<p>You saw how the <code>padx</code> and <code>pady</code> grid options added extra space around the outside of a widget.
There's also a less used type of padding called "internal padding" controlled by the
grid options <code>ipadx</code> and <code>ipady</code>.</p>

<p>The difference can be subtle.  Let's say you have a frame that's 20x20, and specify normal (external)
padding of 5 pixels on each side.  The frame will request a 20x20 rectangle (its natural size) from
the geometry manager.  Normally, that's what it will be granted, so it'll get a 20x20 rectangle for
the frame, surrounded by a 5-pixel border.</p>

<p>With internal padding, the geometry manager will effectively add the extra padding to the widget when
figuring out its natural size, as if the widget has requested a 30x30 rectangle.  If the frame is
centered, or attached to a single side or corner (using <code>sticky</code>), we'll end up with a 20x20 frame
with extra space around it.  If, however, the frame is set to stretch (i.e., a <code>sticky</code> value of <code>we</code>,
<code>ns</code>, or <code>nwes</code>), it will fill the extra space, resulting in a 30x30 frame, with no border.</p>


<h3>Forget and Remove</h3>

<p>The <code>forget</code> method of grid removes slaves from the grid they're currently part of.  
It takes a list of one or more slave widgets as arguments. This does not destroy the widget altogether but takes it off the
screen as if it had not been gridded in the first place.  You can grid it again later, though any grid options
you'd originally assigned will have been lost. </p>

<p>The <code>remove</code> method of grid works the same, except that the grid options will be remembered if you <code>grid</code> it again later.</p>

	
 <a name="nestedlayout"></a><h2>Nested Layouts</h2>


<p>As your user interface gets more complicated, the grid that you're using to organize all your widgets can
get increasingly complicated.  This can make changing and maintaining your program
very difficult.</p>

<p>Luckily, you don't have to manage your entire user interface with a single grid.  If you have one area of
your user interface that is fairly independent of others, create a new frame to hold that area and grid
the widgets in area within that frame.  For example, if you were building a graphics editor with
multiple palettes, toolbars, etc., each one of those areas might be a candidate for putting in its
own frame.</p>

<p>In theory, these frames, each with its own grid, can be nested arbitrarily deep, though, in practice, this
usually doesn't go beyond a few levels.  This can be a big help in modularizing your program.  If, for 
example, you have a palette of drawing tools, you can create the whole thing in a separate function or class. It would
be responsible for creating all the component widgets, gridding them together, setting up event bindings, etc.
The details of how things work inside that palette can be contained in that one piece of code.
From the point of view of your main program, all it needs to know about is the single frame widget containing
your palette.  </p>

<p>Our examples have shown just a hint of this, where a content frame was gridded into the main window,
and then all the other widgets gridded into the content frame.</p>

<p>As your own programs grow larger, you'll likely run into situations where making a change in the layout of
one part of your interface requires code changes to the layout of another part. That may be a clue to reconsider
how you're using <code>grid</code> and if splitting out components into separate frames would help.</p>




<h1>More Widgets</h1>

<p>This chapter carries on introducing several more widgets: listbox, scrollbar, text, 
scale, spinbox, and progressbar.  Some of these are starting to be a bit more powerful than the basic ones
we looked at before.  Here we'll also see a few instances of using the classic Tk widgets, in
cases where there isn't (or there isn't a need for) a themed counterpart.</p>


 <a name="listbox"></a><h2>Listbox</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/listbox.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/listbox.htm">Reference Manual</a></li>
</ul>

<p>A <b>listbox</b> widget displays a list of single-line text items, usually lengthy, and allows users
to browse through the list, selecting one or more.</p>

<p>Listboxes are part of the classic Tk widgets; there is not presently a listbox in the
themed Tk widget set.</p>

<div class=tip><p>Tk's treeview widget (which is themed) can also be used as a listbox (a one level deep tree),
allowing you to use icons and styles with the list.  It's also likely that a multi-column
(table) list widget will make it into Tk at some point, whether based on treeview or one of the available
extensions.</p></div>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_listbox_all.png' alt='screen shot'><br />
Listbox widgets.</p>



<div class=python><p>Listboxes are created using the <code><b>Listbox</b></code> class. A height configuration option can specify the number of lines the listbox will display at a time without scrolling:</p>
	<pre>l = Listbox(<em>parent</em>, height=10)</pre></div>
<div class=tcl><p>Listboxes are created using the <code><b>tk::listbox</b></code> command. A height configuration option can specify the number of lines the listbox will display at a time without scrolling:</p>
	<pre>tk::listbox .l -height 10</pre></div>
<div class=ruby><p>Listboxes are created using the <code><b>TkListbox</b></code> class. A height configuration option can specify the number of lines the listbox will display at a time without scrolling:</p>
	<pre>l = TkListbox.new(<em>parent</em>) {height 10}</pre></div>
<div class=perl><p>Listboxes are created using the <code><b>new_tk__listbox</b></code> method, a.k.a. <code><b>Tkx::tk__listbox</b></code>. A height configuration option can specify the number of lines the listbox will display at a time without scrolling</p>
	<pre>$<em>parent</em>->new_tk__listbox(-height => 10);</pre></div>

<h3>Populating the Listbox Items</h3>

<p>There's an easy way and a hard way to populate and manage all the items in the listbox.  </p>

<p>Here's the easy way.  Each listbox has a <code>listvariable</code> configuration option, which allows you to 
link a variable (which must hold a list) to the listbox.  Each element of this list
is a string representing one item in the listbox.  To add, remove, or rearrange
items in the listbox, you can simply modify this variable as you would any other
list.  Similarly, to find out, e.g., which item is on the third line of the listbox, just
look at the third element of the list variable.</p>

<div class=python>
It's actually not quite <em>that</em> easy. Tkinter doesn't allow you to link regular Python lists to a <code>listbox</code>.
As we saw with widgets like <code>entry</code>, we need to use a <code>StringVar</code> as an intermediary. It provides a
mapping between Python's lists and a string representation that the underlying Tk widgets can use. It also means that anytime we change the list, we need to update the <code>StringVar</code>.
<pre>
choices = ["apple", "orange", "banana"]
choicesvar = StringVar(value=choices)
l = Listbox(parent, listvariable=choicesvar)
...
choices.append("peach")
choicesvar.set(choices)
</pre>
</div>

<div class=perl>
<div class=yuck><p>Unfortunately, you can't pass a reference to a Perl list for this <code>listvariable</code> parameter.
It actually requires a <b>Tcl formatted list</b>, which is a string with elements separated by spaces,
and braces around all but the simplest elements.  So, you'll need to do the conversion
yourself.  There's a simple one-liner in the upcoming example that handles converting fairly
simple lists, but for unknown data you'll need something more robust.  </p></div>
</div>



<p>The older, harder way to do things is to use a set of methods that are part of the listbox
widget itself. They operate on the (internal) list of items maintained by the widget:</p>

<ul>
<li> The <code>insert <em>idx</em> <em>item</em> <em>?item...?</em></code> method is used to add one or more items
	 to the list; <code><em>idx</em></code> is a 0-based index indicating the position of the item before
	 which the item(s) should be added; specify <code>end</code> to put the new items at the end of
	 the list.
<li> Use the <code>delete <em>first</em> <em>?last?</em></code> method to delete one or more items from the
	 list; <code><em>first</em></code> and <code><em>last</em></code> are indices as per the <code>insert</code> method.
<li> Use the <code>get <em>first</em> <em>?last?</em></code> method to return the contents of a single item at the 
	 given position, or a list of the items between <code><em>first</em></code> and <code><em>last</em></code>.
<li> The <code>size</code> method returns the number of items in the list.
</ul>

<div class=upgrade><p>The reason there is a hard way at all is because the <code>listvariable</code> option was only
introduced in Tk 8.3.  Before that, you were stuck with the hard way.  Because using
the list variable lets you use all the standard list operations, it provides a much
simpler API. It's certainly an upgrade worth considering if you have listboxes doing
things the older way.</p></div>

<h3>Selecting Items</h3>

<p>You can choose whether users can select only a 
single item at a time from the <code>listbox</code>, or if multiple items can simultaneously be selected.  This is 
controlled by the <code>selectmode</code> option: the default is only being able to select
a single item (<code>browse</code>), while a <code>selectmode</code> of <code>extended</code> allows users to select 
multiple items.</p>

<div class=yuck><p>The names <code>browse</code> and <code>extended</code>, again for backward compatibility reasons, are truly awful.  
This is made worse by the fact that there are two other modes, <code>single</code> and <code>multiple</code>, which 
you <b>should not use</b> (they use an old interaction style that is inconsistent with modern
user interface and platform conventions).</p></div>

<p>To find out which item or items in the listbox are currently selected, use the <code>curselection</code>
method. It returns a list of indices of all items currently selected; this may be an
empty list. For lists with a <code>selectmode</code> of <code>browse</code>, it will never be longer than one item.  You
can also use the <code>selection_includes <em>index</em></code> method to check if the item with the given 
index is currently selected.</p>

<div class=python><pre>if lbox.selection_includes(2): ...</pre></div>
<div class=tcl><pre>if {[$lbox selection includes 2]} {...}</pre></div>
<div class=ruby><pre>if $lbox.selection_includes(2) ...</pre></div>
<div class=perl><pre>if ($lbox->selection_includes(2) {...}</pre></div>

<p>To programmatically change the selection, you can use the <code>selection_clear <em>first</em> <em>?last?</em></code>
method to deselect either a single item or any within the range of indices specified.  To select
an item or all items in a range, use the <code>selection_set <em>first</em> <em>?last?</em></code> method.  Both of 
these will not touch the selection of any items outside the range specified.</p>

<p>If you change the selection, you should also make sure that the newly selected item is visible
 (i.e., it is not scrolled out of view).  To do this, use the <code>see <em>index</em></code> method.</p>

<div class=python><pre>lbox.selection_set(idx)
lbox.see(idx)</pre></div>
<div class=tcl><pre>$lbox selection set $idx
$lbox see $idx</pre></div>
<div class=ruby><pre>$lbox.selection_set(idx)
$lbox.see(idx)</pre></div>
<div class=perl><pre>$lbox->selection_set($idx);
$lbox->see($idx);</pre></div>

<p>When a user changes the selection, a <code>&lt;&lt;ListboxSelect&gt;&gt;</code> virtual event is generated.
You can bind to this to take any action you need.  Depending on your application, you may also want to bind
to a double-click <code>&lt;Double-1&gt;</code> event and use it to invoke an action with the currently selected item.</p>

<div class=python><pre>lbox.bind("&lt;&lt;ListboxSelect&gt;&gt;", lambda e: updateDetails(lbox.curselection()))
lbox.bind("&lt;Double-1&gt;", lambda e: invokeAction(lbox.curselection()))</pre></div>
<div class=tcl><pre>bind $lbox &lt;&lt;ListboxSelect&gt;&gt; {updateDetails [$lbox curselection]}
bind $lbox &lt;Double-1&gt; {invokeAction [$lbox curselection]}</pre></div>
<div class=ruby><pre>$lbox.bind('&lt;ListboxSelect&gt;', proc{updateDetails($lbox.curselection)})
$lbox.bind('Double-1', proc{invokeAction($lbox.curselection)})</pre></div>
<div class=perl><pre>$lbox->g_bind(&lt;&lt;ListboxSelect&gt;&gt;", sub {updateDetails($lbox->curselection)})'
$lbox->g_bind(&lt;Double-1&gt;", sub {invokeAction($lbox->curselection)});</pre></div>


<h3>Stylizing the List</h3>

<p>Like most of the "classic" Tk widgets, you have immense flexibility in modifying the appearance of a listbox.
As described in the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/listbox.htm">reference manual</a>, you can
modify the font the listbox items are displayed in, the foreground (text) and background colors for items
in their normal state, when selected, when the widget is disabled, etc.  There is also an
<code>itemconfigure</code> method that allows you to change the foreground and background colors of
individual items.</p>

<p>As is often the case, restraint is useful.  Generally, the default values will be entirely suitable and a 
good match for platform conventions.  In the example we'll get to momentarily, we'll show how restrained
use of these options can be put to good effect, in this case displaying alternate lines of the listbox in
slightly different colors.</p>


<h3>Keeping Extra Item Data</h3>

<p>The <code>listvariable</code> (or the internal list, if you're managing things the old way) holds 
the strings that will be shown in the listbox.  It's often the case, though, that each string you're displaying is
associated with some other data item. This might bean internal object that is meaningful to your program, but not
meant to be displayed to users. In other words, what you're really interested in is not so much the string
displayed in the listbox, but the associated data item.  For example, a listbox may display a list of names
to users, but your program is really interested in the underlying user object (or id number)
for each one, not the particular name.  </p>

<p>How can we associate this underlying value with the name that is displayed?  Unfortunately, the listbox widget itself doesn't
offer any facilities, so it's something we'll have to manage separately.  There are a couple of obvious
approaches.  First, if the displayed strings are guaranteed unique, you could use a hash table to map each
name to its associated underlying object.  This wouldn't work well for peoples' names, where
duplicates are possible, but could work for countries, which are unique.</p>

<p>A second approach is to keep a second list, parallel to the list of strings displayed in the listbox.
This second list will hold the underlying object associated with each item that is displayed.
So the first item in the displayed strings list corresponds to the first item in
the underlying objects list, the second to the second, etc.  Any changes that you make in one list (insert, delete,
reorder), you must make in the other.  You can then easily map from the displayed list item to the underlying
object, based on their position in the list.</p>


<h3>Example</h3>

<p>Here is a silly example showing several of these listbox techniques.  We'll have a list of countries
displayed.  We'll be able to select only a single country at a time. As we do so, a status bar will display the population of the country.  
You can press a button to send one of several gifts to the selected country's head of state (well, not really, but use your imagination).
Sending a gift can also be triggered by double-clicking the list or hitting the Return key.</p>

<p>Behind the scenes, we maintain two lists in parallel. The first is a list of two-letter country codes. The other is the corresponding name
  for each country that we will display in the listbox. We also have a simple hash table that contains the population of each country, indexed by 
  the two-letter country code.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/country_w.png' alt='screen shot'><br />
Country selector listbox example.</p>

<div class=python><pre>from tkinter import *
from tkinter import ttk
root = Tk()

<em># Initialize our country "databases":</em>
<em>#  - the list of country codes (a subset anyway)</em>
<em>#  - parallel list of country names, same order as the country codes</em>
<em>#  - a hash table mapping country code to population</em>
countrycodes = ('ar', 'au', 'be', 'br', 'ca', 'cn', 'dk', 'fi', 'fr', 'gr', 'in', 'it', 'jp', 'mx', 'nl', 'no', 'es', 'se', 'ch')
countrynames = ('Argentina', 'Australia', 'Belgium', 'Brazil', 'Canada', 'China', 'Denmark', \
        'Finland', 'France', 'Greece', 'India', 'Italy', 'Japan', 'Mexico', 'Netherlands', 'Norway', 'Spain', \
        'Sweden', 'Switzerland')
cnames = StringVar(value=countrynames)
populations = {'ar':41000000, 'au':21179211, 'be':10584534, 'br':185971537, \
        'ca':33148682, 'cn':1323128240, 'dk':5457415, 'fi':5302000, 'fr':64102140, 'gr':11147000, \
        'in':1131043000, 'it':59206382, 'jp':127718000, 'mx':106535000, 'nl':16402414, \
        'no':4738085, 'es':45116894, 'se':9174082, 'ch':7508700}

<em># Names of the gifts we can send</em>
gifts = { 'card':'Greeting card', 'flowers':'Flowers', 'nastygram':'Nastygram'}

<em># State variables</em>
gift = StringVar()
sentmsg = StringVar()
statusmsg = StringVar()

<em># Called when the selection in the listbox changes; figure out</em>
<em># which country is currently selected, and then lookup its country</em>
<em># code, and from that, its population.  Update the status message</em>
<em># with the new population.  As well, clear the message about the</em>
<em># gift being sent, so it doesn't stick around after we start doing</em>
<em># other things.</em>
def showPopulation(*args):
    idxs = lbox.curselection()
    if len(idxs)==1:
        idx = int(idxs[0])
        code = countrycodes[idx]
        name = countrynames[idx]
        popn = populations[code]
        statusmsg.set("The population of %s (%s) is %d" % (name, code, popn))
    sentmsg.set('')

<em># Called when the user double clicks an item in the listbox, presses</em>
<em># the "Send Gift" button, or presses the Return key.  In case the selected</em>
<em># item is scrolled out of view, make sure it is visible.</em>
#
<em># Figure out which country is selected, which gift is selected with the </em>
<em># radiobuttons, "send the gift", and provide feedback that it was sent.</em>
def sendGift(*args):
    idxs = lbox.curselection()
    if len(idxs)==1:
        idx = int(idxs[0])
        lbox.see(idx)
        name = countrynames[idx]
        <em># Gift sending left as an exercise to the reader</em>
        sentmsg.set("Sent %s to leader of %s" % (gifts[gift.get()], name))

<em># Create and grid the outer content frame</em>
c = ttk.Frame(root, padding=(5, 5, 12, 0))
c.grid(column=0, row=0, sticky=(N,W,E,S))
root.grid_columnconfigure(0, weight=1)
root.grid_rowconfigure(0,weight=1)

<em># Create the different widgets; note the variables that many</em>
<em># of them are bound to, as well as the button callback.</em>
<em># We're using the StringVar() 'cnames', constructed from 'countrynames'</em>
<b>lbox</b> = Listbox(c, <b>listvariable=cnames</b>, height=5)
lbl = ttk.Label(c, text="Send to country's leader:")
g1 = ttk.Radiobutton(c, text=gifts['card'], <b>variable=gift</b>, value='card')
g2 = ttk.Radiobutton(c, text=gifts['flowers'], <b>variable=gift</b>, value='flowers')
g3 = ttk.Radiobutton(c, text=gifts['nastygram'], <b>variable=gift</b>, value='nastygram')
send = ttk.Button(c, text='Send Gift', <b>command=sendGift</b>, default='active')
sentlbl = ttk.Label(c, <b>textvariable=sentmsg</b>, anchor='center')
status = ttk.Label(c, <b>textvariable=statusmsg</b>, anchor=W)

<em># Grid all the widgets</em>
lbox.grid(column=0, row=0, rowspan=6, sticky=(N,S,E,W))
lbl.grid(column=1, row=0, padx=10, pady=5)
g1.grid(column=1, row=1, sticky=W, padx=20)
g2.grid(column=1, row=2, sticky=W, padx=20)
g3.grid(column=1, row=3, sticky=W, padx=20)
send.grid(column=2, row=4, sticky=E)
sentlbl.grid(column=1, row=5, columnspan=2, sticky=N, pady=5, padx=5)
status.grid(column=0, row=6, columnspan=2, sticky=(W,E))
c.grid_columnconfigure(0, weight=1)
c.grid_rowconfigure(5, weight=1)

<em># Set event bindings for when the selection in the listbox changes,</em>
<em># when the user double clicks the list, and when they hit the Return key</em>
lbox.bind('<&lt;ListboxSelect>&gt;', showPopulation)
lbox.bind('&lt;Double-1&gt;', sendGift)
root.bind('&lt;Return&gt;', sendGift)

<em># Colorize alternating lines of the listbox</em>
for i in range(0,len(countrynames),2):
    lbox.itemconfigure(i, background='#f0f0ff')

<em># Set the starting state of the interface, including selecting the</em>
<em># default gift to send, and clearing the messages.  Select the first</em>
<em># country in the list; because the &lt;&lt;ListboxSelect&gt;&gt; event is only</em>
<em># fired when users makes a change, we explicitly call showPopulation.</em>
gift.set('card')
sentmsg.set('')
statusmsg.set('')
lbox.selection_set(0)
showPopulation()

root.mainloop()
</pre></div>
<div class=tcl><pre><em># Initialize our country "databases":</em>
<em>#  - the list of country codes (a subset anyway)</em>
<em>#  - parallel list of country names, same order as the country codes</em>
<em>#  - a hash table mapping country code to population</em>
set countrycodes [list ar au be br ca cn dk fi fr gr in it jp mx nl no es se ch]
set countrynames [list Argentina Australia Belgium Brazil Canada China Denmark \
        Finland France Greece India Italy Japan Mexico Netherlands Norway Spain \
        Sweden Switzerland]
array set populations [list ar 41000000 au 21179211 be 10584534 br 185971537 \
        ca 33148682 cn 1323128240 dk 5457415 fi 5302000 fr 64102140 gr 11147000 \
        in 1131043000 it 59206382 jp 127718000 mx 106535000 nl 16402414 \
        no 4738085 es 45116894 se 9174082 ch 7508700]

<em># Names of the gifts we can send</em>
array set gifts [list card "Greeting card" flowers "Flowers" nastygram "Nastygram"]

<em># Create and grid the outer content frame</em>
grid [ttk::frame .c -padding "5 5 12 0"] -column 0 -row 0 -sticky nwes
grid columnconfigure . 0 -weight 1; grid rowconfigure . 0 -weight 1

<em># Create the different widgets; note the variables that many</em>
<em># of them are bound to, as well as the button callback.</em>
<em># The listbox is the only widget we'll need to refer to directly</em>
<em># later in our program, so for convenience we'll assign it to a variable.</em>
<b>set ::lbox</b> [tk::listbox .c.countries <b>-listvariable countrynames</b> -height 5]
ttk::label .c.lbl -text "Send to country's leader:"
ttk::radiobutton .c.g1 -text $gifts(card) <b>-variable gift</b> -value card
ttk::radiobutton .c.g2 -text $gifts(flowers) <b>-variable gift</b> -value flowers
ttk::radiobutton .c.g3 -text $gifts(nastygram) <b>-variable gift</b> -value nastygram
ttk::button .c.send -text "Send Gift" <b>-command {sendGift}</b> -default active
ttk::label .c.sentlbl <b>-textvariable sentmsg</b> -anchor center
ttk::label .c.status <b>-textvariable statusmsg</b> -anchor w

<em># Grid all the widgets</em>
grid .c.countries -column 0 -row 0 -rowspan 6 -sticky nsew
grid .c.lbl       -column 1 -row 0 -padx 10 -pady 5
grid .c.g1        -column 1 -row 1 -sticky w -padx 20
grid .c.g2        -column 1 -row 2 -sticky w -padx 20
grid .c.g3        -column 1 -row 3 -sticky w -padx 20
grid .c.send      -column 2 -row 4 -sticky e
grid .c.sentlbl   -column 1 -row 5 -columnspan 2 -sticky n -pady 5 -padx 5
grid .c.status    -column 0 -row 6 -columnspan 2 -sticky we
grid columnconfigure .c  0 -weight 1; grid rowconfigure .c 5 -weight 1

<em># Set event bindings for when the selection in the listbox changes,</em>
<em># when the user double clicks the list, and when they hit the Return key</em>
bind $::lbox <&lt;ListboxSelect>&gt; "showPopulation"
bind $::lbox &lt;Double-1&gt; "sendGift"
bind . &lt;Return&gt; "sendGift"

<em># Called when the selection in the listbox changes; figure out</em>
<em># which country is currently selected, and then lookup its country</em>
<em># code, and from that, its population.  Update the status message</em>
<em># with the new population.  As well, clear the message about the</em>
<em># gift being sent, so it doesn't stick around after we start doing</em>
<em># other things.</em>
proc showPopulation {} {
    set idx [$::lbox curselection]
    if {[llength $idx]==1} {
        set code [lindex $::countrycodes $idx]
        set name [lindex $::countrynames $idx]
        set popn $::populations($code)
        set ::statusmsg "The population of $name ($code) is $popn"
    }
    set ::sentmsg ""
}

<em># Called when the user double clicks an item in the listbox, presses</em>
<em># the "Send Gift" button, or presses the Return key.  In case the selected</em>
<em># item is scrolled out of view, make sure it is visible.</em>
#
<em># Figure out which country is selected, which gift is selected with the </em>
<em># radiobuttons, "send the gift", and provide feedback that it was sent.</em>
proc sendGift {} {
    set idx [$::lbox curselection]
    if {[llength $idx]==1} {
        $::lbox see $idx
        set name [lindex $::countrynames $idx]
        <em># Gift sending left as an exercise to the reader</em>
        set ::sentmsg "Sent $::gifts($::gift) to leader of $name"
    }     
}

<em># Colorize alternating lines of the listbox</em>
for {set i 0} {$i&lt;[llength $countrynames]} {incr i 2} {
    $::lbox itemconfigure $i -background #f0f0ff
}

<em># Set the starting state of the interface, including selecting the</em>
<em># default gift to send, and clearing the messages.  Select the first</em>
<em># country in the list; because the &lt;&lt;ListboxSelect&gt;&gt; event is only</em>
<em># fired when users makes a change, we explicitly call showPopulation.</em>
set gift card
set sentmsg ""
set statusmsg ""
$::lbox selection set 0
showPopulation


</pre></div>
<div class=ruby><pre>require 'tkextlib/tile'

<em># Initialize our country "databases":</em>
<em>#  - the list of country codes (a subset anyway)</em>
<em>#  - parallel list of country names, same order as the country codes</em>
<em>#  - a hash table mapping country code to population</em>
$countrycodes = %w{ ar au be br ca cn dk fi fr gr in it jp mx nl no es se ch }
$countrynames = %w{ Argentina Australia Belgium Brazil Canada China Denmark 
        Finland France Greece India Italy Japan Mexico Netherlands Norway Spain  
        Sweden Switzerland}
$populations = { 'ar' => 41000000, 'au' => 21179211, 'be' => 10584534, 'br' =&gt; 185971537,  
        'ca' => 33148682, 'cn' => 1323128240, 'dk' => 5457415, 'fi' =&gt; 5302000, 
        'fr' => 64102140, 'gr' => 11147000, 'in' => 1131043000, 'it' =&gt; 59206382,
        'jp' => 127718000, 'mx' => 106535000, 'nl' => 16402414, 'no' =&gt; 4738085, 
        'es' => 45116894, 'se' => 9174082, 'ch' =&gt; 7508700}

<em># Names of the gifts we can send</em>
$gifts = { 'card' => "Greeting card", 'flowers' => "Flowers", 'nastygram' =&gt; "Nastygram" }

<em># Create and initialize the linked variables we'll need in the interface</em>
$gift = TkVariable.new( "card" )
$names = TkVariable.new ( $countrynames )
$sent = TkVariable.new ( "" )
$status = TkVariable.new ( "" )

<em># Create and grid the outer content frame</em>
root = TkRoot.new
content = Tk::Tile::Frame.new(root) {padding "5 5 12 0"}.grid :column => 0, :row => 0, :sticky =&gt; "nwes"
TkGrid.columnconfigure root, 0, :weight =&gt; 1
TkGrid.rowconfigure root, 0, :weight =&gt; 1

<em># Create the different widgets; note the variables that many</em>
<em># of them are bound to, as well as the button callback.</em>
$countries = TkListbox.new(content) {<b>listvariable $names</b>; height 5}
sendlbl = Tk::Tile::Label.new(content) {text "Send to country's leader:"}
gift1 = Tk::Tile::Radiobutton.new(content) {text $gifts['card']; <b>variable $gift</b>; value 'card'}
gift2 = Tk::Tile::Radiobutton.new(content) {text $gifts['flowers']; <b>variable $gift</b>; value 'floweres'}
gift3 = Tk::Tile::Radiobutton.new(content) {text $gifts['nastygram']; <b>variable $gift;</b> value 'nastygram'}
send = Tk::Tile::Button.new(content) {text "Send Gift"; <b>command "sendGift"</b>; default "active"}
sentlbl = Tk::Tile::Label.new(content) {<b>textvariable $sent</b>; anchor "center"}
statuslbl = Tk::Tile::Label.new(content) {<b>textvariable $status</b>; anchor "w"}

<em># Grid all the widgets</em>
$countries.grid :column => 0, :row => 0, :rowspan => 6, :sticky =&gt; 'nsew'
sendlbl.grid    :column => 1, :row => 0, :padx => 10, :pady =&gt; 5
gift1.grid      :column => 1, :row => 1, :sticky => 'w', :padx =&gt; 20
gift2.grid      :column => 1, :row => 2, :sticky => 'w', :padx =&gt; 20
gift3.grid      :column => 1, :row => 3, :sticky => 'w', :padx =&gt; 20
send.grid       :column => 2, :row => 4, :sticky =&gt; 'e'
sentlbl.grid    :column => 1, :row => 5, :columnspan => 2, :sticky => 'n', :pady => 5, :padx =&gt; 5
statuslbl.grid  :column => 0, :row => 6, :columnspan => 2, :sticky =&gt; 'we'

TkGrid.columnconfigure content, 0, :weight =&gt; 1
TkGrid.rowconfigure content, 5, :weight =&gt; 1

<em># Set event bindings for when the selection in the listbox changes,</em>
<em># when the user double clicks the list, and when they hit the Return key</em>
$countries.bind '&lt;ListboxSelect&gt;', proc{showPopulation}
$countries.bind 'Double-1', proc{sendGift}
root.bind 'Return', proc{sendGift}

<em># Called when the selection in the listbox changes; figure out</em>
<em># which country is currently selected, and then lookup its country</em>
<em># code, and from that, its population.  Update the status message</em>
<em># with the new population.  As well, clear the message about the</em>
<em># gift being sent, so it doesn't stick around after we start doing</em>
<em># other things.</em>
def showPopulation
    idx = $countries.curselection
    if idx.length==1
        idx = idx[0]
        code = $countrycodes[idx]
        name = $countrynames[idx]
        popn = $populations[code]
        $status.value = "The population of #{name} (#{code}) is #{popn}"
    end
    $sent.value = ""
end

<em># Called when the user double clicks an item in the listbox, presses</em>
<em># the "Send Gift" button, or presses the Return key.  In case the selected</em>
<em># item is scrolled out of view, make sure it is visible.</em>
#
<em># Figure out which country is selected, which gift is selected with the </em>
<em># radiobuttons, "send the gift", and provide feedback that it was sent.</em>
def sendGift 
    idx = $countries.curselection
    if idx.length==1
        idx = idx[0]    
        $countries.see idx
        name = $countrynames[idx]
        <em># Gift sending left as an exercise to the reader</em>
        $sent.value = "Sent #{$gifts[$gift.value]} to leader of #{name}"
    end
end

<em># Colorize alternating lines of the listbox</em>
0.step($countrycodes.length-1, 2) {|i| $countries.itemconfigure i, :background, "#f0f0ff"}

<em># Select the first country in the list; because the <&lt;ListboxSelect>&gt; event is only</em>
<em># fired when users makes a change, we explicitly call showPopulation.</em>
$countries.selection_set 0
showPopulation

Tk.mainloop
</pre></div>
<div class=perl><pre>use Tkx;

<em># Initialize our country "databases":</em>
<em>#  - the list of country codes (a subset anyway)</em>
<em>#  - parallel list of country names, same order as the country codes</em>
<em>#  - a hash table mapping country code to population</em>
@countrycodes = ("ar", "au", "be", "br", "ca", "cn", "dk", "fi", "fr", "gr", "in", "it", "jp", "mx", 
                "nl", "no", "es", "se", "ch");
@countrynames = ("Argentina", "Australia", "Belgium", "Brazil", "Canada", "China", "Denmark", 
        "Finland", "France", "Greece", "India", "Italy", "Japan", "Mexico", "Netherlands", "Norway", "Spain", 
        "Sweden", "Switzerland");
%populations = ("ar" => 41000000, "au" => 21179211, "be" => 10584534, "br" =&gt; 185971537, 
        "ca" => 33148682, "cn" => 1323128240, "dk" => 5457415, "fi" => 5302000, "fr" => 64102140, "gr" =&gt; 11147000, 
        "in" => 1131043000, "it" => 59206382, "jp" => 127718000, "mx" => 106535000, "nl" =&gt; 16402414, 
        "no" => 4738085, "es" => 45116894, "se" => 9174082, "ch" =&gt; 7508700);

<em># Names of the gifts we can send</em>
%gifts =("card" => "Greeting card", "flowers" => "Flowers", "nastygram" =&gt; "Nastygram");

<em># Create and grid the outer content frame</em>
$mw = Tkx::widget-&gt;new(".");
$content = $mw->new_ttk__frame(-padding =&gt; "5 5 12 0");
$content->g_grid(-column => 0, -row => 0, -sticky =&gt; "nwes");
$mw->g_grid_columnconfigure(0, -weight =&gt; 1);
$mw->g_grid_rowconfigure(0, -weight =&gt; 1);

<em># Create the different widgets; note the variables that many</em>
<em># of them are bound to, as well as the button callback.</em>
<em># The listbox is the only widget we'll need to refer to directly</em>
<em># later in our program, so for convenience we'll assign it to a variable.</em>
<em># Remember that we must use a Tcl formatted list for listvariable.</em>
<b>$cnames = ''; foreach $i (@countrynames) {$cnames = $cnames . ' {' . $i . '}';};</b>
<b>$lbox</b> = $content->new_tk__listbox(<b>-listvariable => \$cnames</b>, -height => 5);
$lbl = $content->new_ttk__label(-text =&gt; "Send to country's leader:");
$g1 = $content->new_ttk__radiobutton(-text => $gifts{'card'}, <b>-variable => \$gift</b>, -value => 'card');
$g2 = $content->new_ttk__radiobutton(-text => $gifts{'flowers'}, <b>-variable => \$gift</b>, -value => 'flowers');
$g3 = $content->new_ttk__radiobutton(-text => $gifts{'nastygram'}, <b>-variable => \$gift</b>, -value => 'nastygram');
$send = $content->new_ttk__button(-text => "Send Gift", <b>-command => sub {sendGift()}</b>, -default => 'active');
$l1 = $content->new_ttk__label(<b>-textvariable => \$sentmsg</b>, -anchor => "center");
$l2 = $content->new_ttk__label(<b>-textvariable => \$statusmsg</b>, -anchor => "w");

<em># Grid all the widgets</em>
$lbox->g_grid(-column => 0, -row => 0, -rowspan => 6, -sticky =&gt; "nsew");
$lbl->g_grid(-column => 1, -row => 0, -padx => 10, -pady =&gt; 5);
$g1->g_grid(-column => 1, -row => 1, -sticky => "w", -padx =&gt; 20);
$g2->g_grid(-column => 1, -row => 2, -sticky => "w", -padx =&gt; 20);
$g3->g_grid(-column => 1, -row => 3, -sticky => "w", -padx =&gt; 20);
$send->g_grid(-column => 2, -row => 4, -sticky =&gt; "e");
$l1->g_grid(-column => 1, -row => 5, -columnspan => 2, -sticky => "n", -pady => 5, -padx =&gt; 5);
$l2->g_grid(-column => 0, -row => 6, -columnspan => 2, -sticky =&gt; "we");
$content->g_grid_columnconfigure(0, -weight =&gt; 1);
$content->g_grid_rowconfigure(0, -weight =&gt; 1);


<em># Set event bindings for when the selection in the listbox changes,</em>
<em># when the user double clicks the list, and when they hit the Return key</em>
$lbox->g_bind("<&lt;ListboxSelect>&gt;", sub {showPopulation()});
$lbox->g_bind("&lt;Double-1&gt;", sub {sendGift()});
$mw->g_bind("&lt;Return&gt;", sub {sendGift()});

<em># Called when the selection in the listbox changes; figure out</em>
<em># which country is currently selected, and then lookup its country</em>
<em># code, and from that, its population.  Update the status message</em>
<em># with the new population.  As well, clear the message about the</em>
<em># gift being sent, so it doesn't stick around after we start doing</em>
<em># other things.</em>
sub showPopulation {
    my @idx = $lbox-&gt;curselection;
    if ($#idx==0) {
        my $code = $countrycodes[$idx[0]];
        my $name = $countrynames[$idx[0]];
        my $popn = $populations{$code};
        $statusmsg = "The population of " . $name . "(" . $code . ") is $popn";
    }
    $sentmsg = "";
}

<em># Called when the user double clicks an item in the listbox, presses</em>
<em># the "Send Gift" button, or presses the Return key.  In case the selected</em>
<em># item is scrolled out of view, make sure it is visible.</em>
#
<em># Figure out which country is selected, which gift is selected with the </em>
<em># radiobuttons, "send the gift", and provide feedback that it was sent.</em>
sub sendGift {
    my @idx = $lbox-&gt;curselection;
    if ($#idx==0) {
        $lbox-&gt;see($idx[0]);
        my $name =$countrynames[$idx[0]];
        <em># Gift sending left as an exercise to the reader</em>
        $sentmsg = "Sent " . $gifts{$gift} . " to leader of " . $name
    }     
}

<em># Colorize alternating lines of the listbox</em>
for ($i=0; $i&lt;=$#countrynames; $i+=2) {
    $lbox->itemconfigure($i, -background =&gt; "#f0f0ff");
}

<em># Set the starting state of the interface, including selecting the</em>
<em># default gift to send, and clearing the messages.  Select the first</em>
<em># country in the list; because the &lt;&lt;ListboxSelect&gt;&gt; event is only</em>
<em># fired when users makes a change, we explicitly call showPopulation.</em>
$gift = 'card';
$sentmsg = "";
$statusmsg = "";
$lbox-&gt;selection_set(0);
showPopulation;

Tkx::MainLoop();

</pre></div>

<p>One obvious thing missing from this example was that while the list of countries could be quite
long, only part of it fits on the screen at once.  To show countries further down in the list, you
had to either drag with your mouse or use the down arrow key.  A scrollbar would have been nice.
Let's fix that.</p>


 <a name="scrollbar"></a><h2>Scrollbar</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/scrollbar.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_scrollbar.htm">Reference Manual</a></li>
</ul>


<p>A <b>scrollbar</b> widget helps users see all parts of another widget, whose content is typically
much larger than what can be shown in the available screen space.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_scrollbar_all.png' alt='screen shot'><br />
Scrollbar widgets.</p>


<div class=python><p>Scrollbars are created using the <code><b>ttk.Scrollbar</b></code> class:</p>
	<pre>s = ttk.Scrollbar( <em>parent</em>, orient=VERTICAL, command=listbox.yview)
listbox.configure(yscrollcommand=s.set)</pre>
</div>
<div class=tcl><p>Scrollbars are created using the <code><b>ttk::scrollbar</b></code> command:</p>
	<pre>ttk::scrollbar .s -orient vertical -command ".l yview"
.l configure -yscrollcommand ".s set"</pre>
	</div>
<div class=ruby><p>Scrollbars are created using the <code><b>Tk::Tile::Scrollbar</b></code> class:</p>
	<pre>s = Tk::Tile::Scrollbar.new(<em>parent</em>) {orient "vertical"; 
        command proc{|*args| l.yview(*args);} }
l['yscrollcommand'] = proc{|*args| s.set(*args);}</pre>
</div>
<div class=perl>Scrollbars are created using the <code><b>new_ttk__scrollbar</b></code> method, a.k.a. <code><b>Tkx::ttk__scrollbar</b></code>:
	<pre>$s = $<em>parent</em>->new_ttk__scrollbar(-orient => 'vertical', -command => [$listbox, 'yview']);
$listbox->configure(-scrollcommand => [$s, 'set']);</pre>
</div>

<p>Unlike in some user interface toolkits, Tk scrollbars are not a part of another widget (e.g., a listbox), but are a
separate widget altogether.  Instead, scrollbars communicate with the <em>scrolled widget</em> by calling
methods on the scrolled widget; as it turns out, the scrolled widget also needs to call methods 
on the scrollbar.  </p>

<div class=fyi><p>If you're using a recent Linux distribution, you've probably noticed
that the scrollbars you see in many applications have changed to look more
like what you'd see on macOS. This newer look isn't supported on Linux by any
of the default themes included with Tk. However, some third-party themes do support it.</p></div>

<p>The <code>orient</code> configuration option determines whether the scrollbar will 
scroll the scrolled widget in the <code>horizontal</code> or <code>vertical</code> dimension.  You then need to use the
<code>command</code> configuration option to specify how to communicate with the scrolled widget.  This is the 
method to call on the scrolled widget when the scrollbar moves.</p>

<p>Every widget that can be scrolled vertically includes a method named <code>yview</code>, while those that
can be scrolled horizontally have a method named <code>xview</code>).  As long as this method is
present, the scrollbar doesn't need to know anything else about the scrolled widget.  When the
scrollbar is manipulated, it appends several parameters to the method call, indicating
how it was scrolled, to what position, etc.</p>

<p>The scrolled widget also needs to communicate back to the scrollbar, telling it what percentage
of the entire content area is now visible.  Besides the <code>yview</code> and/or <code>xview</code> methods,
every scrollable widget also has a <code>yscrollcommand</code> and/or <code>xscrollcommand</code>
configuration option.  This is used to specify a method call, which must be the scrollbar's
<code>set</code> method.  Again, additional parameters will be automatically tacked onto the method
call.</p>

<div class=ruby>
<p>Most scrollable widgets also have <code>xscrollbar</code> and <code>yscrollbar</code> methods that
will save you the trouble of writing your own <code>command</code>, <code>xscrollcommand</code>,
and <code>yscrollcommand</code> callbacks needed to wire a scrollable widget to a scrollbar.
Instead you just do something like:</p>
<pre>s = Tk::Tile::Scrollbar.new(<em>parent</em>) {orient "vertical"}
l.yscrollbar = s</pre>
</div>

<div class=tip><p>If, for some reason, you want to move the scrollbar to a particular position from within your program,
you can call the <code>set <em>first</em> <em>last</em></code> method yourself.  Pass it two floating-point values (between
0 and 1) indicating the start and end percentage of the content area that is visible.</p></div>


<h3>Example</h3>

<p>Listboxes are one of several types of widgets that are scrollable.  Here, we'll build a very simple user
interface, consisting of a vertically scrollable listbox that takes up the entire window, with
just a status line at the bottom.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/scrollbar_l.png' alt='screen shot'><br />
Scrolling a listbox.</p>

<div class=python><pre>from tkinter import *
from tkinter import ttk

root = Tk()
l = Listbox(root, height=5)
l.grid(column=0, row=0, sticky=(N,W,E,S))
s = ttk.Scrollbar(root, orient=VERTICAL, <b>command=l.yview</b>)
s.grid(column=1, row=0, sticky=(N,S))
<b>l['yscrollcommand'] = s.set</b>
ttk.Label(root, text="Status message here", anchor=(W)).grid(column=0, columnspan=2, row=1, sticky=(W,E))
root.grid_columnconfigure(0, weight=1)
root.grid_rowconfigure(0, weight=1)
for i in range(1,101):
    l.insert('end', 'Line %d of 100' % i)
root.mainloop()</pre></div>

<div class=tcl><pre>
grid [tk::listbox .l <b>-yscrollcommand ".s set"</b> -height 5] -column 0 -row 0 -sticky nwes
grid [ttk::scrollbar .s <b>-command ".l yview"</b> -orient vertical] -column 1 -row 0 -sticky ns
grid [ttk::label .stat -text "Status message here" -anchor w] -column 0 -columnspan 2 -row 1 -sticky we
grid columnconfigure . 0 -weight 1; grid rowconfigure . 0 -weight 1
for {set i 0} {$i&lt;100} {incr i} {
   .l insert end "Line $i of 100"
}
</pre></div>
<div class=ruby><pre>
require 'tk'
require 'tkextlib/tile'

root = TkRoot.new
$l = TkListbox.new(root) {height 5; 
        <b>yscrollcommand proc{|*args| $s.set(*args)}</b> }.grid :column => 0, :row => 0, :sticky => 'nwes'
$s = Tk::Tile::Scrollbar.new(root) {orient 'vertical'; 
        <b>command proc{|*args| $l.yview(*args)}</b>}.grid :column => 1, :row => 0, :sticky => 'ns'
stat = Tk::Tile::Label.new(root) {text "Status message here"; 
        anchor 'w'}.grid :column => 0, :columnspan => 2, :row => 1, :sticky => 'we'
TkGrid.columnconfigure root, 0, :weight => 1
TkGrid.rowconfigure root, 0, :weight => 1

(0..99).each {|i| $l.insert 'end', "Line #{i} of 100"}

Tk.mainloop
</pre></div>
<div class=perl><pre>use Tkx;
my $mw = Tkx::widget->new(".");

($lb = $mw->new_tk__listbox(-height => 5))->g_grid(-column => 0, -row => 0, -sticky => "nwes");
($s = $mw->new_ttk__scrollbar(<b>-command => [$lb, "yview"]</b>, 
        -orient => "vertical"))->g_grid(-column =>1, -row => 0, -sticky => "ns");
<b>$lb->configure(-yscrollcommand => [$s, "set"]);</b>
($mw->new_ttk__label(-text => "Status message here", 
        -anchor => "w"))->g_grid(-column => 0, -columnspan => 2, -row => 1, -sticky => "we");
$mw->g_grid_columnconfigure(0, -weight => 1); $mw->g_grid_rowconfigure(0, -weight => 1);
for ($i=0; $i<100; $i++) {
   $lb->insert("end", "Line " . $i . " of 100");
}

Tkx::MainLoop();
</pre></div>



<div class=upgrade><p>
If you've seen an earlier version of this tutorial, you might recall that at this point we
introduced a <code>sizegrip</code> widget. It placed a small handle at the bottom right of the 
window, allowing users to resize the window by dragging the handle. This was commonly seen on
some platforms, including older versions of macOS. Some older versions of Tk even automatically
added this handle to the window for you.
</p><p>
Platform conventions tend to evolve faster than long-lived open
source GUI toolkits. Mac OS X 10.7 did away with the size grip in the corner,
in favor of allowing resizing from any window edge, finally catching up with
the rest of the world.  Unless there's a pressing need to be visually compatible with 10+ year old 
operating systems, if you have a <code>sizegrip</code>  in your
application, it's probably best to remove it.
</p></div>




 <a name="text"></a><h2>Text</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/text.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/text.htm">Reference Manual</a></li>
</ul>

<p>A <b>text</b> widget provides users with an area so that they can enter multiple lines of text.
Text widgets are part of the classic Tk widgets, not the themed Tk widgets.<br>&nbsp;</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_text_all.png' alt='screen shot'><br />
Text widgets.</p>


<div class=fyi><p>Tk's text widget is, along with the canvas widget, one of two uber-powerful widgets that
provide amazingly deep but easily programmed features.  Text widgets have formed the basis
for full word processors, outliners, web browsers, and more.  We'll get into some of the
advanced stuff in a later chapter. Here, we'll show you how to use the
text widget to capture fairly simple, multi-line text input.	</p></div>



<div class=python>	<p>Text widgets are created using the <code><b>Text</b></code> class:</p>
  <pre>t = Text(<em>parent</em>, width=40, height=10)</pre></div>
<div class=tcl><p>Text widgets are created using the <code><b>tk::text</b></code> command:</p>
	<pre>tk::text .t -width 40 -height 10</pre></div>
<div class=ruby><p>Text widgets are created using the <code><b>TkText</b></code> class:</p>
	<pre>t = TkText.new(<em>parent</em>) {width 40; height 10}</pre></div>
<div class=perl><p>Text widgets are created using the <code><b>new_tk__text</b></code> method, a.k.a. <code><b>Tkx::tk__text</b></code>:
	<pre>$<em>parent</em>->new_tk__text(-width => 40, -height => 10);</pre></div>

<p>The <code>width</code> and <code>height</code> options specify the requested screen size of the text 
widget, in characters and rows, respectively.  The contents of the text can be arbitrarily large.
You can use the <code>wrap</code> configuration option to control how line wrapping is handled:
values are <code>none</code> (no wrapping, text may horizontally scroll), <code>char</code> (wrap at any
character), and <code>word</code> (wrapping will only occur at word boundaries).</p>

<p>A text widget can be disabled so that no editing can occur. Because text is not a themed widget,
the usual <code>state</code> and <code>instate</code> methods are not available.  Instead, use the
configuration option <code>state</code>, setting it to either <code>disabled</code> or <code>normal</code>.</p>

<div class=python><pre>txt['state'] = 'disabled'</pre></div>
<div class=tcl><pre>.txt configure -state disabled</pre></div>
<div class=ruby><pre>txt['state'] = 'disabled'</pre></div>
<div class=perl><pre>$txt->configure(-state => "disabled");</pre></div>


<p>Scrolling works the same way as in listboxes.  The <code>xscrollcommand</code> and <code>yscrollcommand</code>
configuration options attach the text widget to horizontal and/or vertical scrollbars,
and the <code>xview</code> and <code>yview</code> methods are called from scrollbars.
To ensure that a given line is visible (i.e., not scrolled out of view), you can use the <code>see <em>index</em></code>
method, where <code><em>index</em></code> is in the form <code><em>linenum.charnum</em></code>, e.g.,
<code>5.0</code> for the first (0-based) character of line 5 (1-based). </p>


<h3>Contents</h3>

<p>Text widgets do not have a linked variable associated with them like, for example, entry widgets do.
To retrieve the contents of the entire text widget, call the method <code>get 1.0 end</code>; the <code>1.0</code>
is an index into the text, and means the first character of the first line, and <code>end</code> is a shortcut
for the index of the last character in the last line.  Other indices could be provided to retrieve smaller ranges of
text if needed.</p>

  
<p>Text can be added to the widget using the <code>insert <em>index</em> <em>string</em></code> method; again <code><em>index</em></code>
is in the form <code><em>line.char</em></code> and marks the character before which text is inserted; use <code>end</code> 
to add text to the end of the widget.  You can delete a range of text using the <code>delete <em>start</em> <em>end</em></code>
method, where both <code><em>start</em></code> and <code><em>end</em></code> are text indices as already described.</p>

<p>We'll get into the text widget's many additional advanced features in a later chapter.</p>



 <a name="scale"></a><h2>Scale</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/scale.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_scale.htm">Reference Manual</a></li>
</ul>

<p>A <b>scale</b> widget allows users to choose a numeric value through direct manipulation.<br>&nbsp;</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_scale_all.png' alt='screen shot'><br />
Scale widgets.</p>


<div class=python><p>Scale widgets are created using the <code><b>ttk.Scale</b></code> class:</p>
	<pre>s = ttk.Scale(<em>parent</em>, orient=HORIZONTAL, length=200, from_=1.0, to=100.0)</pre>
	<div class=tip><p>Because 'from' is a reserved keyword in Python, we need to add a trailing underscore when using it as a configuration option.</p></div>
</div>
<div class=tcl><p>Scale widgets are created using the <code><b>ttk::scale</b></code> command:</p>
	<pre>ttk::scale .s -orient horizontal -length 200 -from 1.0 -to 100.0</pre></div>
<div class=ruby><p>Scale widgets are created using the <code><b>Tk::Tile::Scale</b></code> class:</p>
	<pre>s = Tk::Tile::Scale.new(<em>parent</em>) {orient 'horizontal'; length 200; from 1.0; to 100.0}</pre></div>
<div class=perl><p>Scale widgets are created using the <code><b>new_ttk__scale</b></code> method, a.k.a. <code><b>Tkx::ttk__scale</b></code>:
	<pre>$<em>parent</em>->new_ttk__scale(-orient => 'horizontal', -length => 200, -from => 1.0, -to => 100.0);</pre></div>

<p>The <code>orient</code> option may be either <code>horizontal</code> or <code>vertical</code>.  The <code>length</code>
option, which represents the longer axis of either horizontal or vertical scales, is specified in screen
units (e.g., pixels).  You should also define the range of the number that 
the scale allows users to choose; to do this, set a floating-point number for each of the 
<code>from</code> and <code>to</code> configuration options.</p>

<p>There are several different ways you can set the current value of the scale (which must be a floating-point
value between the <code>from</code> and <code>to</code> values).  
You can set (or read, to get the current value)
the scale's <code>value</code> configuration option.  You can link the scale to a variable using the <code>variable</code>
option.  Or, you can call the scale's <code>set <em>value</em></code> method to change the value, or the <code>get</code>
method to read the current value.</p>

<p>A <code>command</code> configuration option lets you specify a script to call whenever the
scale is changed.  Tk will append the current value of the scale as a parameter each time it
calls this script (we saw a similar thing with extra parameters being added to scrollbar callbacks).</p>

<div class=python><pre><em># label tied to the same variable as the scale, so auto-updates</em>
num = StringVar()
ttk.Label(root, textvariable=num).grid(column=0, row=0, sticky='we')

<em># label that we'll manually update via the scale's command callback</em>
manual = ttk.Label(root)
manual.grid(column=0, row=1, sticky='we')

def update_lbl(val):
   manual['text'] = "Scale at " + val

scale = ttk.Scale(root, orient='horizontal', length=200, from_=1.0, to=100.0, variable=num, command=update_lbl)
scale.grid(column=0, row=2, sticky='we')
scale.set(20)
</pre></div>
<div class=tcl><pre><em># label tied to the same variable as the scale, so auto-updates</em>
grid [ttk::label .auto -textvariable num] -column 0 -row 0 -sticky we

<em># label that we'll manually update via the scale's command callback</em>
grid [ttk::label .manual] -column 0 -row 1 -sticky we
proc update_lbl {val} {
   .manual configure -text "Scale at $val"
}

ttk::scale .scale -orient horizontal -length 200 -from 1.0 -to 100.0 -variable num -command update_lbl
grid .scale -column 0 -row 2 -sticky we 
.scale set 20
</pre></div>
<div class=ruby><pre><em># label tied to the same variable as the scale, so auto-updates</em>
num = TkVariable.new
Tk::Tile::Label.new(root) {textvariable num}.grid :column => 0, :row => 0, :sticky => 'we'

<em># label that we'll manually update via the scale's command callback</em>
$manual = Tk::Tile::Label.new(root)
$manual.grid :column => 0, :row => 1, :sticky => 'we'


def update_lbl(val)
   $manual['text'] = "Scale at " + val.to_s
end

scale = Tk::Tile::Scale.new(root) {orient 'horizontal'; length 200; from 1.0; to 100.0; variable num; command proc{|v| update_lbl v}}
scale.grid :column => 0, :row => 2, :sticky => 'we'
scale.set 20
</pre></div>
<div class=perl><pre><em># label tied to the same variable as the scale, so auto-updates</em>
$mw->new_ttk__label(-textvariable => \$num)->g_grid(-column => 0, -row => 0, -sticky => "we");

<em># label that we'll manually update via the scale's command callback</em>
$manual = $mw->new_ttk__label();
$manual->g_grid(-column => 0, -row => 1, -sticky => "we");

sub update_lbl {
   my ($val) = @_;
   $manual->configure(-text => "Scale x at ".$val);
}

$scale = $mw->new_ttk__scale(-orient => 'horizontal', -length => 200, -from => 1.0, -to => 100.0, 
        -variable => \$num, -command => sub {($v) = @_; update_lbl($v);});
$scale->g_grid(-column => 0, -row => 2, -sticky => 'we');
$scale->set(20);
</pre></div>

<p>As with other themed widgets, you can use the <code>state disabled</code>, <code>state !disabled</code>, and
<code>instate disabled</code> methods to prevent users from modifying the scale.</p>

<div class=tip><p>As the scale widget does not display the actual values, you may want to add those separately, e.g., using label widgets.</p></div>


 <a name="spinbox"></a><h2>Spinbox</h2>


<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/spinbox.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_spinbox.htm">Reference Manual</a></li>
</ul>

<p>A <b>spinbox</b> widget allows users to choose numbers (or, in fact, items from an arbitrary list).  It does
this by combining an entry-like widget showing the current value with a pair of small up/down arrows, which
can be used to step through the range of possible choices.</p>

<div class=tip><p>The themed spinbox was added in Tk 8.5.9 (released in 2010). If you must run an older version, there is a spinbox in the classic Tk widgets,
  though with a slightly different API.</p></div>
  


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_spinbox_all.png' alt='screen shot'><br />
Spinbox widgets.</p>


<div class=python><p>Spinbox widgets are created using the <code><b>ttk.Spinbox</b></code> class:</p>
	<pre>spinval = StringVar()<br>s = ttk.Spinbox(<em>parent</em>, from_=1.0, to=100.0, textvariable=spinval)</pre></div>
<div class=tcl><p>Spinbox widgets are created using the <code><b>ttk::spinbox</b></code> command:</p>
	<pre>ttk::spinbox .s -from 1.0 -to 100.0 -textvariable spinval</pre></div>
<div class=ruby><p>Spinbox widgets are created using the <code><b>Tk::Tile::Spinbox</b></code> class:</p>
	<pre>$spinval = TkVariable.new<br>s = Tk::Tile::Spinbox.new(<em>parent</em>) {from 1.0; to 100.0; textvariable $spinval}</pre></div>
<div class=perl><p>Spinbox widgets are created using the <code><b>new_ttk__spinbox</b></code> method, a.k.a. <code><b>Tkx::ttk__spinbox</b></code>:
	<pre>$<em>parent</em>->new_ttk__spinbox(-from => 1.0, -to => 100.0, -textvariable => \$spinval);</pre></div>

<p>Like scale widgets, spinboxes let user choose a number between a certain range
(specified using the <code>from</code> and <code>to</code> configuration options), 
though through a very different user interface.  You can also specify an <code>increment</code>, which controls how much the value changes every time you click
the up or down button. </p>

<p>Like a listbox or combobox, spinboxes can also be used to let users choose an item from an arbitrary list of strings;
these can be specified using the <code>values</code> configuration option. This works in the same way it does for comboboxes;
specifying a list of values will override to <code>from</code> and <code>to</code> settings.</p>

<p>In their default state, spinboxes allow users to select values either via the up and down buttons, or by typing them directly into the
  entry area that displays the current value. If you'd like to disable the latter feature, so that only the up and down buttons are available,
  you can set the <code>readonly</code> state flag. 
  
<div class=python><pre>s.state(['readonly'])</pre></div>
<div class=tcl><pre>.s state readonly</pre></div>
<div class=ruby><pre>s.state('readonly')</pre></div>
<div class=perl><pre>$s->state("readonly");</pre></div>
  
<p>Like other themed widgets, you can also disable spinboxes, via the <code>disabled</code> state flag, or check the state via the <code>instate</code> method.
  Spinboxes also support validation in the same manner as entry widgets, using the <code>validate</code> and <code>validatecommand</code>
  configuration options.</p>

<div class=tip><p>You might be puzzled about when to choose a scale, listbox, combobox, entry, or a spinbox. Often, several of 
these can be used for the same types of data.  The answer really depends on what you want users to
select, platform user interface conventions, and the role the value plays in your user interface.
</p><p>
For example, both a combobox and a spinbox take up fairly small amounts of space compared with a listbox.
They might make sense for a more peripheral setting. A more primary and prominent choice in a user interface may warrant the extra space a listbox
occupies.  Spinboxes don't make much sense when items don't have a natural and obvious ordering to them.  
Be careful about putting too many items in both comboboxes and spinboxes. 
This can make it more time consuming to select an item.</p></div>

<p>There is a boolean <code>wrap</code> option that determines whether 
the value should wrap around when it goes beyond the starting or ending values.  You can also specify a <code>width</code>
for the entry holding the current value of the spinbox.</p>

<p>Again there are choices as to how to set or get the current value in the spinbox.  Normally, you would specify a linked 
variable with the <code>textvariable</code> configuration option. As usual, any changes to the variable are reflected in the spinbox,
while any changes in the spinbox are reflected in the linked variable.  As well, the <code>set <em>value</em></code> and <code>get</code>
methods allow you to set or get the value directly.</p>

<p>Spinboxes generate virtual events when users press up (<code>&lt;&lt;Increment&gt;&gt;</code>) or down (<code>&lt;&lt;Decrement&gt;&gt;</code>).
  A <code>command</code> configuration option allows you to provide a callback that is invoked on any changes.</p>





 <a name="progressbar"></a><h2>Progressbar</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/progressbar.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_progressbar.htm">Reference Manual</a></li>
</ul>

<p>A <b>progressbar</b> widget provides feedback to users about the progress of
a lengthy operation.</p>

<p>In situations where you can estimate how long the operation will take to complete, you can display what fraction has
  already been completed. Otherwise, you can indicate the operation is continuing, but without suggesting how much longer
  it will take.</p>
  



<p class=picture>
<img class='border-0 img-fluid' src='../images/w_progressbar_all.png' alt='screen shot'><br />
Progressbar widgets.</p>


<div class=python>	<p>Progressbar widgets are created using the <code><b>ttk.Progressbar</b></code> class:</p>
	<pre>p = ttk.Progressbar(<em>parent</em>, orient=HORIZONTAL, length=200, mode='determinate')</pre></div>
<div class=tcl><p>Progressbar widgets are created using the <code><b>ttk::progressbar</b></code> command:</p>
	<pre>ttk::progressbar .p -orient horizontal -length 200 -mode determinate</pre></div>
<div class=ruby><p>Progressbar widgets are created using the <code><b>Tk::Tile::Progressbar</b></code> class:</p>
	<pre>p = Tk::Tile::Progressbar.new(<em>parent</em>) {orient 'horizontal'; length 200; mode 'determinate'}</pre></div>
<div class=perl><p>Progressbar widgets are created using the <code><b>new_ttk__progressbar</b></code> method, a.k.a. <code><b>Tkx::ttk__progressbar</b></code>:
	<pre>$<em>parent</em>->new_ttk__progressbar(-orient => 'horizontal', -length => 200, -mode => 'determinate');</pre></div>

<p>As with scale widgets, they should be given an orientation (<code>horizontal</code> or <code>vertical</code>) with the <code>orient</code> 
  configuration option, and can be given an optional <code>length</code>.
 The <code>mode</code> configuration option can be set to either <code>determinate</code>, where
the progressbar will indicate relative progress towards completion, or to <code>indeterminate</code>, where it
shows that the operation is still continuing but without showing relative progress.</p>


<h3>Determinate Progress</h3>

<p>To use determinate mode, estimate the total number of "steps" the operation will take to complete. This could be an
  amount of time but doesn't need to be. Provide this to the progressbar using the <code>maximum</code> configuration option.
It should be a floating-point number and defaults to <code>100.0</code> (i.e., each step is 1%).</p>

<p>As you proceed through the operation, tell the progressbar how far along you are with the <code>value</code> configuration option.  So this
would start at 0, and then count upwards to the maximum value you have set.</p>

<div class=fyi><p>There are two slight variations 
on this.  First, you can just store the current value for the progressbar in a variable linked to it by the
progressbar's <code>variable</code> configuration option; that way, when you change the variable, the progressbar
will update.  The other alternative is to call the progressbar's <code>step <em>?amount?</em></code> method. 
This increments the value by the given <code><em>amount</em></code> (defaults to 1.0).</p></div>


<h3>Indeterminate Progress</h3>

<p>Use indeterminate mode when you can't easily estimate how far along in a long-running task you actually are. However, you still want 
to provide feedback that the operation is continuing (and that your program hasn't crashed).  
At the start of the operation you'll just call the progressbar's <code>start</code> method. At the end of the
operation, call its <code>stop</code> method.  The progressbar will take care of the rest.</p>

<p>Unfortunately, "the progressbar will take care of the rest" isn't quite so simple. In fact, if you <code>start</code> the progressbar, call
  a function that takes several minutes to complete, and then <code>stop</code> the progressbar, your program will appear frozen the whole time,
  with the progressbar not updating. In fact, it will not likely appear onscreen at all. Yikes!</p>
  
<p>To learn why that is, and how to address it, the next chapter takes a deeper dive into Tk's event loop.</p>
  





<h1>Event Loop</h1>

<p>At the end of the last chapter, we explained how to use a progressbar to provide feedback to users about long-running
  operations.  The progressbar itself was simple: call it's <code>start</code> method, perform your operation, and then
  call it's <code>stop</code> method. Unfortunately, you learned that if you tried this, your application will most
  likely appear completely frozen.</p>
    
<p>To understand why, we need to revisit our discussion of event handling, way back in the Tk Concepts chapter.
As we've seen, after we construct an application's initial user interface, it enters the Tk event loop. In the event loop,
it continually processes events, pulled from the system event queue, usually dozens of times a second. It watches for mouse or keyboard events, invoking command callbacks and event bindings as needed.</p>

<p>Less obviously, all screen updates are processed only in the event loop. For example, you may change the text of a label widget.
However, that change doesn't appear onscreen immediately. Instead, the widget notifies Tk that it needs to be redrawn. Later on, in between processing
other events, Tk's event loop will ask the widget to redraw itself. <em>All drawing occurs only in the event loop.</em> The change <em>appears</em> to happen
immediately because the time between making the change to the widget and the actual redraw in the event loop is so small.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/eventloop.png' alt='screen shot'><br />
Event loop showing application callbacks and screen updates.</p>


 <a name="blocking"></a><h2>Blocking the Event Loop</h2>

<p>Where you run into problems is when the event loop is prevented from processing events for a lengthy period of time. Your application won't redraw
  or respond to events and will appear to be frozen. The event loop is said to be <em>blocked</em>. How can this happen?</p>

<p>Let's start by visualizing the event loop as an execution timeline. In a normal situation, each deviation from the event loop
  (callback, screen update) takes only a fraction of a second before returning control to the event loop.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/eventtimeline.png' alt='screen shot'><br />
Execution timeline for well-behaved event loop.</p>

<p>In our scenario, the whole thing probably got started from an event like a user pressing
  a button. So the event loop calls our application code to handle the event. Our code creates the progressbar, performs the (lengthy) operations, 
  and stops the progressbar. Only then does our code return control back to the event loop. No events have been processed in the meantime.
  No screen redrawing has occurred. They've just been piling up in the event queue.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/blocktimeline.png' alt='screen shot'><br />
Lengthy callback blocking the event loop.</p>



<p>To prevent blocking the event loop, it's essential that event handlers execute quickly and return control back to the event loop.</p>

<p>If you do have a long-running operation to perform, or anything like network I/O that could potentially take a long time, there are a few 
 different approaches you can take.</p>
 
 <div class=fyi><p>For the more technically-inclined, Tk uses a single-threaded, event-driven programming model. All the GUI code, the event loop, and your
   application run within the same thread. Because of this, any calls or computations that block event handlers are highly discouraged. 
   Some other GUI toolkits use different models that allow for blocking code, runs the GUI and event handlers in separate threads from 
   application code, etc. Attempting to shoehorn these models into Tk can be a recipe for
   frustration and lead to fragile and hacky code. If you respect Tk's model rather than try to fight with it, you won't run into problems.
 </p></div>
 
  
 <a name="timer"></a><h2>One Step at a Time</h2>

<p>If possible, the very best thing you can do is break your operation into very small steps, each of which can execute very quickly. You let the
  event loop be responsible for when the next step occurs. That way, the event loop continues to run, processing regular events,
  updating the screen, and, in between all that, calling your code to perform the next step of the operation.</p>
  
<p>To do this, we make use of <em>timer events</em>. Our program can ask the event loop to generate one of these events at some
  time in the future. As part of its regular work, when the event loop reaches that time, it will call back into our code to handle the event. Our code
  would perform the next step of the operation. It then schedules another timer event for the <em>next</em> step of the operation and immediately
  returns control back to the event loop.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/aftertimeline.png' alt='screen shot'><br />
Breaking up a large operation into small steps tied together with timer events.</p>


  <p>Tk's <code>after</code> command can be used to generate timer events. You provide the number of milliseconds to wait until the event should be fired.
  It may happen later than that if Tk is busy processing other events but won't happen before that.
  You can also ask that an <code>idle</code> event be generated; it will fire when no other events in the queue need to be processed.
  (Tk's screen updates and redraws occur in the context of idle events.) You can find more details on <code>after</code> in 
  the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TclCmd/after.htm">reference manual</a>.</p>
  
  
<p>In the following example, we'll perform a long operation that is broken up into 20 small steps. While this operation is being performed,
  we'll update a progressbar, and also allow users to interrupt the operation. </p> 

<div class=python><pre>def start():
    b.configure(text='Stop', command=stop)
    l['text'] = 'Working...'
    <b>global interrupt; interrupt = False</b>
    <b>root.after(1, step)</b>
    
def stop():
    <b>global interrupt; interrupt = True</b>
    
def step(count=0):
    p['value'] = count
    <b>if interrupt:</b>
        <b>result(None)</b>
        return
    <b>root.after(100)</b>  <em># next step in our operation; don't take too long!</em>
    <b>if count == 20:</b>  <em># done!</em>
        <b>result(42)</b>
        return
    <b>root.after(1, lambda: step(count+1))</b>
    
def result(answer):
    p['value'] = 0
    b.configure(text='Start!', command=start)
    l['text'] = "Answer: " + str(answer) if answer else "No Answer"
    
f = ttk.Frame(root); f.grid()
b = ttk.Button(f, text="Start!", command=start); b.grid(column=1, row=0, padx=5, pady=5)
l = ttk.Label(f, text="No Answer"); l.grid(column=0, row=0, padx=5, pady=5)
p = ttk.Progressbar(f, orient="horizontal", mode="determinate", maximum=20); 
p.grid(column=0, row=1, padx=5, pady=5)</pre></div>  
<div class=tcl><pre>proc start {} {
    .f.b configure -text Stop -command stop
    .f.l configure -text "Working..."
    <b>set ::interrupt 0</b>
    <b>after 1 step</b>
}
proc stop {} {<b>set ::interrupt 1</b>}

proc step {{count 0}} {
    .f.p configure -value $count
    <b>if {$::interrupt} {result ""; return}</b>
    <b>after 100</b>  <em>; # next step in our operation; don't take too long!</em>
    <b>if {$count==20} {result 42; return}</b>  <em>; # done!</em>
    <b>after 1 step [incr count]</b>
}

proc result {{answer ""}} {
    .f.p configure -value 0
    .f.b configure -text "Start!" -command start
    .f.l configure -text [expr {$answer!="" ? "Answer: $answer" : "No Answer"}]
}

grid [ttk::frame .f]
grid [ttk::button .f.b -text "Start!" -command start] -column 1 -row 0 -padx 5 -pady 5
grid [ttk::label .f.l -text "No Answer"] -column 0 -row 0 -padx 5 -pady 5
grid [ttk::progressbar .f.p -orient horizontal -mode determinate -maximum 20] -column 0 -row 1 -padx 5 -pady 5</pre></div>  
<div class=ruby><pre>$f = Tk::Tile::Frame.new($root); $f.grid
$b = Tk::Tile::Button.new($f) {text "Start!"; command proc{start()}}; $b.grid :column => 1, :row => 0, :padx => 5, :pady => 5
$l = Tk::Tile::Label.new($f) {text "No Answer"}; $l.grid :column => 0, :row => 0, :padx => 5, :pady => 5
$p = Tk::Tile::Progressbar.new($f) {orient "horizontal"; mode "determinate"; maximum 20}
$p.grid :column => 0, :row => 1, :padx => 5, :pady => 5

def start
  $b.configure(:text => 'Stop', :command => proc{stop()})
  $l[:text] = "Working..."
  <b>$interrupt = false</b>
  <b>TkTimer.start(1, 1) {step(0)}</b>
end

def stop
  <b>$interrupt = true</b>
end

def step(count)
  $p[:value] = count
  <b>if $interrupt then result('');</b> return; end
  <b>sleep 0.1</b>  <em># next step in our operation; don't take too long!</em>
  <b>if count == 20 then result(42);</b> return; end   # done!
  <b>TkTimer.start(1,1) {step(count+1)}</b>
end

def result(answer)
  $p[:value] = 0
  $b.configure :text => "Start!", :command => proc{start()}
  $l[:text] = answer ? "Answer: " + answer.to_s : "No Answer"
end
</pre>
<div class=fyi><p>Ruby/Tk provides the <code>TkTimer</code> class as a front end to Tk's <code>after</code> command. The first argument to the
  constructor is the number of milliseconds for the timer event, and the second is the number of times the timer should repeat.
  There's not a nice interface to the blocking variant of Tk's <code>after</code> command, so we use <code>sleep</code> instead.</p></div>

</div>  
<div class=perl><pre>our $interrupt;
sub start {
    $b->configure(-text => "Stop", -command => sub{stop()});
    $l->configure(-text => "Working...");
    <b>$interrupt = 0;</b>
    <b>Tkx::after(1, sub{step()});</b>
}
    
sub stop {
    <b>$interrupt = 1;</b>
}
    
sub step {
    my ($count) = @_;
    $count //= 0;
    $p->configure(-value => $count);
    <b>if ($interrupt) {result(""); return;}</b>
    <b>Tkx::after(100);</b>  <em># next step in our operation; don't take too long!</em>
    <b>if ($count==20) {result(42); return;}</b>  <em># done!</em>
    <b>Tkx::after(1, sub{step($count+1)});</b>
}
    
sub result {
    my ($answer) = @_;
    $p->configure(-value => 0);
    $b->configure(-text => "Start!", -command => sub{start()});
    $l->configure(-text => $answer ? "Answer: " . $answer : "No Answer");
}
    
our $f = $mw->new_ttk__frame; $f->g_grid();
our $b = $f->new_ttk__button(-text => "Start!", -command => sub{start()}); $b->g_grid(-column => 1, -row => 0, -padx => 5, -pady => 5);
our $l = $f->new_ttk__label(-text => "No Answer"); $l->g_grid(-column => 0, -row => 0, -padx => 5, -pady => 5);
our $p = $f->new_ttk__progressbar(-orient => "horizontal", -mode => "determinate", -maximum => 20); 
$p->g_grid(-column => 0, -row => 1, -padx => 5, -pady => 5);
</pre></div>  
  
<div class=fyi><p>To interrupt the process, we've just set a global variable, which is checked next time the timer event fires.
  Another option would be to cancel the pending timer event. When we create the timer event, it returns an id number to
  uniquely identify the pending timer. To cancel it, we can call the <code>after_cancel</code> method, passing it that
  unique id.
</p><p>
  You'll also note that we used a blocking form of <code>after</code> to simulate performing our operation. Rather than
  scheduling an event to occur in future, the call blocks, waiting a given time before returning. It works the same
  as a <code>sleep</code> system call.
</p></div>
  
  
 <a name="asyncio"></a><h2>Asynchronous I/O</h2>

<p>Timer events take care of breaking up a long-running computation, where you know that each step can be guaranteed to complete quickly so that
  your handler will return to the event loop. What if you have an operation that may not complete quickly? This can happen when you make a variety
  of calls to the operating system. The most common is when we're doing some kind of I/O, whether writing a file, communicating with a database, or
  retrieving data from a remote web server.</p>

<p>Most I/O calls are <em>blocking</em>. They don't return until the operation completes (or fails). What we want to use instead are <em>non-blocking</em>
  or <em>asynchronous</em> I/O calls. When you make an asynchronous I/O call, it returns immediately, before the operation is completed. Your code
  can continue running, or in this case, return back to the event loop. Later on, when the I/O operation completes, your program is notified and can
  process the result of the I/O operation.</p>
  
<p>If this sounds like treating I/O as another type of event, you're exactly right. In fact, it's also called <em>event-driven I/O</em>.

<div class=tcl><p>In Tcl, asynchronous I/O is managed through the <code>fileeevent</code> command, which uses the same event loop used by Tk, timers, etc.
  It's fully detailed in the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TclCmd/fileevent.htm">reference manual</a>. It's used extensively in other parts of Tcl, such as
  the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TclCmd/http.htm">http package</a>, and by third-party packages.</p></div>
  
<div class=python>
<p>In Python, asynchronous I/O is provided through the <code>asyncio</code> module, as well as many other modules that are
  layered on top of it.</p>
<p>All asyncio applications rely heavily on an event loop.  How convenient, Tkinter has a great event loop! Unfortunately,
  the asyncio event loop and the Tkinter event loop are not the same. You can't really have both of them running at the same
  time, at least within the same thread (well, you can have one call repeatedly into the other, but it's pretty hacky and fragile).</p>
<p>My recommendation: keep Tkinter in the main thread, and spin off your asyncio event loops in another thread.</p>
<p>Your application code, running in the main thread, may need to coordinate with the asyncio event loop running in the other thread.
  You can call a function running in the asyncio event loop thread (even from the Tkinter event loop, e.g., in a widget callback) 
  using the asyncio <code>call_soon_threadsafe</code> method. To call Tkinter from the asyncio event loop, keep reading.</p>
    
</div>


 <a name="threads"></a><h2>Threads or Processes</h2>

<p>Sometimes it's either not possible or practical to break up a long-running computation into discrete pieces that each run quickly. Or you may be 
using a library that doesn't support asynchronous operations. Or, like Python's <code>asyncio</code>, it doesn't play nice with Tk's event loop.
In cases like these, to keep your Tk GUI responsive, you'll need to move those 
time-consuming operations or library calls out of your event handlers and run them somewhere else. Threads, or even other processes, can help with that.</p>

<p>Running tasks in threads, communicating with them, etc. is beyond the scope of this tutorial. 
  However, there are some restrictions on using Tk with threads that you should be aware of.
  The main rule is that you must only make Tk calls from the thread where you loaded Tk. </p>
  
<div class=python>
  <p>Tkinter goes to great lengths internally so you make Tkinter calls from multiple threads. It routes them to the
    main thread (the one that created the Tk instance). It mostly works, but not always. Despite all it tries to do, I highly recommend
    you make all Tkinter calls from a single thread.</p>
  <p>If you need to communicate from another thread to the thread running Tkinter, keep it as simple as possible. Use <code>event_generate</code>
    to post a virtual event to the Tkinter event queue, and then <code>bind</code> to that event in your code.</p>
</div>
  
<p>It can be even more complicated. The Tcl/Tk libraries can be built either with or without thread support. 
  If you have more than one thread in your application, make sure you're running in a threaded build. If you're unsure, check the
  Tcl variable <code>tcl_platform(threaded)</code>; it should be <code>1</code>, not <code>0</code>.

<div class=python><pre>&gt;&gt;&gt; <b>tkinter.Tcl().eval('set tcl_platform(threaded)')</b></pre></div>
<div class=tcl><pre>% <b>set tcl_platform(threaded)</b></pre></div>
<div class=ruby><pre>&gt;&gt; <b>TclTkIp.new._eval('set tcl_platform(threaded)')</b></pre></div>
<div class=perl><pre>Perl&gt; <b>Tkx::eval("set tcl_platform(threaded)")</b></pre></div>

  <div class=fyi><p>Most everyone should be running threaded builds. The ability to create non-threaded builds in Tcl/Tk is likely to go away in future.
    If you're using a non-threaded build with threaded code, consider this a bug in your application, not a challenge to make it work.</p></div>


 <a name="nested"></a><h2>Nested Event Processing</h2>

<p>The previous three approaches are the correct ways to handle long-running operations while still keeping you Tk GUI responsive. What they have in
  common is a single event loop that continuously processes events of all kinds. That event loop will call event handlers in your application code,
  which do their thing and quickly return.</p>
  
<p>There is one other way. Within your long-running operation, you can invoke the event loop to process a bunch of events. You can do this with a single
  command, <code>update</code>. There's no messing around with timer events or asynchronous I/O.  Instead, you just sprinkle some <code>update</code> calls
  throughout your operation. If you want to only keep the screen redrawing but not process other events, there's even an option for that (<code>update_idletasks</code>).</p>
  
<p>This approach is seductively easy. And if you're lucky, it might work. At least for a little while. But sooner or later, you're going to run into
  serious difficulties trying to do things that way. Something won't be updating, event handlers aren't getting called that should be, events are going
  missing or being fired out of order, or worse. You'll turn your program's logic inside out and tear your hair out trying to make it work again.</p>
  
<div class=fyi><p>When you use <code>update</code>, you're not returning control back to the running event loop. You're effectively starting a new event loop nested
  within the existing one. Remember, the event loop follows a single thread of execution: no threads, no coroutines. If you're not careful, you're going
  to end up with event loops called from within event loops called from... well, you get the idea. If you even realize you're doing this, unwinding
  the event loops (each of which may have different conditions to terminate it) will be an interesting exercise. The reality won't match with your mental model of
  a simple event loop dispatching events one at a time, independent of every other event. It's a classic example of fighting against Tk's model.
  In very specific circumstances, it's possible to make it work. In practice, you're asking for trouble. Don't say you haven't been warned...
  
  <p class=picture>
<img class='border-0 img-fluid' src='../images/nestedeventloop.png' alt='screen shot'><br />
Nested event loops... this way madness lies.</p>
  
</p></div>




<h1>Menus</h1>

<p>This chapter describes how to handle menubars and popup menus in Tk.
For a polished application, these are areas you particularly want to pay attention to.
Menus need special care if you want your application to fit in with other
applications on your users' platform.	</p>

<p>Speaking of which, the recommended way to figure out which platform you're running on is:</p>

<div class=python><pre><em>root</em>.tk.call('tk', 'windowingsystem')     <em># returns x11, win32 or aqua</em></pre></div>
<div class=tcl><pre>tk windowingsystem;  <em># returns x11, win32 or aqua</em></pre></div>
<div class=ruby><pre>Tk.windowingsystem;  <em># returns x11, win32 or aqua</em></pre></div>
<div class=perl><pre>Tkx::tk_windowingsystem();   <em># returns x11, win32 or aqua</em></pre></div>

<div class=tip><p>Tkinter does not provide a direct equivalent to this call.
However, it is possible to directly execute an arbitrary Tcl-based Tk command,
using the <code>tk.call()</code> method available on any Tkinter widget. Here, we're invoking the
Tcl/Tk command <code>tk windowingsystem</code>.</p></div></div>

<div class=upgrade><p>This is more useful than examining global variables like <code>tcl_platform</code> or
<code>sys.platform</code>, and older checks that used these methods should be reviewed.  While
in the olden days, there was a pretty good correlation between platform and windowing system,
it's less true today.  For example, if your platform is identified on Unix, that might mean
Linux under X11, macOS under Aqua, or even macOS under X11.</p></div>


 <a name="menubars"></a><h2>Menubars</h2>

<p>In this section, we'll look at menubars: how to create them, what goes in them, how they're used,
etc.  </p>

<p>Properly designing a menubar and its set of menus is beyond the scope of this tutorial. However,
if you're creating an application for someone other than yourself, here is a bit of advice.
First, if you find yourself with many menus, very long menus, or
deeply nested menus, you may need to rethink how your user interface is organized. Second, many
people use the menus to explore what the program can do, particularly when they're first learning
it, so try to ensure major features are accessible by the menus.  Finally, for each platform you're
targeting, become familiar with how applications use menus, and consult the platform's human interface
guidelines for full details about design, terminology, shortcuts, and much more.  This is an area
you will likely have to customize for each platform.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/menubar_all.png' alt='screen shot'><br />
Menubars.</p>


<div class=fyi><p>You'll notice on some recent Linux distributions that many 
applications show their menus at the top of the screen when active,
rather than in the window itself. Tk does not yet support this style
of menus.</p></div>

<h3>Menu Widgets and Hierarchy</h3>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/menu.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/menu.htm">Reference Manual</a></li>
</ul>

<p>Menus are implemented as widgets in Tk, just like buttons and entries. 
  Each menu widget consists of a number of different <em>items</em> in the menu.  
Items have various attributes, such as the text to display
for the item, a keyboard accelerator, and a command to invoke.   </p>
    
<p>Menus are arranged in a hierarchy. The menubar is itself a menu widget. 
  It has several items ("File," "Edit," etc.), each of which is a submenu containing more items.
These items can include things like the "Open..." command in a "File" menu, but also separators between other items.
It can even have items that open up their own submenu (so-called <em>cascading</em> menus).
As you'd expect from other things you've seen already in Tk, anytime you have a submenu, it must be created as a child
of its parent menu.</p>

<p>Menus are part of the classic Tk widgets; there is not presently a menu in the themed Tk widget set.</p>


<h3>Before you Start</h3>

<p>It's essential to put the following line in your application somewhere before you start creating
menus.</p>

<div class=python><pre><em>root</em>.option_add('*tearOff', FALSE)</pre></div>
<div class=tcl><pre>option add *tearOff 0</pre></div>
<div class=ruby><pre>TkOption.add '*tearOff', 0</pre></div>
<div class=perl><pre>Tkx::option_add("*tearOff", 0);</pre></div>

<p>Without it, each of your menus (on Windows and X11) will start with what looks like a dashed
line and allows you to "tear off" the menu, so it appears in its own window.  You should eliminate
tear-off menus from your application as they're not a part of any modern user interface style.</p>

<div class=upgrade><p>This is a throw-back to the Motif-style X11 that Tk's original look and feel were based on.
Get rid of them unless your application is designed to run only on that old box collecting dust in the basement.
We'll all look forward to a future version of Tk where this misguided paean to backward compatibility
is removed.
</p><p>
While on the topic of ancient history, the <code>option_add</code> bit uses the <em>option database</em>.
On X11 systems, this provided a standardized way to customize certain elements of user interfaces through text-based
configuration files. It's no longer used today. Older Tk programs may use the <code>option</code> command internally to
separate style configuration options from widget creation code. This all pre-dated themed Tk styles, which should be used
for that purpose today. However, it's somehow fitting to use the obsolete option database to automatically remove the obsolete tear-off menus.
</p></div>


<h3>Creating a Menubar</h3>

<p>In Tk, menubars are associated with individual windows; each toplevel window can have at most one
menubar.  On Windows and many X11 window managers, this is visually obvious, as the menus are part of each window,
sitting just below the title bar at the top.  </p>

<p>On macOS, though, there is a single menubar along the top of the screen, shared by each window.
As far as your Tk program is concerned, each window still does have its own menubar. As you switch
between windows, Tk ensures that the correct menubar is displayed.  If you don't specify a menubar for a particular window, 
Tk will use the menubar associated with the root window; you'll have noticed by now that this
is automatically created for you when your Tk application starts.</p>

<div class=tip><p>Because <em>all</em> windows have a menubar on macOS, it's important to 
  define one, either for each window or a fallback menubar for the root window.  Otherwise,
you'll end up with the "built-in" menubar, which contains menus that are only intended for
typing commands directly into the interpreter.</p></div>

<p>To create a menubar for a window, first, create a menu widget. Then, use the
window's <code>menu</code> configuration option to attach the menu widget to the window.</p>

<div class=python><pre>win = Toplevel(<em>root</em>)
menubar = Menu(win)
win['menu'] = menubar</pre></div>
<div class=tcl><pre>toplevel .win
menu .win.menubar
.win configure -menu .win.menubar</pre></div>
<div class=ruby><pre>win = TkToplevel.new(root)
menubar = TkMenu.new(win)
win['menu'] = menubar</pre></div>
<div class=perl><pre>$w = $mw->new_toplevel;
$m = $w->new_menu;
$w->configure(-menu => $m);</pre></div>

<div class=tip><p>
You can use the same menubar for more than one window.
In other words, you can specify the same menubar as the <code>menu</code> configuration option for several toplevel windows.
This is particularly useful on Windows and X11, where you may want a window
to include a menu, but don't necessarily need to juggle different menus in
your application. However, if the contents or state of menu items
depends on what's going on in the active window, you'll have to manage this yourself.
</p></div>


<div class=upgrade><p>This is truly ancient history, but menubars used to be implemented by creating a frame widget
containing the menu items and packing it into the top of the window like any
other widget.  Hopefully, you don't have any code or documentation that still does this.</p></div>


<h3>Adding Menus</h3>

<p>We now have a menubar, but that's pretty useless without some menus to go in it.  
So again, we'll create a menu widget for each menu, each one a child of the menubar. We'll then add them all to the menubar.</p>

<div class=python><pre>menubar = Menu(<em>parent</em>)
menu_file = Menu(menubar)
menu_edit = Menu(menubar)
menubar.add_cascade(menu=menu_file, label='File')
menubar.add_cascade(menu=menu_edit, label='Edit')
</pre></div>
<div class=tcl><pre>
set m .win.menubar
menu $m.file
menu $m.edit
$m add cascade -menu $m.file -label File
$m add cascade -menu $m.edit -label Edit
</pre></div>
<div class=ruby><pre>
file = TkMenu.new(menubar)
edit = TkMenu.new(menubar)
menubar.add :cascade, :menu => file, :label => 'File'
menubar.add :cascade, :menu => edit, :label => 'Edit'
</pre></div>
<div class=perl><pre>$m = $w->new_menu;
$file = $m->new_menu;
$edit = $m->new_menu;
$m->add_cascade(-menu => $file, -label => "File");
$m->add_cascade(-menu => $edit, -label => "Edit");</pre></div>

<div class=fyi><p>The <code>add_cascade</code> method adds a menu item, which itself is a menu (a submenu).</p></div>

<h3>Adding Menu Items</h3>

<p>Now that we have a couple of menus in our menubar, we can add a few items to each menu.</p>

<h4>Command Items</h4>

<p>Regular menu items are called <code>command</code> items in Tk. We'll see some other types of menu items shortly.
Notice that menu items are part of the menu itself; we don't have to create a separate menu widget for each one (submenus being the exception).</p>

<div class=python><pre>menu_file = Menu(menubarmenu_file.add_command(label='New', command=newFile)
menu_file.add_command(label='Open...', command=openFile)
menu_file.add_command(label='Close', command=closeFile)</pre></div>
<div class=tcl><pre>
$m.file add command -label "New" -command "newFile"	
$m.file add command -label "Open..." -command "openFile"
$m.file add command -label "Close" -command "closeFile"	
</pre></div>
<div class=ruby><pre>
file.add :command, :label => 'New', :command => proc{newFile}
file.add :command, :label => 'Open...', :command => proc{openFile}
file.add :command, :label => 'Close', :command => proc{closeFile}
</pre></div>
<div class=perl><pre>$file->add_command(-label => "New", -command => sub {newFile()});
$file->add_command(-label => "Open...", -command => sub {openFile()});
$file->add_command(-label => "Close", -command => sub {closeFile()});</pre></div>

<div class=fyi><p>On macOS, the ellipsis ("...") is actually a special character,
more tightly spaced than three periods in a row.  Tk takes care of substituting this
character for you automatically.</p></div>

<p>Each menu item has associated with it several configuration options, analogous to widget configuration options.
Each type of menu item has a different set of available options.  Cascade
menu items have a <code>menu</code> option used to specify the submenu, command menu items
have a <code>command</code> option to specify the command to invoke when the item is
chosen. Both have a <code>label</code> option to specify the text to display for the item.</p>

<h4>Submenus</h4>

<p>We've already seen <code>cascade</code> menu items used to add a menu to a menubar.
Not surprisingly, if you want to add a submenu to an existing menu, you also use a 
<code>cascade</code> menu item in exactly the same way. You might use this to build
build a "recent files" submenu, for example. </p>

<div class=python><pre>menu_recent = Menu(menu_file)
menu_file.add_cascade(menu=menu_recent, label='Open Recent')
for f in recent_files:
    menu_recent.add_command(label=os.path.basename(f), command=lambda: openFile(f))
</pre></div>
<div class=tcl><pre>menu $m.file.recent
$m.file add cascade -menu $m.file.recent -label "Open Recent"
foreach f $recent_files {
    $m.file.recent add command -label [file tail $f] -command "openFile $f"
}</pre></div>
<div class=ruby><pre>recent = TkMenu.new(file)
file.add :cascade, :menu => recent, :label => 'Open Recent'
recent_files.each do |f|
  recent.add :command, :label => File.basename(f), :command => proc{openFile(f)}
end
</pre></div>
<div class=perl><pre>$recent = $file->new_menu;
$file->add_cascade(-menu => $recent, -label => "Open Recent");
foreach $f (@recent_files) {
    $recent->add_command(-label => basename($f), -command => [\&openFile, $f]);
}
</pre></div>


<h4>Separators</h4>

<p>A third type of menu item is the <code>separator</code>, which produces the dividing line
you often see between different menu items.</p>

<div class=python><pre>menu_file.add_separator()</pre></div>
<div class=tcl><pre>$m.file add separator</pre></div>
<div class=ruby><pre>file.add :separator</pre></div>
<div class=perl><pre>$file->add_separator();</pre></div>

<h4>Checkbutton and Radiobutton Items</h4>

<p>Finally, there are also <code>checkbutton</code> and <code>radiobutton</code> menu items
that behave analogously to checkbutton and radiobutton widgets.  These menu items
have a variable associated with them. Depending on its value,
an indicator (i.e., checkmark or selected radiobutton) may be shown next to its label.</p>

<div class=python><pre>check = StringVar()
menu_file.add_checkbutton(label='Check', variable=check, onvalue=1, offvalue=0)
radio = StringVar()
menu_file.add_radiobutton(label='One', variable=radio, value=1)
menu_file.add_radiobutton(label='Two', variable=radio, value=2)
</pre></div>
<div class=tcl><pre>$m.file add checkbutton -label Check -variable check -onvalue 1 -offvalue 0
$m.file add radiobutton -label One -variable radio -value 1
$m.file add radiobutton -label Two -variable radio -value 2</pre></div>
<div class=ruby><pre>check = TkVariable.new
file.add :checkbutton, :label => 'Check', :variable => check, :onvalue => 1, :offvalue => 0
radio = TkVariable.new
file.add :radiobutton, :label => 'One', :variable => radio, :value => 1
file.add :radiobutton, :label => 'Two', :variable => radio, :value => 2</pre></div>
<div class=perl><pre>$file->add_checkbutton(-label => "Check", -variable => \$check, -onvalue => 1, -offvalue => 0);
$file->add_radiobutton(-label => "One", -variable => \$radio, -value => 1);
$file->add_radiobutton(-label => "Two", -variable => \$radio, -value => 2);</pre></div>

<p>When a user selects a checkbutton item that is not already checked, it sets the
associated variable to the value in <code>onvalue</code>. Selecting an item that
is already checked sets it to the value in <code>offvalue</code>.  Selecting a radiobutton
item sets the associated variable to the value in <code>value</code>.  Both types of items
also react to any changes you make to the associated variable.</p>

<p>Like command items, checkbutton and radiobutton menu items support a <code>command</code>
configuration option that is invoked when the menu item is chosen. The associated
variable and the menu item's state are updated before the callback is invoked.</p>

<div class=tip><p>Radiobutton menu items are not part of the Windows or macOS human interface guidelines.
On those platforms, the item's indicator is a checkmark, as it would
be for a checkbutton item.  The semantics still work. It's a good way to select
between multiple items since it will show one of them selected (checked).</p></div>

<h3>Manipulating Menu Items</h3>

<p>As well as adding items to the end of menus, you can also insert them in the middle of menus
via the <code>insert <em>index</em> <em>type</em> <em>?option</em> <em>value...?</em></code> method; here 
<code><em>index</em></code> is the position (0..n-1) of the item you want to insert before.  
You can also delete one or more menu items susing the <code>delete <em>index</em> <em>?endidx?</em></code> method.</p>

<div class=python><pre>menu_recent.delete(0, 'end')</pre></div>
<div class=tcl><pre>$m.file.recent delete 0 end</pre></div>
<div class=ruby><pre>recent.delete 0, 'end'</pre></div>
<div class=perl><pre>$recent->delete(0, 'end');</pre></div>

<p>Like most everything in Tk, you can look at or change the value of an item's options at any time.
Items are referred to via an <em>index</em>.  Usually, this is a number (<code>0..n-1</code>) indicating the
item's position in the menu. You can also specify the label of the menu item (or, in fact, a 
"glob-style" pattern to match against the item's label).</p>

<div class=python><pre>
print( menu_file.entrycget(0, 'label')) <em># get label of top entry in menu</em>
print( menu_file.entryconfigure(0))     <em># show all options for an item</em></pre></div>
<div class=tcl><pre>
puts [$m.file entrycget 0 -label];  <em># get label of top entry in menu</em>
puts [$m.file entryconfigure 0];    <em># show all options for an item</em></pre></div>
<div class=ruby><pre>
puts( file.entrycget 0, :state ); <em># get label of top entry in menu</em>
puts( file.entryconfiginfo 0 );   <em># show all options for an item</em></pre></div>
<div class=perl><pre>
print $file->entrycget(0, -label);  <em># get label of top entry in menu</em>
print $file->entryconfigure(0);     <em># show all options for an item</em></pre></div>

<h4>State</h4>

<p>You can disable a menu item so that users cannot select it.  This can be done
via the <code>state</code> option, setting it to the value <code>disabled</code>. Use a value
of <code>normal</code> to re-enable the item.</p>

<p>Menus should always reflect the current state of your application. If a menu item is not 
  presently relevant (e.g., the "Copy" item is only applicable if something in your application is selected),
  you should disable it. When your application state changes so that the item is applicable,
  make sure to enable it.</p>

<div class=python><pre>menu_file.entryconfigure('Close', state=DISABLED)</pre></div>
<div class=tcl><pre>$m.file entryconfigure Close -state disabled</pre></div>
<div class=ruby><pre>file.entryconfigure 'Close', :state => 'disabled'</pre></div>
<div class=perl><pre>$file->entryconfigure("Close", -state => "disabled");</pre></div>

<p>Sometimes you may have menu items whose name changes in response to application state changes,
  rather than the menu item being disabled. For example, A web browser might have a menu item that changes
  between "Show Bookmarks" and "Hide Bookmarks" as a bookmarks pane is hidden or displayed.</p>
  
<div class=python><pre>menu_bookmarks.entryconfigure(3, label="Hide Bookmarks")</pre></div>
<div class=tcl><pre>$m.bookmarks entryconfigure 3 -label "Hide Bookmarks"</pre></div>
<div class=ruby><pre>bookmarks.entryconfigure 3, :label => 'Hide Bookmarks'</pre></div>
<div class=perl><pre>$bookmarks->entryconfigure(3, -label => "Hide Bookmarks");</pre></div>

<div class=tip><p>As your program grows complex, it's easy to miss enabling or disabling some items.
  One strategy is to centralize all the menu state changes in one routine. Whenever there is a state
  change in your application, it should call this routine. It will examine the current state and
  update menus accordingly. The same code can also handle toolbars, status bars, or other user
  interface components.</p></div>



<h4>Accelerator Keys</h4>

<p>The <code>accelerator</code> option is used to indicate a keyboard equivalent that corresponds to a menu item.
This does not actually <em>create</em> the accelerator, but only displays it next to the menu item.  
You still need to create an event binding for the accelerator yourself.</p>

<div class=tip><p>
Remember that event bindings can be set on individual widgets, all widgets of a certain
type, the toplevel window containing the widget you're interested in, or the application
as a whole.  As menu bars are associated with individual windows, the event
bindings you create will usually be on the toplevel window the menu is associated with.</p></div>

<p>Accelerators are very platform-specific, not only in terms of which keys are used for
what operation, but what modifier keys are used for menu accelerators (e.g., on macOS,
it is the "Command" key, on Windows and X11, it is usually the "Control" key).  
Examples of valid accelerator options are <code>Command-N</code>, <code>Shift+Ctrl+X</code>, and 
<code>Command-Option-B</code>.  Commonly used modifiers include <code>Control</code>, <code>Ctrl</code>, <code>Option</code>, 
<code>Opt</code>, <code>Alt</code>, <code>Shift</code>, "<code>Command</code>, <code>Cmd</code>, and <code>Meta</code>.  </p>

<div class=fyi><p>On macOS, modifier names are automatically mapped to the different modifier icons that appear in menus, i.e.,
  <code>Shift</code>  &#8658; &#8679;, <code>Command</code> &#8658; &#8984;, <code>Control</code> &#8658; &#8963;, and <code>Option</code> &#8658; &#8997;.</p></div>


<div class=python><pre>m_edit.entryconfigure('Paste', accelerator='Command+V')</pre></div>
<div class=tcl><pre>$m.edit entryconfigure "Paste" -accelerator "Command+V"</pre></div>
<div class=ruby><pre>edit.entryconfigure "Paste", :accelerator => "Command+V"</pre></div>
<div class=perl><pre>$edit->entryconfigure("Paste", -accelerator => "Command+V");</pre></div>


<h4>Underline</h4>

<p>All platforms support keyboard traversal of the menubar via the arrow keys. On Windows
and X11, you can also use other keys to jump to particular menus or menu items.  The keys
that trigger these jumps are indicated by an underlined letter in the menu item's label.
To add one of these to a menu item, use the <code>underline</code>
configuration option for the item.  Its value should be the index of the
character you'd like underlined (from 0 to the length of the string - 1). Unlike with 
accelerator keys, the menu will watch for the keystroke, so no separate event binding is needed.</p>

<div class=python><pre>m.add_command(label='Path Browser', underline=5)  <em># underline "B"</em></pre></div>
<div class=tcl><pre>$m add command -label "Path Browser" -underline 5" <em># underline "B"</em></pre></div>
<div class=ruby><pre>m.add :command, :label => 'Path Browser', :underine => 5  <em># underline "B"</em></pre></div>
<div class=perl><pre>$m->add_command(-label => "Path Browser", -underline => 5);  <em># underline "B"</em></pre></div>



<h4>Images</h4>

<p>It is also possible to use images in menu items, either beside the menu item's label, or
replacing it altogether.  To do this, use the <code>image</code> and <code>compound</code>
options, which work just like in label widgets.  The value for <code>image</code> must be
a Tk image object, while <code>compound</code> can have the values <code>bottom</code>, 
<code>center</code>, <code>left</code>, <code>right</code>, <code>top</code>, or <code>none</code>.</p>


<h3>Menu Virtual Events</h3>

<p>Platform conventions for menus suggest standard menus and items that should be available in most applications.
For example, most applications have an "Edit" menu, with menu items for "Copy," "Paste," etc.  Tk widgets like
entry or text will react appropriately when those menu items are chosen. But if you're building your own menus,
how do you make that work? What <code>command</code> would you assign to a "Copy" menu item?</p>

<p>Tk handles this with virtual events. As you'll recall from the Tk Concepts chapter, these are high-level application
  events, as opposed to low-level operating system events. Tk's widgets will watch for specific events. When you build
  your menus, you can generate those events rather than directly invoking a callback function.  Your application can create
  event bindings to watch for those events too.</p>

<div class=tip><p>Some developers create virtual events for every item in their menus. They generate those events instead of calling 
  routines in their own code directly. It's one way of splitting off your user interface code from the rest of your application.
  Remember that even if you do this, you'll still need code that enables and disables menu items, adjusts their labels, etc. 
  in response to application state changes.</p></div>

<p>Here's a minimal example showing how we'd add two items to an "Edit" menu, the standard "Paste" item, and an application-specific
  "Find..." item that will open a dialog to find or search for something. 
  We'll include an entry widget so that we can check that "Paste" works.</p>

<div class=python><pre>from tkinter import *
from tkinter import ttk, messagebox

root = Tk()
ttk.Entry(root).grid()
m = Menu(root)
m_edit = Menu(m)
m.add_cascade(menu=m_edit, label="Edit")
m_edit.add_command(label="Paste", command=lambda: root.focus_get().event_generate("<&lt;Paste>&gt;"))
m_edit.add_command(label="Find...", command=lambda: root.event_generate("<&lt;OpenFindDialog>&gt;"))
root['menu'] = m

def launchFindDialog(*args):
    messagebox.showinfo(message="I hope you find what you're looking for!")
    
root.bind("<&lt;OpenFindDialog>&gt;", launchFindDialog)
root.mainloop()
</pre></div>
<div class=tcl><pre>grid [ttk::entry .e]
menu .m
menu .m.edit
.m add cascade -menu .m.edit -label Edit
.m.edit add command -label "Paste" -command {event generate [focus] "<&lt;Paste>&gt;"}
.m.edit add command -label "Find..." -command {event generate . "<&lt;OpenFindDialog>&gt;"}
. configure -menu .m

proc launchFindDialog {} {tk_messageBox -message "I hope you find what you're looking for!"}
bind . <&lt;OpenFindDialog>&gt; launchFindDialog
</pre></div>
<div class=ruby><pre>require 'tk'
require 'tkextlib/tile'
root = TkRoot.new()
Tk::Tile::Entry.new(root).grid
m = TkMenu.new(root)
m_edit = TkMenu.new(m)
m.add :cascade, :menu => m_edit, :label =&gt; "Edit"
m_edit.add :command, :label => "Paste", :command => proc{Tk.event_generate(Tk.focus, "&lt;Paste&gt;")}
m_edit.add :command, :label => "Find...", :command => proc{Tk.event_generate(root, "&lt;OpenFindDialog&gt;")}
root['menu'] = m

def launchFindDialog() Tk::messageBox :message =&gt; "I hope you find what you're looking for!" end
root.bind("&lt;OpenFindDialog&gt;") {launchFindDialog}
Tk.mainloop()
</pre></div>
<div class=perl><pre>use Tkx;
my $mw = Tkx::widget-&gt;new(".");
$mw->new_ttk__entry()-&gt;g_grid();
$m = $mw-&gt;new_menu;
$m_edit = $m-&gt;new_menu;
$m->add_cascade(-menu => $m_edit, -label =&gt; "Edit");
$m_edit->add_command(-label => "Paste",  -command => sub{Tkx::event_generate(Tkx::focus(), "<&lt;Paste>&gt;");});
$m_edit->add_command(-label => "Find...", -command => sub{$mw->g_event_generate("<&lt;OpenFindDialog>&gt;");});
$mw->configure(-menu =&gt; $m);

sub launchFindDialog {Tkx::tk___messageBox(-message =&gt; "I hope you find what you're looking for!");}
$mw->g_bind("<&lt;OpenFindDialog>&gt;", sub{launchFindDialog();});
Tkx::MainLoop();
</pre></div>

<div class=tip><p>When you generate a virtual event, you need to specify the widget that the event should be sent to.
  We want the "Paste" event to be sent to the widget with the keyboard focus (usually indicated by a focus ring).
  You can determine which widget has the keyboard focus using the <code>focus</code> command. Try it out, choosing
  the Paste item when the window is first opened (when there's no focus) and after clicking on the entry (making it the focus).
  Notice the entry handles the <code>&lt;&lt;Paste&gt;&gt;</code> event itself. There's no need for us to create an event binding.
</p><p>
  The <code>&lt;&lt;OpenFindDialog&gt;&gt;</code> event is sent to the root window, which is where we create an event binding.
  If we had multiple toplevel windows, we'd send it to a specific window.</p></div>

<p>Tk predefines the following virtual events: <code>&lt;&lt;Clear&gt;&gt;</code>, <code>&lt;&lt;Copy&gt;&gt;</code>, 
<code>&lt;&lt;Cut&gt;&gt;</code>, <code>&lt;&lt;Paste&gt;&gt;</code>, <code>&lt;&lt;PasteSelection&gt;&gt;</code>, 
<code>&lt;&lt;PrevWindow&gt;&gt;</code>, <code>&lt;&lt;Redo&gt;&gt;</code>, and <code>&lt;&lt;Undo&gt;&gt;</code>.
For additional information, see the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/event.htm"><code>event</code></a> command reference.</p>



 <a name="platformmenus"></a><h2>Platform Menus</h2>

<p>Each platform has a few menus in every menubar that are handled specially by Tk.  </p>

<h3>macOS</h3>

<p>You've probably noticed that Tk on macOS
supplies its own default menubar. It includes a menu named after the program being run (in this case, your
programming language's shell, e.g., "Wish", "Python", etc.), a File menu, and standard Edit, Windows,
and Help menus, all stocked with various menu items.</p>

<p>You can override this menubar in your own program, but to get the results you want, you'll
need to follow some particular steps (in some cases, in a particular order).</p>

<div class=upgrade><p>Starting at Tk 8.5.13, the handling of special menus on macOS changed due to
the underlying Tk code migrating from the obsolete Carbon API to Cocoa. If you're seeing duplicate
menu names, missing items, things you didn't put there, etc. review this section carefully.</p></div>

<p>The first thing to know is that if you don't specify a menubar for a window (or its parent window,
e.g., the root window), you'll end up with the default menubar Tk supplies, which unless you're just
mucking around on your own, is almost certainly not what you want.</p>

<h4>The Application Menu</h4>

<p>Every menubar starts with the system-wide apple icon menu. To the right of that is a menu for the frontmost application.
  It is always named after the binary being run. 
If you do supply a menubar, <em>at the time the menubar is attached to the window</em>, if there is <em>not</em>
a specially named <code>.apple</code> menu (see below), Tk will provide its default application menu.
It will contain an "About Tcl &amp; Tk" item, followed by the
standard menu items: preferences, the services submenu, hide/show items, and quit. Again, you don't want this.</p>

<p>If you supply your own <code>.apple</code> menu, when the menubar is attached to the window, Tk will add the
standard items (preferences and onward) onto the end of any items you have added. Perfect! Items you add <em>after</em> the menubar is
attached to the window will appear after the quit item, which, again, you don't want.</p>

<div class=yuck><p>The application menu, which we're dealing with here, is distinct from the apple menu (the one with
the apple icon, just to the left of the application menu).  Despite that, we really mean the application
menu, even though Tk still refer to it as the "apple" menu.  This is a holdover from pre-OS X days when these
sorts of items did go in the actual apple menu, and there was no separate application menu.</p></div>

<p>So, in other words, in your program, make sure you:</p>
<ol>
<li> Create a menubar for each window or the root window. <em>Do not attach the menubar to the window yet!</em>
<li> Add a menu to the menubar named <code>.apple</code>. It will be used as the application menu.
<li> The menu will automatically be named the same as the application binary; if you want to change this, rename (or make a copy of) the binary used to run your script. 
<li> Add the items you want to appear at the top of the application menu, i.e., an "About yourapp" item, followed by a separator.
<li> <em>After</em> you have done all this, you can <em>then</em> attach the menubar to your window via the window's <code>menu</code> configuration option.
</ol>

<div class=python><pre>win = Toplevel(root)
menubar = Menu(win)
appmenu = Menu(menubar, name='apple')
menubar.add_cascade(menu=appmenu)
appmenu.add_command(label='About My Application')
appmenu.add_separator()
win['menu'] = menubar</pre>
<div class=fyi><p>While usually, Tkinter chooses a widget pathname for us, we've had to explicitly provide one (<code>apple</code>)
using the <code>name</code> option when creating the application menu.</p></div>
</div>

<div class=tcl><pre>toplevel .win
menu .win.menubar
.win.menubar add cascade -menu [menu .win.menubar.apple]
.win.menubar.apple add command -label "About My Application" 
.win.menubar.apple add separator
.win configure -menu .win.menubar</pre>
<div class=fyi><p>The pathname of the application menu must be <code>.apple</code>.</p></div>
</div>

<div class=ruby><pre>win = TkToplevel.new(root)
menubar = TkMenu.new(win)
appmenu = TkSysMenu_Apple.new(menubar)
menubar.add :cascade, :menu => appmenu
appmenu.add :command, :label => 'About My Application'
appmenu.add :separator
win['menu'] = menubar</pre>
<div class=fyi><p>The <code>TkSysMenu_Apple</code> call ensures the menu is named <code>.apple</code> internally.</p></div>
</div>

<div class=perl><pre>$w = $mw->new_toplevel;
$m = $w->new_menu;
$appmenu = Tkx::widget->new(Tkx::menu($m->_mpath . ".apple"));
$m->add_cascade(-menu => $appmenu);
$appmenu->add_command(-label => "About My Application")
$appmenu->add_separator;
$w->configure(-menu => $m);</pre>
<div class=fyi><p>While usually, Tkx chooses a widget pathname for us, we've had to explicitly provide one (<code>.apple</code>)
using the <code>_mpath</code> option when creating the application menu.</p></div>
</div>


<h4>Handling the Preferences Menu Item</h4>

<p>As you've noticed, the application menu always includes a "Preferences..." menu item.
If your application has a preferences dialog, this menu item should open it. If your application has no preferences
dialog, this menu item should be disabled, which it is by default.</p>

<div class=python><p>To hook up your preferences dialog, you'll need to define a Tcl procedure named <code>::tk::mac::ShowPreferences</code>. 
 This will be called when the Preferences menu item is chosen; if the procedure is not defined, the menu item will be disabled.</p>
<pre>def showMyPreferencesDialog():
    ....
	
root.createcommand('tk::mac::ShowPreferences', showMyPreferencesDialog)</pre></div>

<div class=tcl><p>To hook up your preferences dialog, you'll need to define a Tcl procedure named <code>::tk::mac::ShowPreferences</code>.  
This will be called when the Preferences menu item is chosen; if the procedure is not defined, the menu item will be disabled.</p>
<pre>proc tk::mac::ShowPreferences {} {showMyPreferencesDialog}</pre></div>

<div class=ruby>To hook up your preferences dialog, you'll need to define a Tcl procedure named <code>::tk::mac::ShowPreferences</code>. 
 This will be called when the Preferences menu item is chosen; if the procedure is not defined, the menu item will be disabled.</p>
<pre>Tk.ip_eval("proc ::tk::mac::ShowPreferences {} {#{Tk.install_cmd(proc{showMyPreferencesDialog})}}")</pre></div>

<div class=perl><p>To hook up your preferences dialog, you'll need to define a Tcl procedure named <code>::tk::mac::ShowPreferences</code>. 
 This will be called when the Preferences menu item is chosen; if the procedure is not defined, the menu item will be disabled.</p>
<pre>Tkx::proc('::tk::mac::ShowPreferences', '{args}', sub {showMyPreferencesDialog()});</pre></div>



<h4>Providing a Help Menu</h4>

<p>Like the application menu, any help menu you add to your own menubar is treated specially on macOS. As with the application menu 
that needed a special name (<code>.apple</code>), the help menu must be given the name <code>.help</code>. Also, like the application menu, the help menu
should also be added <em>before the menubar is attached to the window</em>.</p>

<p>The help menu will include the standard macOS search box to search help, as well as an item named "<em>yourapp</em> Help."
As with the name of the application menu, this comes from your program's executable and
cannot be changed. Similar to how preferences dialogs are handled, to respond to this help item, you need to define a Tcl 
procedure named <code>::tk::mac::ShowHelp</code>. If this procedure is not defined, it will <em>not</em> disable the menu item.
Instead, it will generate an error when the help item is chosen.</p>

<div class=tip><p>If you don't want to include help, don't add a help menu to the menubar, and none will be shown.</p></div>

<div class=upgrade><p>Unlike on X11 and earlier versions of Tk on macOS, the Help menu will not automatically be put at the end of the menubar, 
  so ensure it is the last menu added.</p></div>
  
<p>You can also add other items to the help menu. These will appear after the application help item.</p>

<div class=python><pre>helpmenu = Menu(menubar, name='help')
menubar.add_cascade(menu=helpmenu, label='Help')
root.createcommand('tk::mac::ShowHelp', ...)</pre></div>

<div class=tcl><pre>.win.menubar add cascade -menu [menu .win.menubar.help] -label Help
::tk::mac::ShowHelp {} {...}</pre></div>

<div class=ruby><pre>helpmenu = TkSysMenu_Help.new(menubar)
menubar.add :cascade, :menu => helpmenu, :label => 'Help'
Tk.ip_eval("proc ::tk::mac::ShowHelp {} {#{Tk.install_cmd(proc{...})}}")</pre></div>

<div class=perl><pre>$helpmenu = Tkx::widget->new(Tkx::menu($m->_mpath . ".help"));
$m->add_cascade(-menu => $helpmenu);
Tkx::proc('::tk::mac::ShowHelp', '{args}', sub {...});</pre></div>


<h4>Providing a Window Menu</h4>
	
<p>On macOS, a "Window" menu contains items like minimize, zoom, bring all to front, etc. It also includes a list
of currently open windows. Before that list, other application-specific items are sometimes provided.</p>
<p>
By providing a menu named <code>.window</code>, this standard window menu will be added. Tk automatically keeps it in sync with all
your toplevel windows, without any extra code on your part. You can also add any application-specific commands to this menu.
These appear before the list of your windows.
</p>

<div class=python><pre>windowmenu = Menu(menubar, name='window')
menubar.add_cascade(menu=windowmenu, label='Window')</pre></div>

<div class=tcl><pre>.win.menubar add cascade -menu [menu .win.menubar.window] -label Window</pre></div>

<div class=ruby><pre>class Tk::TkSysMenu_Window&lt;Tk::Menu
  include Tk::SystemMenu
  SYSMENU_NAME = 'window'
end
windowmenu = Tk::TkSysMenu_Window.new(menubar)
menubar.add :cascade, :menu => windowmenu, :label => 'Window'</pre><div class=yuck><p>As of this writing, Ruby/Tk hadn't yet added the TkSysMenu_Window helper.</p></div></div>

<div class=perl><pre>$windowmenu = Tkx::widget->new(Tkx::menu($m->_mpath . ".window"));
$m->add_cascade(-menu => $windowmenu);</pre></div>

	
<h4>Other Menu Handlers</h4>	

<p>You saw previously how handling certain standard menu items required you to define Tcl callback procedures,
e.g., <code>tk::mac::ShowPreferences</code> and <code>tk::mac::ShowHelp</code>.</p>

<p>There are several other callbacks that you can define. For example, you might intercept the Quit menu item,
  prompting users to save their changes before quitting. Here is the complete list:</p>

<dl class="row ml-sm-1">
<dt class="col-lg-5 col-xl-4 font-weight-normal"><code>tk::mac::ShowPreferences</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-7 col-xl-8">Called when the "Preferences..." menu item is selected.</dd>
<dt class="col-lg-5 col-xl-4 font-weight-normal"><code>tk::mac::ShowHelp</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-7 col-xl-8">Called to display main online help for the application.</dd>
<dt class="col-lg-5 col-xl-4 font-weight-normal"><code>tk::mac::Quit</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-7 col-xl-8">Called when the Quit menu item is selected, when a user is trying to shut down the system etc.</dd>
<dt class="col-lg-5 col-xl-4 font-weight-normal"><code>tk::mac::OnHide</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-7 col-xl-8">Called when your application has been hidden.</dd>
<dt class="col-lg-5 col-xl-4 font-weight-normal"><code>tk::mac::OnShow</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-7 col-xl-8">Called when your application is shown after being hidden.</dd>
<dt class="col-lg-5 col-xl-4 font-weight-normal"><code>tk::mac::OpenApplication</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-7 col-xl-8">Called when your application is first opened.</dd>
<dt class="col-lg-5 col-xl-4 font-weight-normal"><code>tk::mac::ReopenApplication</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-7 col-xl-8">Called when a user "reopens" your already-running application (e.g. clicks on it in the Dock)</dd>
<dt class="col-lg-5 col-xl-4 font-weight-normal"><code>tk::mac::OpenDocument</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-7 col-xl-8">Called when the Finder wants the application to open one or more documents (e.g. that were dropped on it). The procedure is passed a list of pathnames of files to be opened.</dd>
<dt class="col-lg-5 col-xl-4 font-weight-normal"><code>tk::mac::PrintDocument</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-7 col-xl-8">As with OpenDocument, but the documents should be printed rather than opened.</dd>
</dl>

<p>For additional information, see the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/tk_mac.htm"><code>tk_mac</code></a> command reference.</p>

	

	
<h3>Windows</h3>

<p>On Windows, each window has a "System" menu at the top left of the window frame, with a small icon for your
application.  It contains items like "Close", "Minimize", etc.  In Tk, if you create a system menu, you can
add new items that will appear below the standard items.</p>

<div class=python><pre>sysmenu = Menu(menubar, name='system')
menubar.add_cascade(menu=sysmenu)</pre>
<div class=fyi><p>While usually, Tkinter will choose a widget pathname for us, we've had to explicitly provide one
with the name <code>system</code>; this is the cue that Tk needs to recognize it as the system menu.</p></div></div>
<div class=tcl><pre>$m add cascade -menu [menu $m.system]</pre>
<div class=fyi><p>The pathname of the menu widget must be <code>.system</code>.</p></div>	
</div>
<div class=ruby><pre>sysmenu = TkSysMenu_System.new(menubar)
menubar.add :cascade, :menu => sysmenu</pre></div>
<div class=perl><pre>$system = Tkx::widget->new(Tkx::menu($m->_mpath . ".system"));
$m->add_cascade(-menu => $system);</pre>
<div class=fyi><p>The pathname of the menu must be explicitly provided, in this case with the name <b>".system"</b>.</p></div></div>


<h3>X11</h3>
	
<p>On X11, if you create a help menu, Tk will ensure that it is always the last menu in the menubar.</p>

<div class=python><pre>menu_help = Menu(menubar, name='help')
menubar.add_cascade(menu=menu_help, label='Help')</pre>
<div class=fyi><p>While usually, Tkinter will choose a widget pathname for us, we've had to explicitly provide one
with the name <code>help</code>; this is the cue that Tk needs to recognize it as the help menu.</p></div></div>
<div class=tcl><pre>$m add cascade -label Help -menu [menu $m.help]</pre>
<div class=fyi><p>The pathname of the menu widget must be <code>.help</code>.</p></div>	
</div>
<div class=ruby><pre>help = TkSysMenu_Help.new(menubar)
menubar.add :cascade, :menu => help, :label => 'Help'</pre></div>
<div class=perl><pre>$help = Tkx::widget->new(Tkx::menu($m->_mpath . ".help"));
$m->add_cascade(-menu => $help);</pre>
<div class=fyi><p>The pathname of the menu must be explicitly provided, in this case with the name <b>".help"</b>.</p></div></div>
	
	
 <a name="popupmenus"></a><h2>Contextual Menus</h2>

<p>Contextual menus ("popup" menus) are typically invoked by a right mouse button click on an object in the application.
A menu pops up at the location of the mouse cursor. Users can then select an items from the menu (or click
outside it to dismiss it without choosing any item).</p>

<p>To create a contextual menu, we'll use exactly the same commands we did to create menus in the menubar.  Typically,
we'd create one menu with several command items in it, and potentially some cascade menu items and their associated
menus.</p>

<p>To activate the menu, users will perform a contextual menu click. We'll have to create an event binding
  to capture that click.  That, however, can mean different things on different
platforms.  On Windows and X11, this is the right mouse button being clicked (the third mouse button).  On macOS, this is either a 
click of the left (or only) button with the control key held down or a right-click on a multi-button mouse.  Unlike Windows and X11,
macOS refers to this as the second mouse button, not the third, so that's the event we'll see in our program.</p>

<div class=upgrade><p>Most earlier programs that have used popup menus assumed it was only "button 3" they needed to worry about.</p></div>

<p>Besides capturing the correct contextual menu event, we also need to capture the mouse's location.
It turns out we need to do this relative to the entire screen (global coordinates) and not local to the window or
widget you clicked on (local coordinates).  The <code>%X</code> and <code>%Y</code> substitutions in Tk's event binding system will capture
those for us.</p>

<p>The last step is simply to tell the menu to pop up at the particular location, via the <code>post</code> method.  
  Here's an example of the whole process, using a popup menu on the application's main window.</p>

<div class=python><pre>from tkinter import *
root = Tk()
menu = Menu(root)
for i in ('One', 'Two', 'Three'):
    menu.add_command(label=i)
if (root.tk.call('tk', 'windowingsystem')=='aqua'):
    root.bind('&lt;2&gt;', lambda e: menu.post(e.x_root, e.y_root))
    root.bind('&lt;Control-1&gt;', lambda e: menu.post(e.x_root, e.y_root))
else:
    root.bind('&lt;3&gt;', lambda e: menu.post(e.x_root, e.y_root))
root.mainloop()
</pre></div>
<div class=tcl><pre>
menu .menu
foreach i [list One Two Three] {.menu add command -label $i}
if {[tk windowingsystem]=="aqua"} {
	bind . &lt;2&gt; "tk_popup .menu %X %Y"
	bind . &lt;Control-1&gt; "tk_popup .menu %X %Y"
} else {
	bind . &lt;3&gt; "tk_popup .menu %X %Y"
}
</pre></div>
<div class=ruby><pre>
require 'tk'
root = TkRoot.new
menu = TkMenu.new(root)
%w(One Two Three).each {|i| menu.add :command, :label => i}
if Tk.windowingsystem == 'aqua'
    root.bind '2', proc{|x,y| menu.popup(x,y)}, "%X %Y"
    root.bind 'Control-1', proc{|x,y| menu.popup(x,y)}, "%X %Y"
else
    root.bind '3', proc{|x,y| menu.popup(x,y)}, "%X %Y"
end
Tk.mainloop
</pre></div>
<div class=perl><pre>use Tkx;
my $mw = Tkx::widget->new(".");
my $menu = $mw->new_menu();
foreach ("One", "Two", "Three") {$menu->add_command(-label => $_);}
if (Tkx::tk_windowingsystem() eq "aqua") {
    $mw->g_bind("&lt;2&gt;", [sub {my($x,$y) = @_; $menu->g_tk___popup($x,$y)}, Tkx::Ev("%X", "%Y")] );
    $mw->g_bind("&lt;Control-1&gt;", [sub {my($x,$y) = @_; $menu->g_tk___popup($x,$y)}, Tkx::Ev("%X", "%Y")]);
} else {
    $mw->g_bind("&lt;3&gt;", [sub {my($x,$y) = @_; $menu->g_tk___popup($x,$y)}, Tkx::Ev("%X", "%Y")]);
}
Tkx::MainLoop();
</pre></div>


<h1>Windows and Dialogs</h1>

<p>Everything we've done up until now has been in a single window.  In this chapter, we'll cover how to use multiple windows,
changing various attributes of windows, and use some of the standard dialog boxes that are available in Tk.</p>


 <a name="createdestroy"></a><h2>Creating and Destroying Windows</h2>

<p>We've seen that all Tk programs start out with a root toplevel window, and then widgets are created as children of 
that root window.  Creating new toplevel windows works almost exactly the same as creating new widgets.</p>

<div class=python>
<p>Toplevel windows are created using the <code><b>Toplevel</b></code> class:</p>
<pre>t = Toplevel(<em>parent</em>)</pre>
</div>
<div class=tcl>
<p>Toplevel windows are created using the <code><b>tk::toplevel</b></code> command:</p>
<pre>tk::toplevel .t</pre>
</div>
<div class=ruby>
<p>Toplevel windows are created using the <code><b>TkToplevel</b></code> class:</p>
<pre>t = TkToplevel.new(<em>parent</em>)</pre>
</div>
<div class=perl>
<p>Toplevel windows are created using the <code><b>new_toplevel</b></code> method, a.k.a. <code><b>Tkx::toplevel</b></code>:</p>
<pre>my $win = $<em>parent</em>->new_toplevel;</pre>
</div>

<p>Note: Toplevels are part of the classic Tk widgets, not the themed widgets.</p>

<p>Unlike regular widgets, we don't have to <code>grid</code> a toplevel for it to appear onscreen.  
  Once we've created a new toplevel, we can create other widgets as children of that toplevel, and <code>grid</code> them inside the toplevel.  
The new toplevel behaves exactly like the automatically created root window.</p>

<div class=python><p>To destroy a window, use its <code><b>destroy</b></code> method:</p><pre><em>window</em>.destroy()</pre></div>
<div class=tcl><p>To destroy a window, use the <code><b>destroy</b></code> command:</p><pre>destroy <em>.win1 ?.win2 ...?</em></pre>
<div class=tip><p>Note that the <code>destroy</code> command lives in the global namespace; there is not a <code>tk::destroy</code> command.</p></div>	
</div>
<div class=ruby><p>To destroy a window, use the <code><b>destroy</b></code> method on a widget:</p><pre><em>window</em>.destroy</pre></div>
<div class=perl><p>To destroy a window, use the <code><b>g_destroy</b></code> method on a widget:</p><pre>$<em>window</em>->g_destroy();</pre></div>

<p>Note that you can use <code>destroy</code> on any widget, not just a toplevel window.  When you destroy a window, all windows (widgets) that
are children of that window are also destroyed.  Be careful! If you destroy the root window 
(that all other widgets are descended from), that will terminate your application.</p>

<div class=tip><p>In a typical document-oriented application, we want to be able to close any windows while leaving the others open.
  In that case, we may want to create a new toplevel for every window, and not put anything directly inside the root window at all.
  While we can't just destroy the root window, we can remove it entirely from the screen using its <code>withdraw</code> method, which
  we'll see shortly.
</p></div>


 <a name="wm"></a><h2>Window Behavior and Styles</h2>

<p>There are lots of things about how windows behave and how they look that can be changed.</p>

<h4>Window Title</h4>
<p>To examine or change the title of the window:</p>

<div class=python><pre>oldtitle = <em>window</em>.title()<br><em>window</em>.title('New title')</pre></div>
<div class=tcl><pre>set oldtitle [wm title <em>.window</em>]<br>wm title <em>.window</em> "New title"</pre>
<div class=fyi><p>The "wm" here stands for "window manager" which is an X11 term used for a program that manages all the windows
onscreen, including their title bars, frames, and so on.  What we're effectively doing is asking the window
manager to change the title of this particular window for us.  The same terminology has been carried over to
Tk running on macOS and Windows.</p></div>

<div class=tip><p>Note that the <code>wm</code> command lives in the global namespace; there is not a <code>tk::wm</code> command.</p></div>	
</div>
<div class=ruby><pre>oldtitle = <em>window</em>['title']<br><em>window</em>['title'] = "New title"</pre></div>
<div class=perl><pre>my $oldtitle = $<em>window</em>->g_wm_title;<br>$<em>window</em>->g_wm_title("New title");</pre></div>
	
<h4>Size and Location</h4>

<p>In Tk, a window's position and size on the screen are known as its <em>geometry</em>.  A full geometry specification
looks like this: <code><em>width</em><b>x</b><em>height</em><b>&plusmn;</b><em>x</em><b>&plusmn;</b><em>y</em></code>.</p>

<p>Width and height (usually in pixels) are pretty self-explanatory.  The <code><em>x</em></code> (horizontal position) is specified with
a leading plus or minus, so <code>+25</code> means the left edge of the window should be 25 pixels from the left edge 
of the screen, while <code>-50</code> means the right edge of the window should be 50 pixels from the right edge of
the screen.  Similarly, a <code><em>y</em></code> (vertical) position of <code>+10</code> means the top edge of the window should be ten pixels
below the top of the screen, while <code>-100</code> means the bottom edge of the window should be 100 pixels above the bottom of
the screen.</p>

<div class=tip><p>Geometry specifies the actual coordinates on the screen. It doesn't make allowances for
systems like macOS with a menubar along the top or a dock along the bottom.  So specifying a
position of <code>+0+0</code> would actually place the top part of the window under the system menu bar.  It's a good idea
to leave a healthy margin (at least 30 pixels) from the screen's edge. 
</p><p>
Screen positions can be different than you might expect when you have multiple monitors on your system. We'll cover that shortly.
</p></div>

<p>Here is an example of changing the size and position. It places the window towards the top righthand corner
of the screen:</p>

<div class=python><pre><em>window</em>.geometry('300x200-5+40')</pre></div>
<div class=tcl><pre>wm geometry <em>.window</em> 300x200-5+40</pre></div>
<div class=ruby><pre><em>window</em>['geometry'] = '300x200-5+40'</pre></div>
<div class=perl><pre>$<em>window</em>->g_wm_geometry("300x200-5+40");</pre></div>

<p>You can retrieve the current geometry the same way; just don't provide a new geometry value.
  However, if you try it immediately after changing the geometry, you'll find it doesn't match.
  Remember that all drawing effectively occurs in the background, in response to idle times via the event loop. 
  Until that drawing occurs, the internal geometry of the window won't be updated. If you do want to force things to
  update immediately, you can.</p>

<div class=python><pre><em>window</em>.update_idletasks()
print(<em>window</em>.geometry())</pre></div>
<div class=tcl><pre>update idletasks
puts [wm geometry .window]</pre></div>
<div class=ruby><pre><em>window</em>.update :idletasks
print(<em>window</em>['geometry'])</pre></div>
<div class=perl><pre>Tkx::update_idletasks();
print($<em>window</em>->g_wm_geometry());</pre></div>

<div class=tip><p>We've seen that the window defaults to the size requested by the widgets that are gridded into it.
  If we're creating and adding new widgets interactively in the interpreter, or if our program adds new widgets
  in response to other events, the window size adjusts. This behavior continues until either we explicitly provide
  the window's geometry as above <em>or</em> a user resizes the window. At that point, even if we add more widgets,
  the window won't change size. You'll want to be sure you're using all of <code>grid</code>'s features
  (e.g., <code>sticky</code>, <code>weight</code>) to make everything fit nicely.</p></div>


<h4>Resizing Behavior</h4>

<p>By default, toplevel windows, including the root window, can be resized by users.
However, sometimes you may want to prevent users from resizing the window.
You can do this via the <code>resizable</code> method. It's first parameter controls whether users can change the
width, and the second if they can change the height. So to disable all resizing:</p>

<div class=python><pre><em>window</em>.resizable(FALSE,FALSE)</pre></div>
<div class=tcl><pre>wm resizable <em>.window</em> 0 0</pre></div>
<div class=ruby><pre><em>window</em>['resizable'] = false, false</pre></div>
<div class=perl><pre>$<em>window</em>->g_wm_resizable(0,0);</pre></div>

<p>If a window is resizable, you can specify a minimum and/or maximum size that you'd like the window's size 
constrained to (again, parameters are width and height):</p>

<div class=python><pre><em>window</em>.minsize(200,100)
<em>window</em>.maxsize(500,500)</pre></div>
<div class=tcl><pre>wm minsize <em>.window</em> 200 100
wm maxsize <em>.window</em> 500 500</pre></div>
<div class=ruby><pre><em>window</em>['minsize'] = 200, 100
<em>window</em>['maxsize'] = 500, 500</pre></div>
<div class=perl><pre>$<em>window</em>->g_wm_minsize(200,100);
$<em>window</em>->g_wm_maxsize(500,500);</pre></div>

<p>You saw earlier how to obtain the current size of the window via its geometry. Wondering how large it would be if you
  didn't specify its geometry, or a user didn't resize it? You can retrieve the window's <em>requested size</em>, i.e., how much
  space it requests from the geometry manager. Like with drawing, geometry calculations are only done at idle time in the event
  loop, so you won't get a useful response until the widget has appeared onscreen.</p>
  
<div class=python><pre><em>window</em>.winfo_reqwidth()   <em># or winfo_reqheight</em></pre></div>
<div class=tcl><pre>winfo reqwidth <em>.window</em>   <em># or reqheight</em></pre></div>
<div class=ruby><pre><em>window</em>.winfo_reqwidth()   <em># or winfo_reqheight</em></pre></div>
<div class=perl><pre>$<em>window</em>->g_winfo_reqwidth()   <em># or g_winfo_reqheight</em></pre></div>

<div class=fyi><p>You can use the <code>reqwidth</code> and <code>reqheight</code> methods on any widget, not just toplevel windows.
  There are other <code>winfo</code> methods you can call on any widget, such as <code>width</code> and <code>height</code>,
  to get the actual (not requested) width and height. For more, see the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/winfo.htm"><code>winfo</code></a> command reference.
  </p></div>

<h4>Intercepting the Close Button</h4>

<p>Most windows have a close button in their title bar. By default, Tk will destroy the window if users click on that button.
  You can, however, provide a callback that will be run instead. A common use is to prompt the user to save an open file if 
  modifications have been made.</p>
  
<div class=python><pre><em>window</em>.protocol("WM_DELETE_WINDOW", <em>callback</em>)</pre></div>
<div class=tcl><pre>wm protocol <em>.window</em> WM_DELETE_WINDOW <em>callback</em></pre></div>
<div class=ruby><pre><em>window</em>.protocol("WM_DELETE_WINDOW", <em>callback</em>)</pre></div>
<div class=perl><pre>$<em>window</em>->g_wm_protocol("WM_DELETE_WINDOW" => <em>callback</em>);</pre></div>
  
<div class=fyi><p>The somewhat obscurely-named <code>WM_DELETE_PROTOCOL</code> originated with X11 window manager protocols.</p></div>

 
<h4>Transparency</h4>

<p>Windows can be made partially transparent by specifying an alpha channel, ranging from <code>0.0</code> (fully transparent) to <code>1.0</code> (fully opqaque).</p>

<div class=python><pre><em>window</em>.attributes("-alpha", 0.5)</pre>
  <div class=yuck><p>Tkinter's wrapper to the underlying <code>wm attributes</code> command doesn't do any interpretation of options, handle keyword arguments, etc.</p></div></div>
<div class=tcl><pre>wm attributes <em>.window</em> -alpha 0.5</pre></div>
<div class=ruby><pre><em>window</em>.attributes(:alpha => 0.5)</pre></div>
<div class=perl><pre>$<em>window</em>->g_wm_attributes(-alpha => 0.5);</pre></div>

<p>On macOS, you can additionally specify a <code>-transparent</code> attribute (using the same mechanism as with <code>-alpha</code>), 
  which allows you to make the background of the window transparent, and remove the window's
  show. You should also set the <code>background</code> configuration option for the window and any frames to the color <code>ssytemTransparent</code>.</p>


<h4>Full Screen</h4>

<p>You can make a window expand to take up the full screen:</p>

<div class=python><pre><em>window</em>.attributes("-fullscreen", 1)</pre></div>
<div class=tcl><pre>wm attributes <em>.window</em> -fullscreen 1</pre></div>
<div class=ruby><pre><em>window</em>.attributes(:fullscreen => 1)</pre></div>
<div class=perl><pre>$<em>window</em>->g_wm_attributes(-fullscreen => 1);</pre></div>

  
<h4>Other macOS-Specific Attributes</h4>

<p>In addition to the <code>-transparent</code> attribute described above, macOS windows boast some additional attributes.</p>

<p>The (red) close widget in the title bar can indicate that the content inside the window has been modified (e.g., the file needs to be saved).
  Set the <code>-modified</code> attribute to <code>1</code> to indicate this, or <code>0</code> to remove the modified indicator.</p>
  
<p>You can draw users' attention to the window by bouncing its icon in the macOS dock. To do so, set the window's <code>-notify</code> attribute.</p>

<p>If a window contains the contents of a document, you can place an icon in the title bar specifying the file the document refers to. Users can drag
  this icon as a proxy for dragging the file in the Finder. Set the window's <code>-titlepath</code> attribute to the full path of the file. Note that
  this does not change the title of the window (you'll need to change that separately), but just provides the icon.</p>
  
<p>On macOS, windows can also take a variety of appearances for different purposes, e.g. utility windows, modal dialogs, floating windows, and so on.
  There is an unsupported command in Tk called <code>MacWindowStyle</code> that lets you assign one of these appearances to a window. Unlike many options
  in Tk which can be changed at any point, these appearances must be assigned after the window is created but before it appears onscreen.</p>
  
<div class=python><pre>t = Toplevel(root)
t.tk.call("::tk::unsupported::MacWindowStyle", "style", t._w, "utility")</pre></div>
<div class=tcl><pre>toplevel .t
tk::unsupported::MacWindowStyle style .t utility</pre></div>
<div class=ruby><pre>t = TkToplevel.new(root)
Tk.tk_call("::tk::unsupported::MacWindowStyle", "style", t, "utility")</pre></div>
<div class=perl><pre>$t = $mw->new_toplevel;
Tkx::eval("::tk::unsupported::MacWindowStyle", "style", $t, "utility");</pre></div>
  
<p>Besides <code>utility</code>, other useful appearance styles include <code>floating</code>, <code>plain</code>, and <code>modal</code>.</p>

<div class=fyi><p>While officially unsupported, this feature has been available for a long time in Tk. It's likely in future to migrate to the <code>wm attributes</code>  
  command. For further information, including more details on the different appearances and optional attributes, 
  see the <a href="../../external.html?link=https://wiki.tcl-lang.org/page/MacWindowStyle">MacWindowStyle wiki page</a>.
</p></div>  
  
<h3>Iconifying and Withdrawing</h3>

<p>On most systems, you can temporarily remove the window from the screen by iconifying it.  In Tk, whether
or not a window is iconified is referred to as the window's <em>state</em>.  The possible states for a 
window include <code>normal</code> and <code>iconic</code> (for an iconified window), and several
others: <code>withdrawn</code>, <code>icon</code> or <code>zoomed</code>.</p>

<p>You can query or set the current window state directly. There are also methods <code>iconify</code>,
<code>deiconify</code>, and <code>withdraw</code>, which are shortcuts for setting the <code>iconic</code>, <code>normal</code>,
and <code>withdrawn</code> states, respectively.</p>

<div class=python><pre>thestate = <em>window</em>.state()
<em>window</em>.state('normal')
<em>window</em>.iconify()
<em>window</em>.deiconify()
<em>window</em>.withdraw()</pre></div>
<div class=tcl><pre>set thestate [wm state <em>.window</em>]
wm state <em>.window</em> normal
wm iconify <em>.window</em>
wm deiconify <em>.window</em>
wm withdraw <em>.window</em></pre></div>
<div class=ruby><pre>thestate = <em>window</em>['state']
<em>window</em>['state'] = 'normal'
<em>window</em>.iconify
<em>window</em>.deiconify
<em>window</em>.withdraw</pre></div>
<div class=perl><pre>my $thestate = $<em>window</em>->g_wm_state;
$<em>window</em>->g_wm_state("normal");
$<em>window</em>->g_wm_iconify;
$<em>window</em>->g_wm_deiconify;
$<em>window</em>->g_wm_withdraw;</pre></div>

<div class=tip><p>For document-centric applications, where you want to allow closing any window without the application exiting
  (as would happen if you destroy the root window), use <code>withdraw</code> on the root window to remove it from
  the screen, use new toplevel windows for your user interface.</p></div>
  
	
<h3>Stacking Order</h3>

<p>Stacking order refers to the order that windows are "placed" on the screen, from bottom to top.  When
the positions of two windows overlap each other, the one closer to the top of the stacking order will
obscure or overlap the one lower in the stacking order.</p>

<p>You can ensure that a window is always at the top of the stacking order (or at least above all others where this attribute isn't set):</p>

<div class=python><pre><em>window</em>.attributes("-topmost", 1)</pre></div>
<div class=tcl><pre>wm attributes <em>.window</em> -topmost 1</pre></div>
<div class=ruby><pre><em>window</em>.attributes(:topmost => 1)</pre></div>
<div class=perl><pre>$<em>window</em>->g_wm_attributes(-topmost => 1);</pre></div>


<p>You can find the current stacking order, listed from lowest to highest:</p>

<div class=python><pre>root.tk.eval('wm stackorder '+str(<em>window</em>))</pre><div class=yuck><p>This method isn't exposed cleanly in Tkinter. It returns the internal names of each window, not the window object.</p></div></div>
<div class=tcl><pre>wm stackorder <em>.window</em></pre></div>
<div class=ruby><pre><em>window</em>.stackorder</pre></div>
<div class=perl><pre>$<em>window</em>->wm_stackorder</pre></div>

<p>You can also just check if one window is above or below another:</p>

<div class=python><pre>if (root.tk.eval('wm stackorder '+str(<em>window</em>)+' isabove '+str(<em>otherwindow</em>))=='1') ...
if (root.tk.eval('wm stackorder '+str(<em>window</em>)+' isbelow '+str(<em>otherwindow</em>))=='1') ...</pre></div>
<div class=tcl><pre>if {[wm stackorder <em>.window</em> isabove <em>.other</em>]} {...}
if {[wm stackorder <em>.window</em> isbelow <em>.other</em>]} {...}</pre></div>
<div class=ruby><pre>if (<em>window</em>.stackorder_isabove <em>otherwin</em>) ...
if (<em>window</em>.stackorder_isbelow <em>otherwin</em>) ...</pre></div>
<div class=perl><pre>if ($<em>window</em>->g_wm_stackorder("isabove", $<em>otherwin</em>)) ...
if ($<em>window</em>->g_wm_stackorder("isbelow", $<em>otherwin</em>)) ...</pre></div>

<p>You can also raise or lower windows, either to the very top (bottom) of the stacking order, or just
above (below) a designated window:</p>

<div class=python><pre><em>window</em>.lift()
<em>window</em>.lift(<em>otherwin</em>)
<em>window</em>.lower()
<em>window</em>.lower(<em>otherwin</em>)</pre>
<div class=fyi><p>Tkinter uses the name <code>lift</code> since <code>raise</code> is a reserved keyword in Python.</p></div></div>
<div class=tcl><pre>raise <em>.window</em>
raise <em>.window</em> <em>.other</em>
lower <em>.window</em>
lower <em>.window</em> <em>.other</em></pre></div>
<div class=ruby><pre><em>window</em>.raise
<em>window</em>.raise_window <em>otherwin</em>
<em>window</em>.lower
<em>window</em>.lower_window <em>otherwin</em></pre></div>
<div class=perl><pre>$<em>window</em>->g_raise;
$<em>window</em>->g_raise($<em>otherwin</em>);
$<em>window</em>->g_lower;
$<em>window</em>->g_lower($<em>otherwin</em>);</pre></div>

<p>Why do you need to pass a window to get the stacking order?  
Stacking order applies not only for toplevel windows, but for any <em>sibling</em>
widgets (those with the same parent).  If you have several widgets gridded together but
overlapping, you can raise and lower them relative to each other:</p>	

<div class=python><pre>from tkinter import *
from tkinter import ttk
root = Tk()
little = ttk.Label(root, text="Little")
bigger = ttk.Label(root, text='Much bigger label')
little.grid(column=0,row=0)
bigger.grid(column=0,row=0)
root.after(2000, lambda: little.lift())
root.mainloop()</pre></div>
<div class=tcl><pre>grid [ttk::label .little -text "Little"] -column 0 -row 0 
grid [ttk::label .bigger -text "Much Bigger Label"] -column 0 -row 0
after 2000 raise .little</pre></div>
<div class=ruby><pre>require 'tk'
require 'tkextlib/tile'
root = TkRoot.new
little = Tk::Tile::Label.new(root) {text 'Little'}.grid( :column => 0, :row => 0)
bigger = Tk::Tile::Label.new(root) {text 'Much Bigger Label'}.grid( :column => 0, :row => 0)
Tk.after 2000, proc{little.raise}
Tk.mainloop</pre></div>
<div class=perl><pre>use Tkx;
$mw = Tkx::widget->new(".");
$little = $mw->new_ttk__label(-text => "Little");
$little->g_grid(-column => 0, -row => 0);
$bigger = $mw->new_ttk__label(-text => "Much Bigger Label");
$bigger->g_grid(-column => 0, -row => 0);
Tkx::after(2000, sub {$little->g_raise();});
Tkx::MainLoop();
</pre></div>

<div class=fyi><p>This uses timer events, which we covered in the event loop chapter.
  The <code>after</code> command schedules a script to run at a certain number of
milliseconds in the future, but leaves the event loop to continue.</p></div>


<h3>Screen Information</h3>

<p></p>


<p>We've previously used the <code>winfo</code> command to find out information about specific widgets. It can also provide information about the
  entire display or <em>screen</em>. As usual, see the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/winfo.htm"><code>winfo</code></a> command reference 
  for full details.</p>
  
  
<p>For example, you can determine the screen's color depth (how many bits per pixel) and color model (usually <code>truecolor</code> on modern displays), 
  it's pixel density, and resolution.</p>
  
<div class=python><pre>print("color depth=" + str(root.winfo_screendepth())+ " (" + root.winfo_screenvisual() + ")")
print("pixels per inch=" + str(root.winfo_pixels('1i')))
print("width=", str(root.winfo_screenwidth()) + " height=", str(root.winfo_screenheight()))
</pre></div>
<div class=tcl><pre>puts "color depth=[winfo screendepth .] ([winfo screenvisual .])"
puts "pixels per inch=[winfo pixels . 1i]"
puts "width=[winfo screenwidth .] height=[winfo screenheight .]"
</pre></div>
<div class=ruby><pre>print "color depth=" + root.winfo_screendepth().to_s + " (" + root.winfo_screenvisual() + ")\n"
print "pixels per inch=" + root.winfo_pixels('1i').to_s + "\n"
print "width=" + root.winfo_screenwidth().to_s + " height=" + root.winfo_screenheight().to_s + "\n"
</pre></div>
<div class=perl><pre>print("color depth=", $mw->g_winfo_screendepth(), " (", $mw->g_winfo_screenvisual(), ")\n");
print("pixels per inch=", $mw->g_winfo_pixels("1i"), "\n");
print("width=", $mw->g_winfo_screenwidth(), " height=", $mw->g_winfo_screenheight(), "\n");
</pre></div>
  
<h4>Multiple Monitors</h4>

<p>While normally you shouldn't have to pay attention to it, if you do have multiple monitors on your system and want to customize things a
  bit, there are some tools in Tk to help.</p>
  
<p>First, there are two ways that multiple monitors can be represented. The first is with logically separate displays. This is often the
  case on X11 systems, though it can be changed, e.g., using the <code>xrandr</code> system utility. A downside of this model is that once a
  window is created on a screen, it can't be moved to a different one. You can determine the screen that a Tk
  window is running on, which looks something like <code>:0.0</code> (an X11-formatted display name).</p>  

<div class=python><pre>root.winfo_screen()</pre></div>
<div class=tcl><pre>winfo screen .</pre></div>
<div class=ruby><pre>root.winfo_screen</pre></div>
<div class=perl><pre>$mw->g_winfo_screen()</pre></div>
  
<p>When first creating a <code>toplevel</code> you can specify the screen it should be created on using the <code>screen</code> configuration option.</p>

<div class=fyi><p>Different monitors may have different resolutions, color depths, etc. You'll notice that all the screen information calls we just covered
  are methods invoked on a specific widget. They will return information about whatever screen that window is located on.</p></div>
  
<p>Alternatively, multiple monitors can also be represented as one big virtual display, which is the case on macOS and Windows.  
  When you ask for information about the screen, Tk will return information on the <em>primary monitor</em>.  For example, if you have two Full HD
  monitors side-by-side, the screen resolution will be reported as 1920 x 1080, not 3840 x 1080. This is probably a good thing; it means that if
  we're positioning or sizing windows, we don't need to worry about multiple monitors, and everything will just show up correctly on the primary
  monitor.</p>
  
<p>What if a user moves a window from the primary monitor to a different one? If you ask for its position, it will be relative to the primary monitor. 
  So in our side-by-side FHD monitor setup, if you call the <code>winfo_x</code> method on a window positioned near the left edge of a monitor, it
  might return <code>100</code> (if it's on the primary monitor), <code>-1820</code> (if it's on a monitor to the left of the primary monitor), 
  or <code>2020</code> (if it's on a monitor to the right of the primary monitor). You can still use the <code>geometry</code> method we saw
  a bit earlier to position the window on a different monitor, even though the geometry specification may look a bit odd,
  e.g., <code>+-1820+100</code>.</p>
  
<p>You can find out approximately how large the entire display is, spanning multiple monitors. To do so, check a toplevel widget's maximum size,
  i.e., how large the user can resize it (you can't do this after you've already changed it, of course). This may be a bit smaller than the full
  size of the display. For example, on macOS, it will be reduced by the size of the menubar at the top of the screen.</p>

<div class=python><pre>root.wm_maxsize()</pre></div>
<div class=tcl><pre>wm maxsize .</pre></div>
<div class=ruby><pre>root.wm_maxsize</pre></div>
<div class=perl><pre>$mw->g_wm_maxsize()</pre></div>
  
  
  
 <a name="dialogs"></a><h2>Dialog Windows</h2>

<p>Dialog boxes are a type of window used in applications to get some information from users, 
inform them that some event has occurred, confirm an action, and more.  The appearance and usage
of dialog boxes are usually quite specifically detailed in a platform's style guide.  Tk comes
with several dialog boxes built-in for common tasks. These help you conform to platform-specific style guidelines.</p>


<h4>Selecting Files and Directories</h4>


<p>Tk provides several dialogs to let users select files or directories.  On Windows and macOS,
these invoke the underlying operating system dialogs directly.  The "open" variant on the
dialog is used when you want users to select an existing file (like in a <code>"File | Open..."</code>
menu command), while the "save" variant is used to choose a file to save into (usually used
by the <code>"File | Save As..."</code> menu command).</p>

<div class=python><pre>from tkinter import filedialog
filename = filedialog.askopenfilename()
filename = filedialog.asksaveasfilename()
dirname = filedialog.askdirectory()</pre></div>
<div class=tcl><pre>set filename [tk_getOpenFile]
set filename [tk_getSaveFile]
set dirname [tk_chooseDirectory]</pre></div>
<div class=ruby><pre>filename = Tk::getOpenFile
filename = Tk::getSaveFile
dirname = Tk::chooseDirectory</pre></div>
<div class=perl><pre>$filename = Tkx::tk___getOpenFile();
$filename = Tkx::tk___getSaveFile();
$dirname = Tkx::tk___chooseDirectory();</pre></div>

<p>All of these commands produce <em>modal</em> dialogs. This means that the commands will not complete
   until a user submits the dialog.  These commands
return the full pathname of the file or directory a user has chosen, or an empty
string if a user cancels out of the dialog.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/getopenfile_all.png' alt='screen shot'><br />
Open file dialogs.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/getsavefile_all.png' alt='screen shot'><br />
Save file dialogs.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/choosedir_all.png' alt='screen shot'><br />
Choose directory dialogs.</p>


<p>Various options can be passed to these dialogs, allowing you to set the
allowable file types, initial directory, default filename, and many more.  These are detailed
in the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/getOpenFile.htm">getOpenFile</a> (includes <code>getSaveFile</code>) and 
<a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/chooseDirectory.htm">chooseDirectory</a> reference manual pages.</p>



<h4>Selecting Colors</h4>

<p>Another modal dialog lets users select a color.  It will return a color value, e.g. <code>#ff62b8</code>.
The dialog takes an optional <code>initialcolor</code> option to specify an existing color, i.e., that users
might want to replace. More information is available in the 
<a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/chooseDirectory.htm">chooseColor</a> reference manual pages.</p>



<div class=python><pre>from tkinter import colorchooser
colorchooser.askcolor(initialcolor='#ff0000')</pre></div>
<div class=tcl><pre>tk_chooseColor -initialcolor #ff0000</pre></div>
<div class=ruby><pre>Tk::chooseColor :initialcolor => '#ff0000'</pre></div>
<div class=perl><pre>Tkx::tk___chooseColor(-initialcolor => "#ff0000");</pre></div>

<p class=picture>
<img class='border-0 img-fluid' src='../images/choosecolor_all.png' alt='screen shot'><br />
Choose color dialogs.</p>


<h4>Selecting Fonts</h4>


<p>Tk 8.6 added support for another system dialog: a font chooser. While the file dialogs and color chooser were modal dialogs,
 that block until the dialog is dismissed and then return a result, the font chooser doesn't work like that.</p>

<div class=tip><p>As the font chooser isn't available in Tk 8.5, if your code needs to support older Tk versions, you'll need to
  take that into account.</p></div>
 
<p class=picture>
<img class='border-0 img-fluid' src='../images/fontchooser_all.png' alt='screen shot'><br />
Font chooser dialogs.</p>
 
 
 <p>While the system font dialog is modal on some platforms, e.g., Windows, that's not the case everywhere. On macOS, the system font chooser works more
 like a floating tool palette in a drawing program, remaining available to change the font for whatever text is selected in your main application window. 
 The Tk font dialog API has to accommodate both models. To do so, it uses callbacks (and virtual events) to notify your application of font changes.
 Additional details can be found in the  <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/fontchooser.htm">fontchooser</a> reference manual pages.</p>



<p>To use the font dialog, first provide it with an initial font and a callback which will be invoked when a font is chosen. For illustration, we'll
  have the callback change the font on a label.</p>

<div class=python><pre>l = ttk.Label(root, text="Hello World", font="helvetica 24")
l.grid(padx=10, pady=10)

def font_changed(font):
    l['font'] = font

root.tk.call('tk', 'fontchooser', 'configure', '-font', 'helvetica 24', '-command', root.register(font_changed))
root.tk.call('tk', 'fontchooser', 'show')
</pre>
<p>Tkinter has not yet added a convenient way to use this new dialog, so this example code uses the Tcl API directly. You can see the latest
  work towards a proper Python API and download code at [<a href='../../external.html?link=http://bugs.python.org/issue28694'>Issue#28694</a>].</p>
</div>
<div class=tcl><pre>grid [ttk::label .l -text "Hello World" -font "helvetica 24"] -padx 10 -pady 10
proc font_changed {font} {.l configure -font $font}
tk fontchooser configure -font "helvetica 24" -command font_changed
</pre></div>
<div class=ruby><pre>$l = Tk::Tile::Label.new(root) {text "Hello World"; font "helvetica 24";}
$l.grid :padx => 10, :pady => 10

def font_changed(font) 
  $l['font'] = font
end
TkFont::Fontchooser.configure :font => "helvetica 24", :command => proc{|f| font_changed(f);}
</pre></div>
<div class=perl><pre>our $l = $mw->new_ttk__label(-text => "Hello World", -font => "helvetica 24");
$l->g_grid(-padx => 10, -pady => 10);
sub font_changed {
    ($font) = @_;
    $l->configure(-font => $font);
}
Tkx::tk_fontchooser_configure( -font => "helvetica 24", -command =>  \&font_changed);
</pre></div>

<div class=tip><p>You can query or change the font that is (or will be) displayed in the dialog at any time.</p></div>

<p>Next, put the dialog onscreen via the <code>show</code> method. On platforms where the font dialog is modal, your program will block at this point until the dialog is
  dismissed. On other platforms, <code>show</code> returns immediately; the dialog remains onscreen while your program continues. At this point, a font has not been chosen.  
  There's also a <code>hide</code> method to remove it from the screen (not terribly useful when the font dialog is modal).</p>

<div class=python><pre>root.tk.call('tk', 'fontchooser', 'show')
root.tk.call('tk', 'fontchooser', 'hide')
</pre></div>
<div class=tcl><pre>tk fontchooser show
tk fontchooser hide</pre></div>
<div class=ruby><pre>TkFont::Fontchooser.show
TkFont::Fontchooser.hide
</pre></div>
<div class=perl><pre>Tkx::tk_fontchooser_show();
Tkx::tk_fontchooser_hide();
</pre></div>

<p>If the font dialog was modal, and the user chose a font, the dialog would have invoked your callback, passing it a font specification. If they cancelled out of the 
  dialog, there'd be no callback. When the dialog isn't modal, and the user chooses a font, it will invoke your callback. A &lt;&lt;TkFontchooserFontChanged&gt;&gt;
  virtual event is also generated; you can retrieve the current font via the dialog's <code>font</code> configuration option. If the font dialog is closed,
  a &lt;&lt;TkFontchooserVisibility&gt;&gt; virtual event is generated. You can also find out if the font dialog is currently visible onscreen via the
  <code>visible</code> configuration option (though changing it is an error; use the <code>show</code> and <code>hide</code> methods instead).</p>
  
<div class=tip><p>Because of the significant differences between them, providing a good user experience on all platforms takes a bit of work. On platforms where the 
  font dialog is modal,it's likely to be invoked from a button or menu item that says, e.g., <code>Font...</code>. On other platforms, the button or menu
  item should toggle between <code>Show Fonts</code> and <code>Hide Fonts</code>.
  </p><p>
  If you have several text widgets in your application that can be given
  different fonts, when one of them gains focus, it should update the font chooser with its current font. This also means that a callback from the font
  dialog may apply to a different text widget than the one you initially called <code>show</code> from! Finally, be aware that the font chooser itself may 
  gain the keyboard focus on some platforms. </p></div>

<div class=yuck><p>
  As of Tk 8.6.10, there are a few bugs in the font chooser on various platforms. Here's a quick rundown including workarounds:
  <ul>
    <li> on macOS, if you don't provide a font via the <code>font</code> configuration option, your callbacks won't be invoked &#8658; always provide an initial font</li>
    <li> on X11, if you don't provide values for all configuration options, those you don't include will be reset to their default values &#8658; whenever you change any option, change all of them, even if it's just to their current value</li>
    <li> on X11, the font dialog includes an <code>Apply</code> button when you provide a callback, but omits it when you don't (and just watch for virtual events); however,
      other bugs mean those virtual events are never generated &#8658; always provide a command callback
    <li> on Windows, you can also leave off the <code>Apply</code> button by not providing a callback; while virtual events are generated on font changes, the <code>font</code>
      configuration option is never updated &#8658; always provide a command callback, and hold onto the font yourself, rather than trying to ask the font dialog
      for it later</li>
    <li> on Windows, a font change virtual event is not generated if you change the <code>font</code> configuration option in your code, though it is on macOS and X11 &#8658; take
      any necessary actions when you change the font in your code rather than in a virtual event handler
  </ul>
  <p>Because of the differences between platforms and the various bugs, testing is far more important when using the font chooser than the other system dialogs.
</p></div>



<h4>Alert and Confirmation Dialogs</h4>

<p>Many applications use various simple modal alerts or dialogs to notify users of an event, ask them
to confirm an action, or make another similar choice via clicking on a button.  Tk provides
a versatile "message box" that encapsulates all these different types of dialogs.</p>

<div class=python><pre>from tkinter import messagebox
messagebox.showinfo(message='Have a good day')</pre></div>
<div class=tcl><pre>tk_messageBox -message "Have a good day"</pre></div>
<div class=ruby><pre>Tk::messageBox :message => 'Have a good day'</pre></div>
<div class=perl><pre>Tkx::tk___messageBox(-message => "Have a good day");</pre></div>

<p class=picture>
<img class='border-0 img-fluid' src='../images/alert_all.png' alt='screen shot'><br />
Simple message boxes.</p>



<div class=python><pre>messagebox.askyesno(
	   message='Are you sure you want to install SuperVirus?'
	   icon='question' title='Install')</pre></div>
<div class=tcl><pre>tk_messageBox -type "yesno" 
	    -message "Are you sure you want to install SuperVirus?" 
	    -icon question -title "Install"</pre></div>
<div class=ruby><pre>Tk::messageBox :type => 'yesno', 
	    :message => 'Are you sure you want to install SuperVirus?', 
	    :icon => 'question', :title => 'Install'</pre></div>
<div class=perl><pre>Tkx::tk___messageBox(-type => "yesno",
	    -message => "Are you sure you want to install SuperVirus?",
	    -icon => "question", -title => "Install");</pre></div>

<p class=picture>
<img class='border-0 img-fluid' src='../images/messagebox_all.png' alt='screen shot'><br />
Example message boxes.</p>


<p>Like the previous dialogs that we've seen, these are modal and return the result of a user's
action to the caller.  The exact return value will depend on the <code>type</code> option passed to
the command, as shown here:</p>

<dl class="row ml-sm-1">
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>ok <em>(default)</em></code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>ok</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>okcancel</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>ok</code> or <code>cancel</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>yesno</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>yes</code> or <code>no</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>yesnocancel</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>yes</code>, <code>no</code> or <code>cancel</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>retrycancel</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>retry</code> or <code>cancel</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>abortretryignore</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>abort</code>, <code>retry</code> or <code>ignore</code></dd>
</dl>


<div class=python>
<p>
  
  Rather than using a <code>type</code> option, Tkinter uses a different method name for each type of dialog.
  The return values vary with the method:</p>

<dl class="row ml-sm-1">
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>showinfo</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>"ok"</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>showwarning</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>"ok"</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>showerror</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>"ok"</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>askokcancel</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>True</code> (on ok) or <code>False</code> (on cancel)</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>askyesno</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>True</code> (on yes) or <code>False</code> (on no)</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>askretrycancel</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>True</code> (on retry) or <code>False</code> (on cancel)</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>askquestion</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>"yes"</code> or <code>"no"</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>askyesnocancel</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">&#8658; <code>True</code> (on yes), <code>False</code> (on no), or <code>None</code> (on cancel)</dd>
</dl>
  
  <div class=yuck><p>Admittedly, the Tkinter <code>messagebox</code> API isn't the most consistent. It mixes return types (strings or booleans),
    there is some duplication (<code>askyesno</code> and <code>askquestion</code>), and one underlying dialog 
    type (<code>abortretryignore</code>) is omitted.</p></div>
</div>


<p>The full list of possible options is shown here:</p>

<dl class="row ml-sm-1">
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>type</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">As described above.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>message</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The main message displayed inside the alert.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>detail</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A secondary message (if needed).</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>title</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Title for the dialog window.  Not used on macOS.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>icon</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Icon, one of <code>info</code> (default), <code>error</code>, <code>question</code> or <code>warning</code>.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>default</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Default button, e.g. <code>ok</code> or <code>cancel</code> for a <code>okcancel</code> dialog.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>parent</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Window of your application this dialog is being posted for.</dd>
</dl>

<p>Additional details can be found in the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/messageBox.htm">reference manual</a>. </p>
  

<div class=upgrade><p>These new messagebox dialogs replace the older <code>tk_dialog</code> command,
which does not comply with current platform user interface conventions.</p></div>


<h3>Rolling Your Own</h3>

<p>If you need to create your own modal dialogs, there are a few things you'll need to take care of. We've covered most
  of them earlier in the chapter, e.g. setting up window styles, positioning the window, etc.</p>

<p>First, you need to ensure that users can only interact with your dialog. You can use <code>grab_set</code> to do this.</p>

<p>If you want your dialog function to block your application (i.e., the call to create the dialog shouldn't return until the
  dialog is dismissed), this is also possible. There's no reason you'd <em>need</em> to do this, as you can respond to
  callbacks, event bindings, etc. while running the normal event loop, destroy the dialog and move on.</p> 

<p>This somewhat cryptic example includes the main steps needed to create a modal dialog.</p>

<div class=python><pre>ttk.Entry(root).grid()   <em># something to interact with</em>
def dismiss ():
    dlg.grab_release()
    dlg.destroy()

dlg = Toplevel(root)
ttk.Button(dlg, text="Done", command=dismiss).grid()
dlg.protocol("WM_DELETE_WINDOW", dismiss) <em># intercept close button</em>
dlg.transient(root)   <em># dialog window is related to main</em>
dlg.wait_visibility() <em># can't grab until window appears, so we wait</em>
dlg.grab_set()        <em># ensure all input goes to our window</em>
dlg.wait_window()     <em># block until window is destroyed</em></pre></div>
<div class=tcl><pre>grid [ttk::entry .e] ; <em># something to interact with</em>
proc dismiss {} {
    grab release .dlg
    destroy .dlg
}
toplevel .dlg
grid [ttk::button .dlg.b -text Done -command dismiss]
wm protocol .dlg WM_DELETE_WINDOW dismiss  ; <em># intercept close button</em>
wm transient .dlg .    ; <em># dialog window is related to main</em>
tkwait visibility .dlg ; <em># can't grab until window appears, so we wait</em>
grab set .dlg          ; <em># ensure all input goes to our window</em>
tkwait window .dlg     ; <em># block until window is destroyed</em>
</pre></div>
<div class=ruby><pre>Tk::Tile::Entry.new(root).grid()   <em># something to interact with</em>
def dismiss
    $dlg.grab_release()
    $dlg.destroy()
end
$dlg = TkToplevel.new(root)
Tk::Tile::Button.new($dlg) {text "Done"; command proc{dismiss}}.grid()
$dlg.protocol("WM_DELETE_WINDOW", proc{dismiss}) <em># intercept close button</em>
$dlg.transient(root)   <em># dialog window is related to main</em>
$dlg.wait_visibility() <em># can't grab until window appears, so we wait</em>
$dlg.grab_set()        <em># ensure all input goes to our window</em>
$dlg.wait_window()     <em># block until window is destroyed</em>
</pre></div>
<div class=perl><pre>$mw->new_ttk__entry()->g_grid();   <em># something to interact with</em>
sub dismiss {
    $dlg->g_grab_release();
    $dlg->g_destroy();
}
$dlg = $mw->new_toplevel;
$dlg->new_ttk__button(-text => "Done", -command => sub{dismiss})->g_grid();
$dlg->g_wm_protocol("WM_DELETE_WINDOW", sub{dismiss}); <em># intercept close button</em>
$dlg->g_wm_transient($mw);   <em># dialog window is related to main</em>
$dlg->g_tkwait_visibility(); <em># can't grab until window appears, so we wait</em>
$dlg->g_grab_set();          <em># ensure all input goes to our window</em>
$dlg->g_tkwait_window();     <em># block until window is destroyed</em></pre></div>

<div class=tip><p>Application code blocking like this is an example of running a nested event loop that we generally recommend against,
  though it may be more convenient in certain circumstances.</p></div>  

<div class=python><p>Tkinter's standard library includes a <code>simpledialog</code>  module that helps with building your own
  dialogs. Because it uses the classic Tk widgets rather than the newer themed widgets, we don't recommend using it
  directly. However, it does illustrate how to use some of the techniques for making dialogs behave that we just covered.</p>
</div>



<h1>Organizing Complex Interfaces</h1>

<p>If you have a complex user interface, you'll need to find ways to organize it that don't overwhelm your
users.  There are several different approaches to doing this. Both general-purpose and
platform-specific human interface guidelines are good resources when designing your user interface.</p>

<p>When we talk about complexity in this chapter, we don't mean the underlying technical complexity
of how the program is implemented. Instead, we mean how it's presented to users.  A user interface can be pulled
together from many different modules, built from hundreds of widgets combined in a deeply nested hierarchy,
but that doesn't mean users need to perceive it as complex.</p>

<h4>Multiple windows</h4>
<p>One benefit of using multiple windows in an application can be to simplify the user interface.
  Done well, it can require users to focus only on the contents of one window at a time to complete a task.
  Forcing them to focus on or switch between several windows can also have the opposite effect.  
  Similarly, showing only the widgets relevant to the current task (i.e., via <code>grid</code>) can 
  help simplify the user interface.</p>


<h4>White space</h4>
<p>If you do need to display a large number of widgets onscreen at the same time, think about
how to organize them visually.  We've seen how <code>grid</code> makes it easy to align 
widgets with each other.  White space is another useful aid.  Place related widgets close
to each other (possibly with an explanatory label immediately above) and separate them from other
widgets by white space. This helps users organize the user interface in their own minds.</p>

<div class=tip><p>The recommended amount of white space around different widgets, between groups of widgets, around borders, etc.
is highly platform-specific.  While you can do an adequate job without worrying about exact pixel numbers,
if you want a highly polished user interface, you'll need to tune this for each platform.</p></div>


 <a name="separator"></a><h2>Separator</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/separator.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_separator.htm">Reference Manual</a></li>
</ul>


<p>A second approach to grouping widgets in one display is to place a thin horizontal or vertical rule between 
groups of widgets; often, this can be more space-efficient than using white space, which may be relevant for a
tight display.  Tk provides a simple <b>separator</b> widget for this purpose.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_separator_all.png' alt='screen shot'><br />
Separator widgets.</p>


<div class=python><p>Separators are created using the <code><b>ttk.Separator</b></code> class:</p>
	<pre>s = ttk.Separator(<em>parent</em>, orient=HORIZONTAL)</pre></div>
<div class=tcl><p>Separators are created using the <code><b>ttk::separator</b></code> command:</p>
	<pre>ttk::separator .s -orient horizontal</pre></div>
<div class=ruby><p>Separators are created using the <code><b>Tk::Tile::Separator</b></code> class:</p>
	<pre>s = Tk::Tile::Separator.new(<em>parent</em>) { orient 'horizontal' }</pre></div>
<div class=perl>Separators are created using the <code><b>new_ttk__separator</b></code> method, a.k.a. <code><b>Tkx::ttk__separator</b></code>:
	<pre>$sep = $<em>parent</em>->new_ttk__separator(-orient => 'horizontal');</pre></div>

<p>The <code>orient</code> option may be specified as either <code>horizontal</code> or <code>vertical</code>.</p>


 <a name="labelframe"></a><h2>Label Frames</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/labelframe.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_labelframe.htm">Reference Manual</a></li>
</ul>

<p>A <b>labelframe</b> widget, also commonly known as a <em>group box</em>, provides another way to group
related components.  It acts like a normal <code>ttk::frame</code>, in that it contains other widgets that you 
<code>grid</code> inside it.  However, it is visually set off from the rest of the user interface.  
You can optionally provide a text label to be displayed outside the labelframe.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_labelframe_all.png' alt='screen shot'><br />
Labelframe widgets.</p>


<div class=python><p>Labelframes are created using the <code><b>ttk.Labelframe</b></code> class:</p>
	<pre>lf = ttk.Labelframe(<em>parent</em>, text='Label')</pre></div>
<div class=tcl><p>Labelframes are created using the <code><b>ttk::labelframe</b></code> command:</p>
	<pre>ttk::labelframe .lf -text "Label"</pre></div>
<div class=ruby><p>Labelframes are created using the <code><b>Tk::Tile::Labelframe</b></code> class:</p>
	<pre>lf = Tk::Tile::Labelframe.new(<em>parent</em>) { text 'Label' }</pre></div>
<div class=perl>Labelframes are created using the <code><b>new_ttk__labelframe</b></code> method, a.k.a. <code><b>Tkx::ttk__labelframe</b></code>:
	<pre>$lf = $<em>parent</em>->new_ttk__labelframe(-text => "Label");</pre></div>



 <a name="panedwindow"></a><h2>Paned Windows</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/panedwindow.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_panedwindow.htm">Reference Manual</a></li>
</ul>

<p>A <b>panedwindow</b> widget lets you stack two or more resizable widgets above and below each
other (or to the left and right).  Users can adjust the relative heights (or widths) of
each pane by dragging a <em>sash</em> located between them.  Typically the widgets you're adding 
to a panedwindow will be frames containing many other widgets.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_panedwindow_all.png' alt='screen shot'><br />
Panedwindow widgets  (shown here managing several labelframes).</p>



<div class=python>Panedwindows are created using the <code><b>ttk.Panedwindow</b></code> class:</p>
	<pre>p = ttk.Panedwindow(<em>parent</em>, orient=VERTICAL)
<em># two panes, each of which would get widgets gridded into it:</em>
f1 = ttk.Labelframe(p, text='Pane1', width=100, height=100)
f2 = ttk.Labelframe(p, text='Pane2', width=100, height=100)   
p.add(f1)
p.add(f2)
</pre></div>
<div class=tcl><p>Panedwindows are created using the <code><b>ttk::panedwindow</b></code> command:</p>
	<pre>ttk::panedwindow .p -orient vertical
<em># two panes, each of which would get widgets gridded into it:</em>
ttk::labelframe .p.f1 -text Pane1 -width 100 -height 100
ttk::labelframe .p.f2 -text Pane2 -width 100 -height 100
.p add .p.f1
.p add .p.f2
</pre></div>
<div class=ruby><p>Panedwindows are created using the <code><b>Tk::Tile::Paned</b></code> class:</p>
	<pre>p = Tk::Tile::Paned.new(<em>parent</em>) { orient 'vertical' }
<em># two panes, each of which would get widgets gridded into it:</em>
f1 = Tk::Tile::Labelframe.new(p) {text 'Pane1'; width 100; height 100;}
f2 = Tk::Tile::Labelframe.new(p) {text 'Pane2'; width 100; height 100;}
p.add f1, nil
p.add f2, nil
</pre>
<div class=fyi><p>The extra <code>nil</code> parameter to <code>add</code> can be replaced with a hash of
pane-specific options, which usually aren't needed.</p></div>
</div>
<div class=perl>Panedwindows are created using the <code><b>new_ttk__panedwindow</b></code> method, a.k.a. <code><b>Tkx::ttk__panedwindow</b></code>:
<pre>$p = $mw->new_ttk__panedwindow(-orient => 'vertical');
<em># two panes, each of which would get widgets gridded into it:</em>
$f1 = $p->new_ttk__labelframe(-text => "Panel", -width => 100, -height => 100);
$f2 = $p->new_ttk__labelframe(-text => "Pane2", -width => 100, -height => 100); 
$p->add($f1);
$p->add($f2);
</pre></div>

<p>A panedwindow is either <code>vertical</code> (its panes are stacked vertically on top of each other)
or <code>horizontal</code>.  Importantly, each pane you add to the panedwindow must be a
<em>direct child</em> of the panedwindow itself.</p>

<p>Calling the <code>add</code> method adds a new pane at the end of the list of panes. The
<code>insert <em>position</em> <em>subwindow</em></code> method allows you to place the pane at the given position
in the list of panes (0..n-1). If the pane is already managed by the panedwindow, it will be moved
to the new position.  You can use the <code>forget <em>subwindow</em></code> to remove a pane from the
panedwindow (you can also pass a position instead of a subwindow).</p>

<p>You can assign relative weights to each pane so that if the overall panedwindow resizes,
certain panes will be allocated more space than others.  As well, you can adjust the position of each sash
between items in the panedwindow.  See the 
<a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_panedwindow.htm">command reference</a> for details.</p>


 <a name="notebook"></a><h2>Notebook</h2>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/notebook.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_notebook.htm">Reference Manual</a></li>
</ul>

<p>A <b>notebook</b> widget uses the metaphor of a tabbed notebook to let users switch between
one of several <em>pages</em>, using an index <em>tab</em>.  Unlike with paned
windows, users only see a single page (akin to a pane) at a time.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_notebook_all.png' alt='screen shot'><br />
Notebook widgets.</p>



<div class=python><p>Notebooks are created using the <code><b>ttk.Notebook</b></code> class:</p>
	<pre>n = ttk.Notebook(<em>parent</em>)
f1 = ttk.Frame(n)   <em># first page, which would get widgets gridded into it</em>
f2 = ttk.Frame(n)   <em># second page</em>
n.add(f1, text='One')
n.add(f2, text='Two')
</pre></div>
<div class=tcl><p>Notebooks are created using the <code><b>ttk::notebook</b></code> command:</p>
	<pre>ttk::notebook .n
ttk::frame .n.f1; <em># first page, which would get widgets gridded into it </em>
ttk::frame .n.f2; <em># second page</em>
.n add .n.f1 -text "One"
.n add .n.f2 -text "Two"
</pre></div>
<div class=ruby><p>Notebooks are created using the <code><b>Tk::Tile::Notebook</b></code> class:</p>
	<pre>n = Tk::Tile::Notebook.new(<em>parent</em>)
f1 = Tk::Tile::Frame.new(n); <em># first page, which would get widgets gridded into it</em>
f2 = Tk::Tile::Frame.new(n); <em># second page</em>
n.add f1, :text => 'One'
n.add f2, :text => 'Two'
</pre></div>
<div class=perl>Notebooks are created using the <code><b>new_ttk__notebook</b></code> method, a.k.a. <code><b>Tkx::ttk__notebook</b></code>:
<pre>$n = $mw->new_ttk__notebook;
$f1 = $n->new_ttk__frame; <em># first page, which would get widgets gridded into it</em>
$f2 = $n->new_ttk__frame; <em># second page</em>
$n->add($f1, -text => "One");
$n->add($f2, -text => "Two");</pre></div>


<p>The operations on tabbed notebooks are similar to those on panedwindows.  Each page is typically
a frame and again must be a direct child (subwindow) of the notebook itself.  A new page and its associated tab are
added after the last tab with the <code>add <em>subwindow</em> <em>?option</em> <em>value...?</em></code> method.
The <code>text</code> tab option sets the label on the tab; also useful is the <code>state</code>
tab option, which can have the value <code>normal</code>, <code>disabled</code> (not selectable), or
<code>hidden</code>.  </p>

<p>To insert a tab at somewhere other than the end of the list, use the 
<code>insert <em>position</em> <em>subwindow</em> <em>?option</em> <em>value...?</em></code>, and to remove a given tab, use the <code>forget</code> method,
passing it either the position (0..n-1) or the tab's subwindow.  You can retrieve the list of all
subwindows contained in the notebook via the <code>tabs</code> method.</p>

<div class=python>
<p>To retrieve the subwindow that is currently selected, call the <code>select</code> method, and change the selected tab by 
passing it either the tab's position or the subwindow itself as a parameter.</p>

<p>To change a tab option (like the text label on the tab or its state), you can use the <code>tab(<em>tabid</em>, <em>option</em>=<em>value</em>)</code>
method (where <code><em>tabid</em></code> is again the tab's position or subwindow); omit the <code>=<em>value</em></code> to return the current
value of the option.</p>
</div>

<div class=tcl>
<p>To retrieve the selected subwindow, call the <code>select</code> method, and change the selected tab by 
passing it either the tab's position or the subwindow itself as a parameter.</p>

<p>To change a tab option (like the text label on the tab or its state), you can use the <code>tab <em>tabid</em> <em>option</em> <em>value</em></code>
method (where <code><em>tabid</em></code> is again the tab's position or subwindow); omit the <code>value</code> to return the current
value of the option.</p>
</div>

<div class=ruby>
<p>To retrieve the subwindow that is currently selected, call the <code>selected</code> method, and change the selected tab by 
calling the <code>select</code> method, passing it either the tab's position or the subwindow itself as a parameter.</p>

<p>To change a tab option (like the text label on the tab or its state), you can use the 
<code>itemconfigure <em>tabid</em>, <em>:option => value</em></code> method (where <code><em>tabid</em></code> is again the tab's 
position or subwindow); use the <code>itemcget <em>tabid</em>, <em>:option</em></code> to return the current
value of the option.</p>

<div class=yuck><p>The <code>itemconfigure</code> and <code>itemcget</code> methods exist alongside the <code>tabconfigure</code> and <code>tabcget</code>
methods, which are more true to the API; however the <code>tabcget</code> method currently has a bug in it.</p></div>
</div>

<div class=perl>
<p>To retrieve the subwindow that is currently selected, call the <code>select</code> method, and change the selected tab by 
passing it either the tab's position or the subwindow itself as a parameter.</p>

<p>To change a tab option (like the text label on the tab or its state), you can use the <code>tab <em>tabid</em> <em>option</em> <em>value</em></code>
method (where <code><em>tabid</em></code> is again the tab's position or subwindow); omit the <code><em>value</em></code> to return the current
value of the option.</p>
</div>


<p>Notebook widgets generate a <code>&lt;&lt;NotebookTabChanged&gt;&gt;</code> virtual event whenever a new tab is selected.</p>

<p>Again, there are a variety of less frequently used options and commands detailed in the
<a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_notebook.htm">command reference</a>.</p>




<h1>Fonts, Colors, Images</h1>

<p>This chapter describes how Tk handles fonts, colors, and images.  We've touched on all of these before, but here we'll
provide a more in-depth treatment.</p>


 <a name="fonts"></a><h2>Fonts</h2>

<p>Tk's label widget allows you to change the font used to display text via the <code>font</code> configuration option.
  The canvas and text widgets, covered in the following chapters, also allow you to specify fonts.
  Other themed widgets that display text may not have a <code>font</code> configuration option, but their fonts can be 
  changed using styles.</p>
  
  <div class=fyi><p>We'll cover styles in detail later. In essence, they replace the old way of tweaking multiple configuration options on 
    individual widgets. Instead, fonts, colors, and other settings that control appearance can be bundled together in
    a style. That style can then be applied to multiple widgets. It's akin to the difference between hardcoding
    display-oriented markup inside HTML pages vs. using CSS to keep display-specific information separate.</p></div>
    
<p>As with many things in Tk, the default fonts are usually a good choice. If you need to make changes, this section 
  shows you the best way to do so, using <em>named fonts</em>. Tk includes named fonts suitable for use in all different
  components of your user interface. They take into account the conventions of the specific platform you're running on.
  You can also specify your own fonts when you need additional flexibility.</p>
  
<p>The <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/font.htm">font command reference</a> provides full details on specifying fonts, as well as
other font-related operations.</p>



<div class=upgrade><p>Many older Tk programs hardcoded fonts, using either the "family size style" format we'll see below,
X11 font names, or the older and more arcane X11 font specification strings.  These applications looked increasingly
dated as platforms evolved.  Worse, fonts were often specified on a per-widget basis, leaving font decisions spread 
throughout the code.  Named fonts, particularly the standard fonts that Tk provides, are a far better solution.  
Reviewing and updating font decisions is an easy and important change to make in any existing applications.</p></div>

<h3>Standard Fonts</h3>
<p>Each platform defines specific fonts that should be used for standard user interface elements.  Tk encapsulates many 
  of these decisions into a standard set of named fonts. They are available on all platforms, though the exact font used
  will vary. This helps abstract away platform differences. Of course, the standard widgets use these named fonts.
  The predefined fonts are:</p>

<dl class="row ml-sm-1">
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkDefaultFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Default for items not otherwise specified.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkTextFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Used for entry widgets, listboxes, etc.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkFixedFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A standard fixed-width font.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkMenuFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The font used for menu items.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkHeadingFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Font for column headings in lists and tables.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkCaptionFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A font for window and dialog caption bars.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkSmallCaptionFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A smaller caption font for tool dialogs.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkIconFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A font for icon captions.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>TkTooltipFont</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">A font for tooltips.</dd>
</dl>

<h3>Platform-Specific Fonts</h3>

<p>Tk provides additional named fonts to help you comply with less common situations on specific platforms.
  Individual platform guidelines detail how and where these fonts should be used. These fonts are only defined on 
  specific platforms. You'll need to take that into account if your application is portable across platforms.</p>

<p>Tk on X11 recognizes any valid X11 font name (see, e.g., the <code>xlsfonts</code> command).  However, these can vary
  with the operating system, installed software, and the configuration of the individual machine. There is no guarantee
  that a font available on your X11 system has been installed on any other X11 system.</p>

<p>On Windows, Tk provides named fonts for all the fonts that can be set in the "Display" Control Panel.
  It recognizes the following font names: <code>system</code>, <code>ansi</code>, <code>device</code>, <code>systemfixed</code>, <code>ansifixed</code>, and <code>oemfixed</code>.</p>

On macOS, the Apple Human Interface Guidelines (HIG) specifies a number of additional fonts. 
Tk recognizes the following names: <code>systemSystemFont</code>,
<code>systemSmallSystemFont</code>, <code>systemApplicationFont</code>, <code>systemViewsFont</code>, <code>systemMenuItemFont</code>,
<code>systemMenuItemCmdKeyFont</code>, <code>systemPushButtonFont</code>, <code>systemAlertHeaderFont</code>, <code>systemMiniSystemFont</code>,
<code>systemDetailEmphasizedSystemFont</code>, <code>systemEmphasizedSystemFont</code>, <code>systemSmallEmphasizedSystemFont</code>,
<code>systemLabelFont</code>, <code>systemMenuTitleFont</code>, <code>systemMenuItemMarkFont</code>, <code>systemWindowTitleFont</code>,
<code>systemUtilityWindowTitleFont</code>, <code>systemToolbarFont</code>, and <code>systemDetailSystemFont</code>.</p>


<h3>Working with Named Fonts</h3>

<p>Tk provides several operations that help you work with named fonts. You can start by getting a list of all the
  currently defined named fonts.</p>
  
<div class=python><pre>from tkinter import font
font.names()</pre></div>
<div class=tcl><pre>font names</pre></div>
<div class=ruby><pre>TkFont.names</pre></div>
<div class=perl><pre>Tkx::font_names()</pre></div>

<p>You can find out the actual system font represented by an abstract named font. 
  This consists of the <code>family</code> (e.g., <code>Times</code> or <code>Helvetica</code>), 
  the <code>size</code> (in points if positive, in pixels if negative), 
  the <code>weight</code> (<code>normal</code> or <code>bold</code>),
  the <code>slant</code> (<code>roman</code> or <code>italic</code>), 
  and boolean attributes for <code>underline</code> and <code>overstrike</code>. 
  You can find out the font's <code>metrics</code> (how tall characters in the font can be and whether it is monospaced),
  and even <code>measure</code> how many pixels wide a piece of text rendered in the font would be.</p>
  
<div class=python><pre>>>> <b>from tkinter import font</b>
>>> <b>f = font.nametofont('TkTextFont')</b>
>>> <b>f.actual()</b>
{'family': '.AppleSystemUIFont', 'size': 13, 'weight': 'normal', 'slant': 'roman', 'underline': 0, 'overstrike': 0}
>>> <b>f.metrics()</b>
{'ascent': 13, 'descent': 3, 'linespace': 16, 'fixed': 0}
>>> <b>f.measure('The quick brown fox')</b>
124</pre>
<p>Tkinter provides a <code>Font</code> class to hold information about a named font. You can create an instance of this
  class from the name of a font using the <code>nametofont</code> function. When you use named fonts in your application 
  (e.g., via a label's <code>font</code> configuration option), you can supply either the font name (as a string) or a
  <code>Font</code> instance.</p>
</div>
<div class=tcl><pre>% <b>font actual TkTextFont</b>
-family .AppleSystemUIFont -size 13 -weight normal -slant roman -underline 0 -overstrike 0
% <b>font metrics TkTextFont</b>
-ascent 13 -descent 3 -linespace 16 -fixed 0
% <b>font measure TkTextFont "The quick brown fox"</b>
124</pre></div>
<div class=ruby><pre>irb(main):003:0> <b>TkFont.actual "TkTextFont"</b>
=> [["family", ".AppleSystemUIFont"], ["size", 13], ["weight", "normal"], ["slant", "roman"], ["underline", false], ["overstrike", false]]
irb(main):004:0> <b>TkFont.metrics "TkTextFont"</b>
=> [["ascent", 13], ["descent", 3], ["linespace", 16], ["fixed", 0]]
irb(main):005:0> <b>TkFont.measure "TkTextFont", "The quick brown fox"</b>
=> 124</pre></div>
<div class=perl><pre>perl> <b>Tkx::font_actual('TkTextFont')</b>
-family .AppleSystemUIFont -size 13 -weight normal -slant roman -underline 0 -overstrike 0
perl> <b>Tkx::font_metrics('TkTextFont')</b>
-ascent 13 -descent 3 -linespace 16 -fixed 0
perl> <b>Tkx::font_measure('TkTextFont', 'The quick brown fox')</b>
124</pre></div>
  
<div class=tip><p>Trying these in an interactive shell and got an error? Even though we're not displaying anything onscreen,
  you need to initialize Tk before using the various font functions.</p></div>
     
<p>You can also create your own fonts, which can then be used exactly like the predefined ones.  To do so, choose
  a name for the font and specify its font attributes as above.</p>

<div class=python><pre>from tkinter import font
highlightFont = font.Font(family='Helvetica', name='appHighlightFont', size=12, weight='bold')
ttk.Label(root, text='Attention!', font=highlightFont).grid()
</pre>
<p>If you don't supply a name, Tkinter will generate one, which you can retrieve via <code><em>font</em>.name</code> or 
  <code>str(<em>font</em>)</code>. It's usually best to supply one.</p>
</div>
<div class=tcl><pre>font create AppHighlightFont -family Helvetica -size 12 -weight bold
grid [ttk::label .l -text "Attention!" -font AppHighlightFont]</pre></div>
<div class=ruby><pre>AppHighlightFont = TkFont.new :family => 'Helvetica', :size => 12, :weight => 'bold'
Tk::Tile::Label.new(root) {text 'Attention!'; font AppHighlightFont}.grid</pre></div>
<div class=perl><pre>Tkx::font_create("AppHighlightFont", -family => "Helvetica", -size => 12, -weight => "bold");
$l = $<em>parent</em>->new_ttk__label(-text => "Attention!", -font => "AppHighlightFont");
$l->g_grid;</pre></div>

<p>The <code>family</code> attribute specifies the font family. Tk ensures the names <code>Courier</code>, <code>Times</code>,
   and <code>Helvetica</code> are available, though they may be mapped to an appropriate monospaced, serif, or sans-serif font).
   Other fonts installed on your system can be used, but the usual caveats about portability apply. 
   You can get the names of all available families with: </p>

<div class=python><pre>font.families()</pre></div>
<div class=tcl><pre>font families</pre></div>
<div class=ruby><pre>TkFont.families</pre></div>
<div class=perl><pre>Tkx::font_families()</pre></div>


<div class=tip><p>You can change the attributes of a named font using its <code>configure</code> method. You might do this in response
  to menu options allowing users to zoom in or out, i.e., increasing or decreasing font sizes.</p></div>


<h3>Font Descriptions</h3>

<p>Another way to specify fonts is via a list of attributes. starting with the font family, and then optionally
includes a size, and one or more style options.  Some examples of this are <code>Helvetica</code>, <code>Helvetica 12</code>,
<code>Helvetica 12 bold</code>, and <code>Helvetica 12 bold italic</code>.  These font descriptions can be used 
anywhere you'd use a named font, e.g., a <code>font</code> configuration option.</p>

<div class=upgrade><p>In general, switching from font descriptions to named fonts is advisable to isolate font differences in one
location in the program.</p></div>


 <a name="colors"></a><h2>Colors</h2>

<p>As with fonts, there are various ways to specify colors.  Full details can be found in the
<a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/colors.htm">colors command reference</a>.</p>


<p>In general, Tk widgets default to the right colors for most situations.  If you'd like to 
  change colors, you'll do so via widget-specific commands or options, e.g., the
  label's <code>foreground</code> and <code>background</code> configuration options. For most themed 
  widgets, color changes are specified through styles, not by changing the widget directly.</p>
  
<p>You can specify colors via RGB, as you would in HTML or CSS, e.g. <code>#3FF</code> or <code>#FF016A</code>.
  Tk also recognizes names such as <code>red</code>, <code>black</code>, <code>grey50</code>, <code>light blue</code>, etc.</p>
  
<div class=fyi><p>Tk recognizes the standard names for colors defined by X11. You can find a complete list in the 
  command reference (noted above).</p></div>
  
<p>As with fonts, both macOS and Windows specify many system-specific abstract color names (again,
  see the reference). The actual color these correspond to may depend on system settings and can change
  over time, e.g., dark mode, text highlight colors, default backgrounds.</p>
  
<p>If needed, you can find the RGB values (each between 0 and 65535) for a color using the <code>winfo_rgb</code> method on any widget.</p>


<div class=python><pre>root.winfo_rgb('red')</pre></div>
<div class=tcl><pre>winfo rgb . red</pre></div>
<div class=ruby><pre>root.winfo_rgb('red')</pre></div>
<div class=perl><pre>$mw->g_winfo_rgb('red')</pre></div>


<div class=tip><p>It should probably go without saying, but restraint in the use of colors is highly advisable!</p></div>


 <a name="images"></a><h2>Images</h2>

<p>We've seen the basics of how to use images already, displaying them in labels or buttons,
for example.  We create an image object, usually from a file on disk.</p>

<div class=python><pre>imgobj = PhotoImage(file='myimage.gif')
label['image'] = imgobj</pre></div>
<div class=tcl><pre>image create photo imgobj -file "myimage.gif"
.label configure -image imgobj</pre></div>
<div class=ruby><pre>image = TkPhotoImage.new(:file => "myimage.gif")
label['image'] = image</pre></div>
<div class=perl><pre>Tkx::image_create_photo("imgobj", -file => "myimage.gif");
$l->configure(-image => "imgobj");</pre></div>

<p>Out of the box, Tk 8.5 includes support for GIF and PPM/PNM images. Tk 8.6 added PNG to this short list. However, there is a Tk
extension library called <code>Img</code>, which adds support for many others: BMP, XBM, XPM, JPEG, PNG (if you're using 8.5),
TIFF, etc.  Though not included directly in the Tk core, Img is usually included with
other packaged distributions (e.g., ActiveTcl).  </p>

<div class=python><p>Instead of using Tk's Img extension, Tkinter uses a made-for-Python image library called <code>PIL</code> (Python Imaging Library).
More specifically, we'll use a more up-to-date fork of PIL called <code>pillow</code>. As it doesn't come bundled with Python, you'll normally
need to install it. You should be able to do so via, e.g., <code>pip install Pillow</code>.</p>
<pre>from PIL import ImageTk, Image
myimg = ImageTk.PhotoImage(Image.open('myimage.png'))</pre>
<p>The <code>ImageTk.PhotoImage</code> call provides a drop-in replacement for Tk's <code>PhotoImage</code> but supports the broader range of image types.</p>
</div>
<div class=tcl><pre>package require Img
image create photo myimg -file "myimage.png"</pre></div>
<div class=ruby><pre>require 'tkextlib/tkimg'
myimg = TkPhotoImage.new(:file => 'myimage.png')</pre></div>
<div class=perl><pre>Tkx::package_require("Img");
Tkx::image_create_photo("myimg", -file => "myimage.png");</pre></div>


<p>Tk's images are actually quite powerful and sophisticated and provide a wide variety of ways to 
inspect and modify images.  You can find out more from the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/image.htm">image command
reference</a> and the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/photo.htm">photo command reference</a>.</p>


<div class=upgrade><p>The types of multi-color images we've seen here are referred to in Tk as <em>photo</em> images.
Tk also provides a second type of images, two-bit <em>bitmap</em> images, which were widely used
in the '90s when most Unix workstations used quite large (compared with PCs) monitors, but
they were only black and white.  Needless to say, color is <em>mostly</em> de rigueur these days, so updating
to full-color images for icons and so on is highly advisable. Though in what some may consider retro-styling,
some <em>flat</em> and <em>material</em> design schemes have returned to black and white. <em>Plus &ccedil;a change...</em></p></div>



<h1>Canvas</h1>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/canvas.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/canvas.htm">Reference Manual</a></li>
</ul>

<p>A <b>canvas</b> widget manages a 2D collection of graphical objects &#8212; lines, circles,
text, images, other widgets, and more.   Tk's canvas is an incredibly powerful and flexible widget,
and truly one of Tk's highlights.  It is suitable for a wide range of uses, including drawing
or diagramming, CAD tools, displaying or monitoring simulations or actual equipment, and
building more complex widgets out of simpler ones.</p>
<p>Note: Canvas widgets are part of the classic Tk widgets, not the themed Tk widgets.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_canvas_all.png' alt='screen shot'><br />
Canvas widgets.</p>

<div class=python><p>Canvas widgets are created using the <code><b>Canvas</b></code> class:</p>
	<pre>canvas = Canvas(<em>parent</em>, width=500, height=400, background='gray75')</pre></div>
<div class=tcl><p>Canvas widgets are created using the <code><b>tk::canvas</b></code> command:</p>
	<pre>tk::canvas .canvas -width 500 -height 400 -background gray75</pre></div>
<div class=ruby><p>Canvas widgets are created using the <code><b>TkCanvas</b></code> class:</p>
	<pre>canvas = TkCanvas.new(<em>parent</em>) {width 500; height 400; background 'gray75'}</pre></div>
<div class=perl><p>Canvas widgets are created using the <code><b>new_tk__canvas</b></code> method, a.k.a. <code><b>Tkx::tk__canvas</b></code>:
	<pre>$canvas = $<em>parent</em>->new_tk__canvas(-width => 500, -height => 400, -background => 'gray75');</pre></div>


<p>You'll often provide a width and height, either in pixels or any of the other standard distance units. 
  As always, you can ask the geometry manager to expand it to fill the available space in the window.
  You might provide a default background color for the canvas, specifying colors in any of the ways
  you learned about in the last chapter. Canvas widgets also support other appearance options like <code>relief</code> and
  <code>borderwidth</code> that we've used before.</p>




<p>Canvas widgets have a tremendous number of features, and we won't cover everything here.
Instead, we'll start with a simple example, a freehand sketching tool, and incrementally
add new pieces to it, each showing another new feature of canvas widgets.</p>


 <a name="creating"></a><h2>Creating Items</h2>

<p>When you create a new canvas widget, it is essentially a large rectangle with nothing on it,
truly a blank canvas in other words.  To do anything useful with it, you'll need to add <em>items</em>
to it.  There are a wide variety of different <em>types</em> of items you can add.  Here, we'll
add a simple <em>line</em> item to the canvas.</p>

<p>To create a line, you need to specify its starting and ending <em>coordinates</em>. 
  Coordinates are expressed as the number of pixels away from the top-left corner, both horizontally
  and vertically, i.e. (<em>x</em>,<em>y</em>). 
  The pixel at the top-left corner, known as the <em>origin</em>, has coordinates (0,0).
  The <em>"x"</em> value increases as you move to the right and the <em>"y"</em> value increases as you move down.
  A line is described by two points, which we'd refer to as (<em>x0</em>,<em>y0</em>) and (<em>x1</em>,<em>y1</em>).
  This code creates a line from (10,5) to (200,50):</p>

<div class=python><pre>canvas.create_line(10, 5, 200, 50)</pre>
<p>The <code>create_line</code> method returns an item <em>id</em> (an integer) that uniquely refers to this item.
  We'll see how it can be used shortly.
  Often, we don't need to refer to the item later and can ignore the returned id.</p>
</div>
  
<div class=tcl><pre>.canvas create line 10 5 200 50</pre>
<p>The <code>create line</code> command returns an item <em>id</em> (an integer) that uniquely refers to this item.
  We'll see how it can be used shortly.
  Often, we don't need to refer to the item later and can ignore the returned id.</p>
</div>

<div class=ruby><pre>TkcLine.new( canvas, 10, 5, 200, 50)</pre>
<p>This command returns an item object representing the line.  We'll see how it can be used shortly.  
  Often, we don't need to refer to the item later, and can ignore the returned item object.</p>

<div class=fyi><p>Internally, Tk refers to individual canvas items by a unique <em>id</em>, an integer starting at
1 and counting up for each object created.  Ruby encapsulates this well inside item objects.
In some cases, as well as to understand much of the reference documentation, you'll need this
numeric id. You can retrieve it via the <code>id</code> method of a canvas item object.</p></div>
</div>

<div class=perl><pre>$canvas->create_line(10,5,200,50);</pre>
<p>The <code>create_line</code> method returns an item <em>id</em> (an integer) that uniquely refers to this item.
   We'll see how it can be used shortly.
   Often, we don't need to refer to the item later and can ignore the returned id.</p>
</div>


<h3>A Simple Sketchpad</h3>

<p>Let's start our simple sketchpad example.  For now, we'll implement freehand drawing on the canvas with the mouse.
 We create a canvas widget and attach event bindings to it to capture mouse clicks and drags.  When the mouse is first pressed,
 we'll remember that location as the "start" coordinates of our next line. As the mouse is moved with the mouse button 
 held down, we create a line item from this "start" position to the current mouse location. 
 This current location becomes the "start" position for the next line item. Every mouse drag creates a new line item.</p>

<div class=python><pre>from tkinter import *
from tkinter import ttk

def savePosn(event):
    global lastx, lasty
    lastx, lasty = event.x, event.y

def addLine(event):
    canvas.create_line((lastx, lasty, event.x, event.y))
    savePosn(event)

root = Tk()
root.columnconfigure(0, weight=1)
root.rowconfigure(0, weight=1)

canvas = Canvas(root)
canvas.grid(column=0, row=0, sticky=(N, W, E, S))
canvas.bind("&lt;Button-1&gt;", savePosn)
canvas.bind("&lt;B1-Motion&gt;", addLine)

root.mainloop()</pre>

<p>Again, in this simple example, we're using global variables to store the start position. In practice, we'd encapsulate all of this in a Python
  class. Here's one way we could do that. Note that this example creates a subclass of <code>Canvas</code>, which is treated like
  any other widget in the code. We could have equally well used a standalone class, as we did with the "feet to meters" example.</p>
<pre>from tkinter import *
from tkinter import ttk

class Sketchpad(Canvas):
    def __init__(self, parent, **kwargs):
        super().__init__(parent, **kwargs)
        self.bind("&lt;Button-1&gt;", self.save_posn)
        self.bind("&lt;B1-Motion&gt;", self.add_line)
        
    def save_posn(self, event):
        self.lastx, self.lasty = event.x, event.y

    def add_line(self, event):
        self.create_line((self.lastx, self.lasty, event.x, event.y))
        self.save_posn(event)

root = Tk()
root.columnconfigure(0, weight=1)
root.rowconfigure(0, weight=1)

sketch = Sketchpad(root)
sketch.grid(column=0, row=0, sticky=(N, W, E, S))

root.mainloop()
</pre>
</div>

<div class=tcl><pre>package require Tk

grid [tk::canvas .canvas] -sticky nwes -column 0 -row 0
grid columnconfigure . 0 -weight 1
grid rowconfigure . 0 -weight 1

bind .canvas &lt;1&gt; "set lastx %x; set lasty %y"
bind .canvas &lt;B1-Motion&gt; "addLine %x %y"

proc addLine {x y} {
    .canvas create line $::lastx $::lasty $x $y
    set ::lastx $x; set ::lasty $y
}
</pre></div>
<div class=ruby><pre>require 'tk'
root = TkRoot.new()

$canvas = TkCanvas.new(root)
$canvas.grid :sticky => 'nwes', :column => 0, :row => 0
TkGrid.columnconfigure( root, 0, :weight => 1 )
TkGrid.rowconfigure( root, 0, :weight => 1 )

$canvas.bind( "1", proc{|x,y| @lastx = x; @lasty = y}, "%x %y")
$canvas.bind( "B1-Motion", proc{|x, y| addLine(x,y)}, "%x %y")

def addLine (x,y)
  TkcLine.new( $canvas, @lastx, @lasty, x, y )
  @lastx = x; @lasty = y; 
end

Tk.mainloop
</pre></div>
<div class=perl><pre>use Tkx;
$mw = Tkx::widget->new(".");

$canvas = $mw->new_tk__canvas;
$canvas->g_grid(-column=>0, -row=>0, -sticky=>"nwes");
$mw->g_grid_columnconfigure(0, -weight=>1);
$mw->g_grid_rowconfigure(0, -weight=>1);

$canvas->g_bind("&lt;1&gt;", [sub {my ($x,$y) = @_; $lastx=$x; $lasty=$y}, Tkx::Ev("%x","%y")]);
$canvas->g_bind("&lt;B1-Motion&gt;", [sub {my ($x,$y) = @_; addLine($x,$y)}, Tkx::Ev("%x","%y")]);

sub addLine {
    my ($x,$y) = @_;
    $canvas->create_line($lastx,$lasty,$x,$y);
    $lastx = $x; $lasty = $y;
}

Tkx::MainLoop();
</pre></div>


<p>Try it out - drag the mouse around the canvas to create your masterpiece.</p>


<h3>Item Attributes</h3>

<p>When creating items, you can also specify one or more <em>attributes</em> for the item, 
affecting how it is displayed.  For example, here we'll specify that the line should be red and three
pixels wide.</p>

<div class=python><pre>canvas.create_line(10, 10, 200, 50, fill='red', width=3)</pre></div>
<div class=tcl><pre>.canvas create line 10 10 200 50 -fill red -width 3</pre></div>
<div class=ruby><pre>TkcLine.new( canvas, 10, 10, 200, 50, :fill => 'red', :width => 3)</pre></div>
<div class=perl><pre>$canvas->create_line(10, 10, 200, 50, -fill => "red", -width => 3);</pre></div>

<p>The exact set of attributes will vary according to the type of item. Some commonly used ones are:</p>
<dl class="row ml-sm-1">
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>fill</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">color to draw the object</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>width</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">line width of the item (or its outline)</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>outline</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">for filled shapes like rectangles, the color to draw the item's outline</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>dash</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">draw a dashed line instead of a solid one, e.g., <code>2 4 6 4</code> alternates short (2 pixels) and long (6 pixels) dashes with 4 pixels between</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>stipple</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">instead of a solid fill color, use a pattern, typically <code>gray75</code>, <code>gray50</code>, <code>gray25</code>, or <code>gray12</code>; stippling is currently not supported on macOS</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>state</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">assign a state of <code>normal</code> (default), <code>disabled</code> (item event bindings are ignored), or <code>hidden</code> (removed from display)</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>disabledfill, disabledwidth, ...</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">if the item's <code>state</code> is set to <code>disabled</code>, the item will display using these variants of the usual attributes</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>activefill, activewidth, ...</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">when the mouse pointer is over the item, it will display using these variants of the usual attributes</dd>
</dl>

<div class=tip><p>If you have canvas items that change state, creating the item with both the regular and <code>disabled<em>*</em></code> attribute variants can simplify your code.
  You simply need to change the item's <code>state</code>, rather than writing code to change multiple display attributes. 
  The same applies to the <code>active<em>*</em></code>. Both encourage a more declarative style that can remove a lot of boilerplate code.</p></div>
  
<p>Akin to Tk widgets, changing attributes for canvas items after we've already created them is easily accomplished.</p>

<div class=python><pre>id = canvas.create_line(0, 0, 10, 10, fill='red')
...
canvas.itemconfigure(id, fill='blue', width=2)
</pre></div>
<div class=tcl><pre>set id [.canvas create line 0 0 10 10 -fill red]
...
.canvas itemconfigure $id -fill blue -width 2</pre></div>
<div class=ruby><pre>line = TkcLine.new( canvas, 0, 0, 10, 10, :fill => 'red' )
line[:fill] = 'blue'
line[:width] = 2</pre></div>
<div class=perl><pre>$id = $canvas->create_line(0, 0, 10, 10, -fill => "red");
...
$canvas->itemconfigure($id, -fill => "blue", -width => 2);</pre></div>

<h3>Item Types</h3>

<p>Canvas widgets support a wide variety of item types.</p>

<h4>Line</h4>

<p>Our sketchpad created simple line items, each a single segment with a start point and an end point. Lines items can also consist of multiple segments.</p>

<div class=python><pre>canvas.create_line(10, 10, 200, 50, 90, 150, 50, 80)</pre></div>
<div class=tcl><pre>.canvas create line 10 10 200 50 90 150 50 80</pre></div>
<div class=ruby><pre>TkcLine.new( canvas, 10, 10, 200, 50, 90, 150, 50, 80)</pre></div>
<div class=perl><pre>$canvas->create_line(10, 10, 200, 50, 90, 150, 50, 80);</pre></div>


<p>Lines have several interesting additional attributes, allowing for drawing curves, arrows, and more.</p>
<dl class="row ml-sm-1">
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>arrow</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">place an arrowhead at the start (<code>first</code>), end (<code>last</code>), or both ends (<code>both</code>); default is <code>none</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>arrowshape</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">allows changing the appearance of any arrowheads</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>capstyle</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">for wide lines without arrowheads, this controls how the end of lines are drawn; one of <code>butt</code> (default), <code>projecting</code>, or <code>round</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>joinstyle</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">for wide lines with multiple segments, this controls drawings of each vertex; one of <code>round</code> (default), <code>bevel</code>, or <code>miter</code></dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>smooth</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">if specified as <code>true</code> (or <code>bezier</code>), draws a smooth curve (via quadratic splines) between multiple segments rather than using straight lines; <code>raw</code> specifies a different type of curve (cubic splines)</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>splinesteps</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">controls the smoothness of curved lines, i.e., those with the <code>smooth</code> option set</dd>
</dl>



<h4>Rectangle</h4>


<p>Rectangles are specified by the coordinates of opposing corners, e.g., top-left and bottom-right. They can be filled in (via <code>fill</code>) with one color, 
  and the <code>outline</code> given a different color.</p>
<div class=python><pre>canvas.create_rectangle(10, 10, 200, 50, fill='red', outline='blue')</pre></div>
<div class=tcl><pre>.canvas create rectangle 10 10 200 50 -fill red -outline blue</pre></div>
<div class=ruby><pre>TkcRectangle.new( canvas, 10, 10, 200, 50, :fill => 'red', :outline => 'blue')</pre></div>
<div class=perl><pre>$canvas->create_rectangle(10, 10, 200, 50, -fill => "red", -outline => "blue");</pre></div>


<h4>Oval</h4>


<p>Ovals items work exactly the same as rectangles.</p>
<div class=python><pre>canvas.create_oval(10, 10, 200, 150, fill='red', outline='blue')</pre></div>
<div class=tcl><pre>.canvas create oval 10 10 200 50 -fill red -outline blue</pre></div>
<div class=ruby><pre>TkcOval.new( canvas, 10, 10, 200, 150, :fill => 'red', :outline => 'blue')</pre></div>
<div class=perl><pre>$canvas->create_oval(10, 10, 200, 150, -fill => "red", -outline => "blue");</pre></div>

<h4>Polygon</h4>


<p>Polygon items allow you to create arbitrary shapes as defined by a series of points. The coordinates are given in the same way as multipoint lines. 
  Tk ensures the polygon is "closed," attaching the last point to the first if needed. Like ovals and rectangles, they can have separate
  <code>fill</code> and <code>outline</code> colors. They also support the <code>joinstyle</code>, <code>smooth</code>, and <code>splinesteps</code>
  attributes of line items.</p>
  
<div class=python><pre>canvas.create_polygon(10, 10, 200, 50, 90, 150, 50, 80, 120, 55, fill='red', outline='blue')</pre></div>
<div class=tcl><pre>.canvas create polygon 10 10 200 50 90 150 50 80 120 55 -fill red -outline blue</pre></div>
<div class=ruby><pre>TkcPolygon.new( canvas, 10, 10, 200, 50, 90, 150, 50, 80, 120, 55, :fill => 'red', :outline => 'blue')</pre></div>
<div class=perl><pre>$canvas->create_polygon(10, 10, 200, 50, 90, 150, 50, 80, 120, 55, -fill => "red", -outline => "blue"</pre></div>
  
<h4>Arc</h4>


<p>Arc items draw a portion of an oval; think of one piece of a pie chart. It's display is controlled by three attributes:
<ul> 
  <li><code>start</code>: how far along the oval the arc should start, in degrees (0 is the 3-o'clock position)</li>
  <li>The <code>extent</code>: how many degrees "wide" the arc should be, positive for counter-clockwise from the start, negative for clockwise</li>
  <li><code>style</code>: one of <code>pieslice</code> (the default), <code>arc</code> (draws just the outer perimeter), or <code>chord</code> (draws the area between a line
    connecting the start and end points of the arc, and the outer perimeter).</ul>
</ul>
  
<div class=python><pre>canvas.create_arc(10, 10, 200, 150, fill='yellow', outline='black', start=45, extent=135, width=5)</pre></div>
<div class=tcl><pre>.canvas create arc 10 10 200 50 -fill yellow -outline black -start 45 -extent 135 -width 5</pre></div>
<div class=ruby><pre>TkcArc.new( canvas, 10, 10, 200, 150, :fill => 'yellow', :outline => 'black', :start => 45, :extent => 135, :width => 5)</pre></div>
<div class=perl><pre>$canvas->create_arc(10, 10, 200, 150, -fill => "yellow", -outline => "black", -start => 45, -extent => 135, -width => 5);</pre></div>


<h4>Image</h4>


<p>Image items can display arbitrary images. By default, the item is centered at the coordinates you specify, but this can be changed with the <code>anchor</code>
  option, e.g., <code>nw</code> means the coordinates are where to put the top-left of the image.</p>
  
<div class=python><pre>myimg = PhotoImage(file='pretty.png')
canvas.create_image(10, 10, image=myimg, anchor='nw')</pre></div>
<div class=tcl><pre>image create photo myimg -file pretty.png
.canvas create image 10 10 -image myimg -anchor nw</pre></div>
<div class=ruby><pre>myimg = TkPhotoImage.new(:file => "pretty.png")
TkcImage.new( canvas, 10, 10, :image => myimg, :anchor => "nw")</pre></div>
<div class=perl><pre>$im = Tkx::image_create_photo("myimg", -file => "pretty.png");
$canvas->create_image( 10, 10, -image => $im, -anchor => "nw");</pre></div>

<p>There's also a <code>bitmap</code> item type for images having only two colors, which can be changed via <code>foreground</code> and <code>background</code>.
  It's not something that would commonly be used these days.</p>

<h4>Text</h4>


<p>Text items can display a block of text. Positioning the text works the same as with image items. 
  Specify the text to display using the <code>text</code> attribute. 
  All of the text in the item will have the same color (specified by the <code>fill</code> attribute) and the same font (specified by a <code>font</code> attribute). </p>
<p>The text item can display multiple lines of text if you embed <code>\n</code> in the text.
   Alternatively, you can have the item automatically wrapped into multiple lines by providing a <code>width</code> attribute to represent the maximum width of a line.
   The alignment of multiple lines of text can be set using the <code>justify</code> attribute, which can be one of <code>left</code> (the default), <code>right</code>, 
   or <code>center</code>.</p>

<div class=python><pre>canvas.create_text(100, 100, text='A wonderful story', anchor='nw', font='TkMenuFont', fill='red')</pre></div>
<div class=tcl><pre>.canvas create text 100 100 -text "A wonderful story" -anchor nw -font TkMenuFont -fill red</pre></div>
<div class=ruby><pre>TkcText.new( canvas, 100, 100, :text => 'A wonderful story', :anchor => 'nw', font => 'TkMenuFont', :fill => 'red')</pre></div>
<div class=perl><pre>$canvas->create_text(100, 100, -text => "A wonderful story", -anchor => "nw", -font => "TkMenuFont", -fill => "red");</pre></div>
   
   
<h4>Widget</h4>


<p>One of the coolest things you can do with the canvas widget is to embed <em>other widgets</em> inside it. This can be a lowly button, an entry (think in-place
  editing of text items), a listbox, a frame itself containing a complex set of widgets... anything! Remember when we said way back when that a canvas widget
  could act as a geometry manager? This is what we meant.</p>
<p>Canvas items that display other widgets are known as <em>window</em> items (Tk's longstanding terminology for widgets). They are positioned like text and image items.
  You can give them explicit <code>width</code> and <code>height</code> attributes; they default to the widget's preferred size. Finally, it's important that 
  the widget you're placing on the canvas (via the <code>window</code>) attribute be a child widget of the canvas.</p>
  
<div class=python><pre>b = ttk.Button(camvas, text='Implode!')
canvas.create_image(10, 10, anchor='nw', window=b)</pre></div>
<div class=tcl><pre>ttk::button .canvas.b -text "Implode!"
.canvas create window 10 10 -anchor nw -window .canvas.b</pre></div>
<div class=ruby><pre>b = Tk::Tile::Button.new(canvas) {text 'Implode!'}
TkcWindow.new( canvas, 10, 10, :anchor => "nw", :window => b)</pre></div>
<div class=perl><pre>$b = $canvas->new_ttk__button(-text => "Implode!");
$canvas->create_window( 10, 10, -anchor => "nw", -window => $b);</pre></div>
  
  
  
<h3>Modifying Items</h3>

<p>We've seen how you can modify the configuration options on an item &#8212; its color, width, etc.
There are several other things you can do with items.</p>

<p>To delete items, use the <code>delete</code> method.</p>
<p>To change an item's size and position, you can use the <code>coords</code> method. You supply
new coordinates for the item, specified the same way as when you first created it.  Calling this method
without a new set of coordinates will return the current coordinates of the item.  To move one or more items
by a particular horizontal or vertical amount from their current location, you can use the <code>move</code>
method.</p>

<p>All items are ordered from top to bottom in what's called the stacking order.  If an item later in the
stacking order overlaps an item below it, the first item will be drawn on top of the second.  
The <code>raise</code> (<code>lift</code> in Tkinter)
and <code>lower</code> methods allow you to adjust an item's position in the stacking order.</p>

<p>There are several more operations detailed in the reference manual. They describe more ways to modify items and  
retrieve information about them.</p>
  

 <a name="bindings"></a><h2>Event Bindings</h2>


<p>We've already seen that the canvas widget as a whole, like any other Tk widget, can capture events
using the <code>bind</code> command.</p>

<p>You can also attach bindings to individual items in the canvas (or groups of them, as we'll see in the
next section using tags).  So if you want to know whether or not a particular item has been clicked on,
you don't need to watch for mouse click events for the canvas as a whole, and then figure out if that
click happened on your item.  Tk will take care of all this for you.</p>

<p>To capture these events, you use a bind command built into the canvas.  It works exactly like the
regular bind command, taking an event pattern and a callback.  The only difference is you  
specify the canvas item this binding applies to.</p>


<div class=python><pre>canvas.tag_bind(id, '<1>', ...)</pre>
	<div class=tip><p>Note the difference between the item-specific <code>tag_bind</code> method 
	and the widget-level <code>bind</code> method.</p></div></div>
<div class=tcl><pre>.canvas bind $id &lt;1&gt; {...}</pre></div>
<div class=ruby><pre>line.bind("1", ...)</pre></div>
<div class=perl><pre>$canvas->bind($id, "<1>", sub{...});</pre>
<div class=tip><p>Note the difference between the item-specific <code>bind</code> method and the 
widget-level <code>g_bind</code> method.</p></div></div>


<p>Let's add some code to our sketchpad example to allow changing the drawing color.  We'll first create a few
different rectangle items, each filled with a different color. We'll then
attach a binding to each of these. When they're clicked on, they'll set a global variable to the
new drawing color.  Our mouse motion binding will look at that variable when creating the line segments.</p>

<div class=python><pre>color = "black"
def setColor(newcolor):
    global color
    color = newcolor

def addLine(event):
    global lastx, lasty
    canvas.create_line((lastx, lasty, event.x, event.y), fill=color)
    lastx, lasty = event.x, event.y

id = canvas.create_rectangle((10, 10, 30, 30), fill="red")
canvas.tag_bind(id, "&lt;Button-1&gt;", lambda x: setColor("red"))
id = canvas.create_rectangle((10, 35, 30, 55), fill="blue")
canvas.tag_bind(id, "&lt;Button-1&gt;", lambda x: setColor("blue"))
id = canvas.create_rectangle((10, 60, 30, 80), fill="black")
canvas.tag_bind(id, "&lt;Button-1&gt;", lambda x: setColor("black"))	
</pre></div>

<div class=tcl><pre>set id [.canvas create rectangle 10 10 30 30 -fill red]
.canvas bind $id &lt;1&gt; "setColor red"

set id [.canvas create rectangle 10 35 30 55 -fill blue]
.canvas bind $id &lt;1&gt; "setColor blue"

set id [.canvas create rectangle 10 60 30 80 -fill black]
.canvas bind $id &lt;1&gt; "setColor black"

set ::color black

proc setColor {color} {
    set ::color $color
}
proc addLine {x y} {
    .canvas create line $::lastx $::lasty $x $y -fill $::color
    set ::lastx $x; set ::lasty $y
}
</pre></div>
<div class=ruby><pre>r = TkcRectangle.new( $canvas, 10, 10, 30, 30, :fill => 'red')
r.bind( "1", proc {setColor('red')})

r = TkcRectangle.new( $canvas, 10, 35, 30, 55, :fill => 'blue')
r.bind( "1", proc {setColor('blue')})

r = TkcRectangle.new( $canvas, 10, 60, 30, 80, :fill => 'black')
r.bind( "1", proc {setColor('black')})

@color = 'black'

def setColor color
   @color = color
end

def addLine (x,y)
  TkcLine.new( $canvas, @lastx, @lasty, x, y, :fill => @color )
  @lastx = x; @lasty = y;
end
</pre></div>
<div class=perl><pre>$canvas->g_bind("&lt;1&gt;", [sub {my ($x,$y) = @_; $lastx=$x; $lasty=$y}, Tkx::Ev("%x","%y")]);
$canvas->g_bind("&lt;B1-Motion&gt;", [sub {my ($x,$y) = @_; addLine($x,$y)}, Tkx::Ev("%x","%y")]);

$id = $canvas->create_rectangle(10, 10, 30, 30, -fill => "red");
$canvas->bind($id, "&lt;1&gt;", sub {setColor("red")});

$id = $canvas->create_rectangle(10, 35, 30, 55, -fill => "blue");
$canvas->bind($id, "&lt;1&gt;", sub {setColor("blue")});

$id = $canvas->create_rectangle(10, 60, 30, 80, -fill => "black");
$canvas->bind($id, "&lt;1&gt;", sub {setColor("black")});

$color = "black";
sub setColor {
    my ($newcolor) = @_;
    $color = $newcolor;
}

sub addLine {
    my ($x,$y) = @_;
    $canvas->create_line($lastx,$lasty,$x,$y, -fill => $color);
    $lastx = $x; $lasty = $y;
}
</pre></div>


 <a name="tags"></a><h2>Tags</h2>

<p>We've seen that every canvas item has a unique id number, but there is another very useful and
powerful way to refer to items on a canvas, and that is using <em>tags</em>.</p>

<p>A tag is just an identifier of your creation, something meaningful to your program.  You can attach
tags to canvas items; each item can have any number of tags.  Unlike item id numbers, which are unique
for each item, many items can have the same tag.  </p>

<p>What can you do with tags?  We saw that you can use the item id to modify a canvas item (and we'll see
soon there are other things you can do to items, like move them around, delete them, etc.).  Any time
you can use an item id, you can use a tag.  For example, you can change the color of all items having
a specific tag.  </p>

<p>Tags are a good way to identify certain types of items in your canvas (items that are part of a drawn
line, items that are part of the palette, etc.).  You can use tags to correlate canvas items to particular
objects in your application (for example, tag all canvas items that are part of the robot with id #37
with the tag "robot37").  With tags, you don't have to keep track of the ids of canvas items to refer to
groups of items later; tags let Tk do that for you.</p>

<p>You can assign tags when creating an item using the <code>tags</code> item configuration option.  You
can add tags later with the <code>addtag</code> method, or remove them with the <code>dtags</code> method.
You can get the list of tags for an item with the <code>gettags</code> method, or return a list of item
id numbers having the given tag with the <code>find</code> command.</p>

<p>For example:</p>

<div class=python>
<pre>
&gt;&gt;&gt; <b>c = Canvas(root)</b>
&gt;&gt;&gt; <b>c.create_line(10, 10, 20, 20, tags=('firstline', 'drawing'))</b>
1
&gt;&gt;&gt; <b>c.create_rectangle(30, 30, 40, 40, tags=('drawing'))</b>
2
&gt;&gt;&gt; <b>c.addtag('rectangle', 'withtag', 2)</b>
&gt;&gt;&gt; <b>c.addtag('polygon', 'withtag', 'rectangle')</b>
&gt;&gt;&gt; <b>c.gettags(2)</b>
('drawing', 'rectangle', 'polygon')
&gt;&gt;&gt; <b>c.dtag(2, 'polygon')</b>
&gt;&gt;&gt; <b>c.gettags(2)</b>
('drawing', 'rectangle')	
&gt;&gt;&gt; <b>c.find_withtag('drawing')</b>
(1, 2)
</pre>	
</div>
<div class=tcl>
<pre>
% <b>canvas .c</b>
.c
% <b>.c create line 10 10 20 20 -tags "firstline drawing"</b>
1
% <b>.c create rectangle 30 30 40 40 -tags "drawing"</b>
2
% <b>.c addtag rectangle withtag 2</b>
% <b>.c addtag polygon withtag rectangle</b>
% <b>.c gettags 2</b>
drawing rectangle polygon
% <b>.c dtag 2 polygon</b>
% <b>.c gettags 2</b>
drawing rectangle
% <b>.c find withtag drawing</b>
1 2
</pre>
</div>
<div class=ruby>
<pre>
>> <b>canvas = TkCanvas.new root</b>
=> #&lt;TkCanvas:0x73c92c @path=".w00000"&gtl
>> <b>l = TkcLine.new canvas, 10, 10, 20, 20, :tags => 'firstline drawing'</b>
=> #&lt;TkcLine:0x737990 @id=1, @parent=#&lt;TkCanvas:0x73c92c @path=".w00000"&gt;,
         @path=".w00000", @c=#&lt;TkCanvas:0x73c92c @path=".w00000"&gt;&gt;
>> <b>r = TkcRectangle.new canvas, 30, 30, 40, 40, :tags => 'drawing'</b>
=> #&lt;TkcRectangle:0x732b34 @id=2, @parent=#&lt;TkCanvas:0x73c92c @path=".w00000"&gt;, 
         @path=".w00000", @c=#&lt;TkCanvas:0x73c92c @path=".w00000"&gt;&gt;
>> <b>r.addtag 'rectangle'</b>
=> #&lt;TkcRectangle:0x732b34 @id=2, ... &gt;
>> <b>canvas.addtag 'polygon', :withtag, 'rectangle'</b>
=> &lt;TkCanvas:0x73c92c @path=".w00000"&gt;
>> <b>canvas.gettags r</b>
=> ["drawing", "rectangle", "polygon"]
>> <b>r.dtag 'polygon'</b>
=> #&lt;TkcRectangle:0x732b34 @id=2 ... &gt;
>> <b>r.gettags</b>
=> ["drawing", "rectangle"]
>> <b>canvas.find :withtag, 'drawing'</b>
=> [#&lt;TkcLine:0x737990 @id=1 ... &gt;, #&lt;TkcRectangle:0x732b34 @id=2 ... &gt;]
</pre>
</div>
<div class=perl><pre>
Perl> <b>$c = $mw->new_canvas()</b>
.c
Perl> <b>$c->create_line(10, 10, 20, 20, -tags => "firstline drawing")</b>
1
Perl> <b>$c->create_rectangle(30,30,40,40, -tags => "drawing")</b>
2
Perl> <b>$c->addtag("rectangle", "withtag", 2)</b>
Perl> <b>$c->addtag("polygon", "withtag", "rectangle")</b>
Perl> <b>$c->gettags(2)</b>
drawing rectangle polygon
Perl> <b>$c->dtag(2,"polygon")</b>
Perl> <b>$c->gettags(2)</b>
drawing rectangle
Perl> <b>$c->find_withtag("drawing")</b>
1 2	
</pre>	
	
</div>
<p>As you can see, things like <code>withtag</code> will take either an individual item or a tag; in the latter
case, they will apply to all items having that tag (which could be none).  The <code>addtag</code>
and <code>find</code> have many other options, allowing you to specify items near a point, overlapping
a particular area, etc.</p>

<p>Let's use tags first to put a border around whichever item in our color palette is currently selected.</p>

<div class=python><pre>def setColor(newcolor):
    global color
    color = newcolor
    canvas.dtag('all', 'paletteSelected')
    canvas.itemconfigure('palette', outline='white')
    canvas.addtag('paletteSelected', 'withtag', 'palette%s' % color)
    canvas.itemconfigure('paletteSelected', outline='#999999')

id = canvas.create_rectangle((10, 10, 30, 30), fill="red", tags=('palette', 'palettered'))
id = canvas.create_rectangle((10, 35, 30, 55), fill="blue", tags=('palette', 'paletteblue'))
id = canvas.create_rectangle((10, 60, 30, 80), fill="black", tags=('palette', 'paletteblack', 'paletteSelected'))

setColor('black')
canvas.itemconfigure('palette', width=5)

</pre></div>

<div class=tcl><pre>set id [.canvas create rectangle 10 10 30 30 -fill red -tags "palette palettered"]
set id [.canvas create rectangle 10 35 30 55 -fill blue -tags "palette paletteblue"]
set id [.canvas create rectangle 10 60 30 80 -fill black -tags "palette paletteblack paletteSelected"]

proc setColor {color} {
    set ::color $color
    .canvas dtag all paletteSelected
    .canvas itemconfigure palette -outline white
    .canvas addtag paletteSelected withtag palette$color
    .canvas itemconfigure paletteSelected -outline #999999
}

setColor black
.canvas itemconfigure palette -width 5</pre></div>
<div class=ruby><pre>r = TkcRectangle.new( $canvas, 10, 10, 30, 30, :fill => 'red', :tags => 'palette palettered')
r = TkcRectangle.new( $canvas, 10, 35, 30, 55, :fill => 'blue', :tags => 'palette paletteblue')
r = TkcRectangle.new( $canvas, 10, 60, 30, 80, :fill => 'black', :tags => 'palette paletteblack paletteSelected')

def setColor color
   @color = color
   $canvas.dtag 'all', 'paletteSelected'
   $canvas.itemconfigure 'palette', :outline => 'white'
   $canvas.addtag 'paletteSelected', :withtag, "palette#{color}"
   $canvas.itemconfigure 'paletteSelected', :outline => '#999999'
end

setColor 'black'
$canvas.itemconfigure 'palette', :width => 5
</pre>
<p>The canvas <code>itemconfigure</code> method provides another way to change the properties of a canvas item.
The advantage over dealing with the canvas item object directly is that we can specify a tag, so that the
change we're making applies to all items having that tag.  Without this, we could use <code>gettags</code>
to get all the items, iterate through them, and set the option, but <code>itemconfigure</code> is more convenient.
</p></div>
<div class=perl><pre>$id = $canvas->create_rectangle(10, 10, 30, 30, -fill => "red", -tags => "palette palettered");
$id = $canvas->create_rectangle(10, 35, 30, 55, -fill => "blue", -tags => "palette paletteblue");
$id = $canvas->create_rectangle(10, 60, 30, 80, -fill => "black", -tags => "palette paletteblack paletteSelected");

sub setColor {
    my ($newcolor) = @_;
    $color = $newcolor;
    $canvas->dtag_all("paletteSelected");
    $canvas->itemconfigure("palette", -outline => "white");
    $canvas->addtag("paletteSelected", withtag => "palette".$color);
    $canvas->itemconfigure("paletteSelected", -outline => "#999999");
}
setColor "black";
$canvas->itemconfigure("palette", -width => 5);
</pre></div>

<p>Let's also use tags to make the current stroke being drawn appear more prominent. When the mouse button is released,
we'll return the line to normal.</p>

<div class=python><pre>def addLine(event):
    global lastx, lasty
    canvas.create_line((lastx, lasty, event.x, event.y), fill=color, width=5, tags='currentline')
    lastx, lasty = event.x, event.y

def doneStroke(event):
    canvas.itemconfigure('currentline', width=1)        

canvas.bind("&lt;B1-ButtonRelease&gt;", doneStroke)
</pre></div>

<div class=tcl><pre>bind .canvas &lt;B1-ButtonRelease&gt; "doneStroke"

proc addLine {x y} {
    .canvas create line $::lastx $::lasty $x $y -fill $::color -width 5 -tags currentline
    set ::lastx $x; set ::lasty $y
}
proc doneStroke {} {
    .canvas itemconfigure currentline -width 1
}
</pre></div>
<div class=ruby><pre>$canvas.bind( "B1-ButtonRelease", proc{doneStroke})
def addLine (x,y)
  TkcLine.new( $canvas, @lastx, @lasty, x, y, :fill => @color, :width => 5, :tags => 'currentline' )
  @lastx = x; @lasty = y;
end
def doneStroke
  $canvas.itemconfigure 'currentline', :width => 1
end
</pre></div>
<div class=perl><pre>
$canvas->g_bind("&lt;B1-ButtonRelease&gt;", sub {doneStroke();});
sub addLine {
    my ($x,$y) = @_;
    $canvas->create_line($lastx,$lasty,$x,$y, -fill => $color, -width => 5, -tags => "currentline");
    $lastx = $x; $lasty = $y;
}
sub doneStroke {
    $canvas->itemconfigure("currentline", -width => 1);
}</pre></div>



 <a name="scrolling"></a><h2>Scrolling</h2>

<p>In many applications, you'll want the canvas to be larger than what appears on the screen.  You can attach
horizontal and vertical scrollbars to the canvas in the usual way, via the <code>xview</code> and <code>yview</code>
methods.  </p>

<p>You can specify both how large you'd like it to be on screen and its full size (which would require scrolling to see).
The <code>width</code> and <code>height</code> configuration options for the canvas widget will request the given amount of space
from the geometry manager.  The <code>scrollregion</code> configuration option tells Tk how large the canvas surface is by 
specifying its left, top, right, and bottom coordinates, e.g., <code>0 0 1000 1000</code>.</p>

<p>You should be able to modify the sketchpad program to add scrolling, given what you already know.  Give it a try.</p>

<p>Once you've done that, scroll the canvas down just a little bit, and then try drawing.  You'll see that the
line you're drawing appears <em>above</em> where the mouse is pointing!  Surprised?</p>

<p>What's going on is that the global <code>bind</code> command doesn't know that the canvas is scrolled (it doesn't
know the details of any particular widget).  So if you've scrolled the canvas down by 50 pixels, and you click
on the top left corner, bind will report that you've clicked at (0,0).  But we know that because of the scrolling,
that position should really be (0,50).</p>

<p>The <code>canvasx</code> and <code>canvasy</code> methods translate the position onscreen (which bind reports)
into the actual point on the canvas (taking into account scrolling).</p>

<div class=tip><p>Be careful if you're adding <code>canvasx</code> and <code>canvasy</code> methods directly to the event binding scripts.
You need to watch the quoting and substitutions to ensure the conversions are done when the event fires.
As always, it's better to place that code in a procedure separate from the event binding itself.</p></div>

<p>Here then, is our complete example.  We probably don't want the palette to be scrolled away when the canvas is
scrolled, but we'll leave that for another day.</p>

<div class=python><pre>from tkinter import *
from tkinter import ttk
root = Tk()

h = ttk.Scrollbar(root, orient=HORIZONTAL)
v = ttk.Scrollbar(root, orient=VERTICAL)
canvas = Canvas(root, scrollregion=(0, 0, 1000, 1000), yscrollcommand=v.set, xscrollcommand=h.set)
h['command'] = canvas.xview
v['command'] = canvas.yview

canvas.grid(column=0, row=0, sticky=(N,W,E,S))
h.grid(column=0, row=1, sticky=(W,E))
v.grid(column=1, row=0, sticky=(N,S))
root.grid_columnconfigure(0, weight=1)
root.grid_rowconfigure(0, weight=1)

lastx, lasty = 0, 0

def xy(event):
    global lastx, lasty
    lastx, lasty = canvas.canvasx(event.x), canvas.canvasy(event.y)

def setColor(newcolor):
    global color
    color = newcolor
    canvas.dtag('all', 'paletteSelected')
    canvas.itemconfigure('palette', outline='white')
    canvas.addtag('paletteSelected', 'withtag', 'palette%s' % color)
    canvas.itemconfigure('paletteSelected', outline='#999999')

def addLine(event):
    global lastx, lasty
    x, y = canvas.canvasx(event.x), canvas.canvasy(event.y)
    canvas.create_line((lastx, lasty, x, y), fill=color, width=5, tags='currentline')
    lastx, lasty = x, y

def doneStroke(event):
    canvas.itemconfigure('currentline', width=1)        
        
canvas.bind("&lt;Button-1&gt;", xy)
canvas.bind("&lt;B1-Motion&gt;", addLine)
canvas.bind("&lt;B1-ButtonRelease&gt;", doneStroke)

id = canvas.create_rectangle((10, 10, 30, 30), fill="red", tags=('palette', 'palettered'))
canvas.tag_bind(id, "&lt;Button-1&gt;", lambda x: setColor("red"))
id = canvas.create_rectangle((10, 35, 30, 55), fill="blue", tags=('palette', 'paletteblue'))
canvas.tag_bind(id, "&lt;Button-1&gt;", lambda x: setColor("blue"))
id = canvas.create_rectangle((10, 60, 30, 80), fill="black", tags=('palette', 'paletteblack', 'paletteSelected'))
canvas.tag_bind(id, "&lt;Button-1&gt;", lambda x: setColor("black"))

setColor('black')
canvas.itemconfigure('palette', width=5)
root.mainloop()</pre></div>

<div class=tcl><pre>package require Tk

grid [tk::canvas .canvas -scrollregion "0 0 1000 1000" -yscrollcommand ".v set" -xscrollcommand ".h set"] -sticky nwes -column 0 -row 0
grid columnconfigure . 0 -weight 1
grid rowconfigure . 0 -weight 1

grid [ttk::scrollbar .h -orient horizontal -command ".canvas xview"] -column 0 -row 1 -sticky we
grid [ttk::scrollbar .v -orient vertical -command ".canvas yview"] -column 1 -row 0 -sticky ns

bind .canvas &lt;1&gt; {set lastx [.canvas canvasx %x]; set lasty [.canvas canvasy %y]}
bind .canvas &lt;B1-Motion&gt; {addLine [.canvas canvasx %x] [.canvas canvasy %y]}
bind .canvas &lt;B1-ButtonRelease&gt; "doneStroke"


set id [.canvas create rectangle 10 10 30 30 -fill red -tags "palette palettered"]
.canvas bind $id &lt;1&gt; "setColor red"

set id [.canvas create rectangle 10 35 30 55 -fill blue -tags "palette paletteblue"]
.canvas bind $id &lt;1&gt; "setColor blue"

set id [.canvas create rectangle 10 60 30 80 -fill black -tags "palette paletteblack paletteSelected"]
.canvas bind $id &lt;1&gt; "setColor black"

proc setColor {color} {
    set ::color $color
    .canvas dtag all paletteSelected
    .canvas itemconfigure palette -outline white
    .canvas addtag paletteSelected withtag palette$color
    .canvas itemconfigure paletteSelected -outline #999999
}
proc addLine {x y} {
    .canvas create line $::lastx $::lasty $x $y -fill $::color -width 5 -tags currentline
    set ::lastx $x; set ::lasty $y
}
proc doneStroke {} {
    .canvas itemconfigure currentline -width 1
}

setColor black
.canvas itemconfigure palette -width 5</pre></div>
<div class=ruby><pre>require 'tk'
require 'tkextlib/tile'

root = TkRoot.new()

$canvas = TkCanvas.new(root) {scrollregion '0 0 1000 1000'}
$h = Tk::Tile::Scrollbar.new(root) {orient 'horizontal'; command proc{|*args| $canvas.xview(*args);}}
$v = Tk::Tile::Scrollbar.new(root) {orient 'vertical'; command proc{|*args| $canvas.yview(*args);}}
$canvas['xscrollcommand'] = proc{|*args| $h.set(*args);}
$canvas['yscrollcommand'] = proc{|*args| $v.set(*args);}

$canvas.grid :sticky => 'nwes', :column => 0, :row => 0
$h.grid :sticky => 'we', :column => 0, :row => 1
$v.grid :sticky => 'ns', :column => 1, :row => 0
TkGrid.columnconfigure( root, 0, :weight => 1 )
TkGrid.rowconfigure( root, 0, :weight => 1 )

$canvas.bind( "1", proc{|x,y| @lastx = $canvas.canvasx(x); @lasty = $canvas.canvasy(y)}, "%x %y")
$canvas.bind( "B1-Motion", proc{|x, y| addLine($canvas.canvasx(x), $canvas.canvasy(y))}, "%x %y")
$canvas.bind( "B1-ButtonRelease", proc{doneStroke})

r = TkcRectangle.new( $canvas, 10, 10, 30, 30, :fill => 'red', :tags => 'palette palettered')
r.bind( "1", proc {setColor('red')})

r = TkcRectangle.new( $canvas, 10, 35, 30, 55, :fill => 'blue', :tags => 'palette paletteblue')
r.bind( "1", proc {setColor('blue')})

r = TkcRectangle.new( $canvas, 10, 60, 30, 80, :fill => 'black', :tags => 'palette paletteblack paletteSelected')
r.bind( "1", proc {setColor('black')})

$canvas.itemconfigure 'palette', :width => 5

def setColor color
   @color = color
   $canvas.dtag 'all', 'paletteSelected'
   $canvas.itemconfigure 'palette', :outline => 'white'
   $canvas.addtag 'paletteSelected', :withtag, "palette#{color}"
   $canvas.itemconfigure 'paletteSelected', :outline => '#999999'
end

setColor 'black'

def addLine (x,y)
  TkcLine.new( $canvas, @lastx, @lasty, x, y, :fill => @color, :width => 5, :tags => 'currentline' )
  @lastx = x; @lasty = y;
end
def doneStroke
  $canvas.itemconfigure 'currentline', :width => 1
end

Tk.mainloop
</pre></div>
<div class=perl><pre>use Tkx;
$mw = Tkx::widget->new(".");

$canvas = $mw->new_tk__canvas(-scrollregion => "0 0 1000 1000");
$canvas->g_grid(-column=>0, -row=>0, -sticky=>"nwes");
$mw->g_grid_columnconfigure(0, -weight=>1);
$mw->g_grid_rowconfigure(0, -weight=>1);

$hscroll = $mw->new_ttk__scrollbar(-orient => "horizontal", -command => [$canvas, "xview"]);
$vscroll = $mw->new_ttk__scrollbar(-orient => "vertical", -command => [$canvas, "yview"]);
$hscroll->g_grid(-column => 0, -row => 1, -sticky => "we");
$vscroll->g_grid(-column => 1, -row => 0, -sticky => "ns");
$canvas->configure(-yscrollcommand => [$vscroll, "set"], -xscrollcommand => [$hscroll, "set"]);

$canvas->g_bind("&lt;1&gt;", [sub {my ($x,$y) = @_; $lastx=$canvas->canvasx($x); $lasty=$canvas->canvasy($y)}, Tkx::Ev("%x","%y")]);
$canvas->g_bind("&lt;B1-Motion&gt;", [sub {my ($x,$y) = @_; addLine($canvas->canvasx($x),$canvas->canvasy($y))}, Tkx::Ev("%x","%y")]);
$canvas->g_bind("&lt;B1-ButtonRelease&gt;", sub {doneStroke();});

$id = $canvas->create_rectangle(10, 10, 30, 30, -fill => "red", -tags => "palette palettered");
$canvas->bind($id, "&lt;1&gt;", sub {setColor("red")});

$id = $canvas->create_rectangle(10, 35, 30, 55, -fill => "blue", -tags => "palette paletteblue");
$canvas->bind($id, "&lt;1&gt;", sub {setColor("blue")});

$id = $canvas->create_rectangle(10, 60, 30, 80, -fill => "black", -tags => "palette paletteblack paletteSelected");
$canvas->bind($id, "&lt;1&gt;", sub {setColor("black")});

sub setColor {
    my ($newcolor) = @_;
    $color = $newcolor;
    $canvas->dtag_all("paletteSelected");
    $canvas->itemconfigure("palette", -outline => "white");
    $canvas->addtag("paletteSelected", withtag => "palette".$color);
    $canvas->itemconfigure("paletteSelected", -outline => "#999999");
}
setColor "black";
$canvas->itemconfigure("palette", -width => 5);

sub addLine {
    my ($x,$y) = @_;
    $canvas->create_line($lastx,$lasty,$x,$y, -fill => $color, -width => 5, -tags => "currentline");
    $lastx = $x; $lasty = $y;
}

sub doneStroke {
    $canvas->itemconfigure("currentline", -width => 1);
}

Tkx::MainLoop();
</pre></div>




<h1>Text</h1>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/text.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/text.htm">Reference Manual</a></li>
</ul>

<p>A <b>text</b> widget manages a multi-line text area.  Like the canvas widget, Tk's text widget is
an immensely flexible and powerful tool which can be used for a wide variety of tasks.  It can  
provide a simple multi-line text area as part of a form. But text widgets can also form the basis for a 
stylized code editor, an outliner, a web browser, and much more.</p>
<p>Note: Text widgets are part of the classic Tk widgets, not the themed Tk widgets.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_textfull_all.png' alt='screen shot'><br />
Text widgets.</p>

<p>While we briefly introduced text widgets in an earlier chapter, we'll go into much more detail here.
You'll get a better sense of the level of sophistication they allow.  Still, for any significant work with 
the text widget, the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/text.htm">reference manual</a> is well-organized, useful, and a 
highly-recommended read.</p>



<div class=python><p>Text widgets are created using the <code><b>Text</b></code> class:</p>
	<pre>text = Text(<em>parent</em>, width=40, height=10)</pre></div>
<div class=tcl><p>Text widgets are created using the <code><b>tk::text</b></code> command:</p>
	<pre>tk::text .text -width 40 -height 10</pre></div>
<div class=ruby><p>Text widgets are created using the <code><b>TkText</b></code> class:</p>
	<pre>text = TkText.new(<em>parent</em>) {width 40; height 10}</pre></div>
<div class=perl>Text widgets are created using the <code><b>new_tk__text</b></code> method, a.k.a. <code><b>Tkx::tk__text</b></code>:
	<pre>$text = $<em>parent</em>->new_tk__text(-width => 40, -height => 10);</pre></div>

<p>You'll often provide a width (in characters) and height (in lines). As always, you can ask the geometry
  manager to expand it to fill the available space in the window.</p>
  

 <a name="basics"></a><h2>The Basics</h2>

<p>If you simply need a multi-line text field for a form, there are only a few things to worry about: 
  creating and sizing the widget (check), providing an initial value, and retrieving the text after
a user has submitted the form.</p>

<h3>Providing Initial Content</h3>

<p>Text widgets start with nothing in them, so we'll need to add any initial content ourselves.
  Because text widgets can hold a lot more than plain text, a simple mechanism (like the entry widget's
  <code>textvariable</code> configuration option) isn't sufficient.</p>

<p>Instead, we'll use the widget's <code>insert</code> method:</p>

<div class=python><pre>text.insert('1.0', 'here is my\ntext to insert')</pre></div>
<div class=tcl><pre>.text insert 1.0 "here is my\ntext to insert"</pre></div>
<div class=ruby><pre>text.insert(1.0, "here is my\ntext to insert")</pre></div>
<div class=perl><pre>$text->insert("1.0", "here is my\ntext to insert");</pre></div>

<p>The "1.0" here is the position where to insert the text, and can be read as "line 1, character 0".  This
refers to the first character of the first line. Historically, especially on Unix, programmers tend to think about
line numbers as 1-based and character positions as 0-based.</p>

<p>The text to insert is just a string.  Because the widget can hold multi-line text, the string we
supply can be multi-line as well.  To do this, simply embed <code>\n</code> (newline) characters in the
string at the appropriate locations.</p>


<h3>Retrieving the Text</h3>

<p>After users have made any changes and submitted the form (for example), your program can 
retrieve the contents of the widget via the <code>get</code> method:</p>

<div class=python><pre>thetext = text.get('1.0', 'end')</pre></div>
<div class=tcl><pre>set thetext [.text get 1.0 end]</pre></div>
<div class=ruby><pre>thetext = t.get("1.0", 'end')</pre></div>
<div class=perl><pre>$thetext = $text->get("1.0", "end");</pre></div>

<p>The two parameters are the start and end position; <code>end</code> has the obvious meaning.
  You can provide different start and end positions if you want to obtain only part of the text.
  You'll see more on positions shortly.</p>

<h3>Customizing Appearance</h3>

<p>We previously saw the <code>width</code> and <code>height</code> configuration options for text widgets.  
  Several others control its overall appearance. The most useful are:</p>
  
<dl class="row ml-sm-1">
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>foreground</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">color to draw the text in</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>background</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">background color of the widget</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>padx, pady</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">extra padding along the inside border of the widget</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>borderwidth</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">width of the border around widget</dd>
  <dt class="col-lg-3 col-xl-2 font-weight-normal"><code>relief</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">border style: <code>flat</code>, <code>raised</code>, <code>sunken</code>, <code>solid</code>, <code>ridge</code>, <code>groove</code></dd>
</dl>
  

<h3>Wrapping and Scrolling</h3>

<p>What if some lines of text in the widget are very long, longer than the width of the widget?  By default,
the text wraps around to the next line. This behavior can be changed with the 
<code>wrap</code> configuration option.  It defaults to <code>char</code>, meaning wrap lines at any character.
Other options are <code>word</code> to wrap lines only at
word breaks (e.g., spaces), and <code>none</code> meaning to not wrap lines at all.  In the latter case,
some text of longer lines won't be visible unless we attach a horizontal scrollbar to the widget.
(Users can also scroll through the text using arrow keys, even if scrollbars aren't present).</p>

<p>Scrollbars, both horizontal and vertical, can be attached to the text widget in the 
same way as with other widgets, e.g., canvas, listbox.</p>

<div class=python><pre>t = Text(root, width = 40, height = 5, <b>wrap = "none"</b>)
<b>ys = ttk.Scrollbar(root, orient = 'vertical', command = t.yview)</b>
<b>xs = ttk.Scrollbar(root, orient = 'horizontal', command = t.xview)</b>
<b>t['yscrollcommand'] = ys.set</b>
<b>t['xscrollcommand'] = xs.set</b>
t.insert('end', "Lorem ipsum...\n...\n...")
t.grid(column = 0, row = 0, sticky = 'nwes')
xs.grid(column = 0, row = 1, sticky = 'we')
ys.grid(column = 1, row = 0, sticky = 'ns')
root.grid_columnconfigure(0, weight = 1)
root.grid_rowconfigure(0, weight = 1)
</pre></div>
<div class=tcl><pre>tk::text .t -width 40 -height 5 <b> -wrap none -yscrollcommand ".ys set" -xscrollcommand ".xs set"</b>
<b>ttk::scrollbar .ys -orient vertical -command ".t yview"</b>
<b>ttk::scrollbar .xs -orient horizontal -command ".t xview"</b>
.t insert end "Lorem ipsum...\n...\n... "
grid .t -column 0 -row 0 -sticky nwes
grid .xs -column 0 -row 1 -sticky we
grid .ys -column 1 -row 0 -sticky ns
grid columnconfigure . 0 -weight 1
grid rowconfigure . 0 -weight 1
</pre></div>
<div class=ruby><pre>t = TkText.new(root) {width 40; height 5; <b>wrap "none"</b>}
<b>ys = Tk::Tile::Scrollbar.new(root) {orient 'vertical'; command proc{|*args| t.yview(*args);}}
xs = Tk::Tile::Scrollbar.new(root) {orient 'horizontal'; command proc{|*args| t.xview(*args);}}
t['yscrollcommand'] = proc{|*args| ys.set(*args);}
t['xscrollcommand'] = proc{|*args| xs.set(*args);}</b>
t.insert('end', "Lorem ipsum...\n...\n... ")
t.grid( :column => 0, :row => 0, :sticky => 'nwes')
xs.grid( :column => 0, :row => 1, :sticky => 'we')
ys.grid( :column => 1, :row => 0, :sticky => 'ns')
TkGrid.columnconfigure(root, 0, :weight => 1)
TkGrid.rowconfigure(root, 0, :weight => 1)
</pre></div>
<div class=perl><pre>$t = $mw->new_tk__text(-width => 40, -height => 5, <b>-wrap => 'none'</b>);
<b>$ys = $mw->new_ttk__scrollbar(-orient => 'vertical', -command => [$t, "yview"]);
$xs = $mw->new_ttk__scrollbar(-orient => 'horizontal', -command => [$t, "xview"]);
$t->configure(-yscrollcommand => [$ys, 'set']);
$t->configure(-xscrollcommand => [$xs, 'set']);</b>
$t->insert('end', "Lorem ipsum...\n...\n... ");
$t->g_grid(-column => 0, -row => 0, -sticky => 'nwes');
$xs->g_grid(-column => 0, -row => 1, -sticky => 'we');
$ys->g_grid(-column => 1, -row => 0, -sticky => 'ns');
$mw->g_grid_columnconfigure(0, -weight => 1);
$mw->g_grid_rowconfigure(0, -weight => 1);
</pre></div>

<p>We can also ask the widget to ensure that a certain part of the text is visible.  For example, let's say
we've added more text to the widget than will fit onscreen (so it will scroll). However, we want to ensure
that the top of the text rather than the bottom is visible. We can use the <code>see</code> method.</p>


<div class=python><pre>text.see('1.0')</pre></div>
<div class=tcl><pre>.text see 1.0</pre></div>
<div class=ruby><pre>text.see('1.0')</pre></div>
<div class=perl><pre>$text->see("1.0");</pre></div>


<h3>Disabling the Widget</h3>

<p>Some forms will temporarily disable editing in particular widgets unless certain conditions are met 
(e.g., some other options are set to a certain value).  To prevent users from changing
a text widget, set the <code>state</code> configuration option to <code>disabled</code>. Re-enable editing
by setting this option back to <code>normal</code>.</p>

<div class=python><pre>text['state'] = 'disabled'</pre></div>
<div class=tcl><pre>.text configure -state disabled</pre></div>
<div class=ruby><pre>text['state'] = 'disabled'</pre></div>
<div class=perl><pre>$text->configure(-state => "disabled");</pre></div>

<div class=fyi><p>As text widgets are part of the classic widgets, the usual <code>state</code> and <code>instate</code>
  methods are not available.</p></div>

 <a name="modifying"></a><h2>Modifying the Text in Code</h2>

<p>While users can modify the text in the text widget interactively, your program can also make
changes.  Adding text is done with the <code>insert</code> method, which we used above to provide an
initial value for the text widget.</p>

<h3>Text Positions and Indices</h3>

<p>When we specified a position of <code>1.0</code> (first line, first character), this was an example of an <em>index</em>.
It tells the <code>insert</code> method where to put the new text (just before the first line, first character, i.e., at the
very start of the widget).  Indices can be specified in a variety of ways. We used another one with the <code>get</code> method:
<code>end</code> means <em>just past</em> the end of the text. (Why "just past?" Text is inserted right
<em>before</em> the given index, so inserting at <code>end</code> will add text to the end of the widget).
Note that Tk will <em>always</em> add a newline at the very end of the text widget.</p>

<p>Here are a few additional examples of indices and how to interpret them:</p>

<dl class="row ml-sm-1">
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>3.end</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The newline at the end of line 3.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>1.0 + 3 chars</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">Three characters past the start of line 1.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>2.end -1 chars</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The last character before the new line in line 2.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>end -1 chars</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The newline that Tk always adds at the end of the text.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>end -2 chars</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The actual last character of the text.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>end -1 lines</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The start of the last actual line of text.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>2.2 + 2 lines</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The third character (index 2) of the fourth line of text.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>2.5 linestart</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The first character of line 2.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>2.5 lineend</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">The position of the newline at the end of line 2.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>2.5 wordstart</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">First char. of the word with the char. at index 2.5.</dd>
<dt class="col-lg-3 col-xl-2 font-weight-normal"><code>2.5 wordend</code><span class="d-none d-lg-inline">:</span></dt><dd class="col-lg-9 col-xl-10">First char. after the word with the char. at index 2.5.</dd>
</dl>

<p>Some additional things to keep in mind:</p>
<ul>
<li> The term <code>chars</code> can be abbreviated as <code>c</code>, and <code>lines</code> as <code>l</code>.
<li> Spaces between terms can be omitted, e.g., <code>1.0+3c</code>.
<li> An index past the end of the text (e.g., <code>end + 100c</code>) is interpreted as <code>end</code>.
<li> Indices wrap to subsequent lines as needed; e.g., <code>1.0 + 10 chars</code> on a line with only five
	 characters will refer to a position on the second line.
<li> Line numbers in indices are interpreted as <em>logical lines,</em> i.e.,
	 each line ends only at the "\n."  With long lines and wrapping enabled, one logical line may represent 
	 multiple <em>display lines</em>. If you'd like to move up or down a single line on the display, you can
	 specify this as, e.g., "1.0 + 2 display lines".
<li> When indices contain multiple words, make sure they are quoted appropriately so that Tk sees
	   the entire index as one argument.
</ul>

<p> To determine the <em>canonical position</em> of an index, use the <code>index <em>idx</em></code> method. Pass it any
	 index expression, and it returns the corresponding index in the form <code><em>line</em>.<em>char</em></code>. For example,
   to find the position of the last character (ignoring the automatic newline at the end), use:</p>
   
<div class=python><pre>text.index('end')</pre></div>
<div class=tcl><pre>.text index end</pre></div>
<div class=ruby><pre>text.index('end')</pre></div>
<div class=perl><pre>$text->index("end")</pre></div>
   
<p> You can compare two indices using the <code>compare</code> method, which lets you check for equality, 
	 whether one index is later in the text than the other, etc.</p>

<div class=python><pre>if text.compare(<em>idx1</em>, "==", <em>idx2</em>"): <em># same position</em></pre></div>
<div class=tcl><pre>if {[.text compare <em>idx1</em> "==" <em>idx2</em>]} { <em># same position</em> }</pre></div>
<div class=ruby><pre>if text.compare(<em>idx1</em>, "==", <em>idx2</em>) then  <em># same position</em></pre></div>
<div class=perl><pre>if ($text->compare(<em>idx1</em>, "==", <em>idx2</em>)) { <em># same position</em> }</pre></div>

<p>Valid operators are <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, and <code>&gt;=</code>.</p>

<h3>Deleting Text</h3>

<p>While the <code>insert</code> method adds new text anywhere in the widget, the <code>delete <em>start</em> <em>?end?</em></code> method removes it.
We can delete either a single character (specified by index) or a <em>range</em> of characters (specified by 
start and end indices).  In the latter case, characters from (and including) the start index through to <em>just before</em>
the end index will be deleted (so the character at the end index is not deleted).  So if we assume for each of these
we start off with <code>"abcd\nefgh"</code> in the text widget:</p>

<div class=python><pre>text.delete('1.2') <em>&#8658;</em> "abd\nefgh"
text.delete('1.1', '1.2') <em>&#8658;</em> "acd\nefgh"
text.delete('1.0', '2.0') <em>&#8658;</em> "efgh"
text.delete('1.2', '2.1') <em>&#8658;</em> "abfgh"
</pre></div>
<div class=tcl><pre>.text delete 1.2 <em>&#8658;</em> "abd\nefgh"
.text delete 1.1 1.2 <em>&#8658;</em> "acd\nefgh"
.text delete 1.0 2.0 <em>&#8658;</em> "efgh"
.text delete 1.2 2.1 <em>&#8658;</em> "abfgh"</pre></div>
<div class=ruby><pre>text.delete(1.2) <em>&#8658;</em> "abd\nefgh"
text.delete(1.1, 1.2) <em>&#8658;</em> "acd\nefgh"
text.delete(1.0, 2.0) <em>&#8658;</em> "efgh"
text.delete(1.2, 2.1) <em>&#8658;</em> "abfgh"
</pre></div>
<div class=perl><pre>$text->delete("1.2"); <em>&#8658;</em> "abd\nefgh"
$text->delete("1.1", "1.2"); <em>&#8658;</em> "acd\nefgh"
$text->delete("1.0", "2.0"); <em>&#8658;</em> "efgh"
$text->delete("1.2", "2.1"); <em>&#8658;</em> "abfgh"
</pre></div>

<p>There is also a <code>replace</code> method that performs a <code>delete</code> followed by an <code>insert</code> 
  at the same location.</p>


<h3>Example: Logging Window</h3>
<p>Here's a short example that illustrates using a text widget as an 80x24 logging window for an application.
Users don't edit the text widget at all. Instead, the program writes log messages to it.  We'd like
to display more than 24 lines (so no scrolling). If the log is full, old messages are removed from the top
before new ones are added at the end.</p>

<div class=python><pre>from tkinter import *
from tkinter import ttk

root = Tk()
log = Text(root, state='disabled', width=80, height=24, wrap='none')
log.grid()

def writeToLog(msg):
    numlines = int(log.index('end - 1 line').split('.')[0])
    log['state'] = 'normal'
    if numlines==24:
        log.delete(1.0, 2.0)
    if log.index('end-1c')!='1.0':
        log.insert('end', '\n')
    log.insert('end', msg)
    log['state'] = 'disabled'
</pre></div>
<div class=tcl><pre>package require Tk
grid [text .log -state disabled -width 80 -height 24 -wrap none]

proc writeToLog {msg} {
    set numlines [lindex [split [.log index "end - 1 line"] "."] 0]
    .log configure -state normal
    if {$numlines==24} {.log delete 1.0 2.0}
    if {[.log index "end-1c"]!="1.0"} {.log insert end "\n"}
    .log insert end "$msg"
    .log configure -state disabled
}</pre></div>
<div class=ruby><pre>require 'tk'
root = TkRoot.new
@log = TkText.new(root) {state 'disabled';width 80;height 24;wrap 'none'}.grid

def writeToLog(msg)
    numlines = @log.index("end - 1 line").split('.')[0].to_i
    @log['state'] = :normal
    @log.delete(1.0, 2.0) if numlines==24
    @log.insert('end', "\n") unless @log.index('end-1c')=='1.0'
    @log.insert('end', msg)
    @log['state'] = :disabled
end
</pre></div>
<div class=perl><pre>use Tkx;
$mw = Tkx::widget->new(".");

$log = $mw->new_tk__text(-state => "disabled", -width => 80, -height => 24, -wrap => "none");
$log->g_grid;

sub writeToLog {
    my ($msg) = @_;
    $numlines = $log->index("end - 1 line");
    print $numlines . "\n";
    $log->configure(-state => "normal");
    if ($numlines==24) {$log->delete("1.0", "2.0");}
    if ($log->index("end-1c")!="1.0") {$log->insert_end("\n");}
    $log->insert_end($msg);
    $log->configure(-state => "disabled");
}
</pre></div>

<div class=tip><p>Note that because the program placed the widget in a disabled state, we had to re-enable it to make any 
  changes, even from our program.</p></div>



 <a name="tags"></a><h2>Formatting with Tags</h2>

<p>So far, we've used text widgets when all the text is in a single font.  Now it's time to look at how to add special formatting,
such as bold, italic, strikethrough, background colors, font sizes, and much more.  Tk's text widget
implements these using a feature called <em>tags</em>.	</p>

<p>Tags are objects associated with the text widget.  Each tag is referred to via a name chosen by the programmer.
Each tag has several configuration options. These are things like fonts and colors that control formatting.
Though tags are objects having state, they don't need to be explicitly created.
They are automatically created the first time the tag name is used.</p>

<h3>Adding Tags to Text</h3>

<p>Tags can be associated with one or more ranges of text in the widget.  As before, ranges are specified via indices.
A single index represents a single character, and a pair of indices represent a range from the start
character to just before the end character.  Tags are added to a range of text using the 
<code>tag_add</code> method.</p>

<div class=python><pre>text.tag_add('highlightline', '5.0', '6.0')</pre></div>
<div class=tcl><pre>.text tag add highlightline 5.0 6.0</pre></div>
<div class=ruby><pre>text.tag_add('highlightline', 5.0, 6.0)</pre></div>
<div class=perl><pre>$text->tag_add("highlightline", "5.0", "6.0");</pre></div>

<p>Tags can also be provided when first inserting text. The <code>insert</code> method supports an optional parameter
containing a list of one or more tags to add to the text being inserted.</p>

<div class=python><pre>text.insert('end', 'new material to insert', ('highlightline', 'recent', 'warning'))</pre></div>
<div class=tcl><pre>.text insert end "new material to insert" "highlightline recent warning"</pre></div>
<div class=ruby><pre>text.insert('end', 'new material to insert', 'highlightline recent warning')</pre></div>
<div class=perl><pre>$text->insert_end("new material to insert", "highlightline recent warning");</pre></div>

<p>As the text in the widget is modified, whether by a user or your program, the tags will adjust automatically.
For example, if we tagged the text "the quick brown fox" with the tag "nounphrase", and then replaced
the word "quick" with "speedy," the tag still applies to the entire phrase.</p>

<h3>Applying Formatting to Tags</h3>

<p>Formatting is applied to tags via configuration options; these work similarly to configuration options for
the entire widget.  As an example:</p>

<div class=python><pre>text.tag_configure('highlightline', background='yellow', font='TkFixedFont', relief='raised')</pre></div>
<div class=tcl><pre>.text tag configure highlightline -background yellow -font "TkFixedFont" -relief raised</pre></div>
<div class=ruby><pre>text.tag_configure('highlightline', :background=>'yellow', :font=>'TkFixedFont', :relief=>'raised')</pre></div>
<div class=perl><pre>$text->tag_configure("highlightline", -background => "yellow", -font => "TkFixedFont", -relief => "raised");</pre></div>

<p>Tags support the following configuration options: <code>background</code>, <code>bgstipple</code>, <code>borderwidth</code>, 
<code>elide</code>, <code>fgstipple</code>, <code>font</code>, <code>foreground</code>, <code>justify</code>, <code>lmargin1</code>, <code>lmargin2</code>, 
<code>offset</code>, <code>overstrike</code>, <code>relief</code>, <code>rmargin</code>, <code>spacing1</code>, <code>spacing2</code>, 
<code>spacing3</code>, <code>tabs</code>, <code>tabstyle</code>, <code>underline</code>, and <code>wrap</code>.
Check the reference manual for detailed descriptions of these.  The <code>tag_cget <em>tag</em> <em>option</em></code> method allows us to query the configuration options of a tag.</p>


<p>Because multiple tags can apply to the same range of text, there is the possibility of conflict (e.g., two tags
specifying different fonts).  A priority order is used to resolve these; the most recently created tags have
the highest priority, but priorities can be rearranged using the <code>tag_raise <em>tag</em></code> and <code>tag_lower <em>tag</em></code> 
methods.</p>


<h3>More Tag Manipulations</h3>

<p>To delete one or more tags altogether, we can use the <code>tag_delete <em>tags</em></code> method.  This also, of course, 
removes any references to the tag in the text.  We can also remove a tag from a range of text using the 
<code>tag_remove <em>tag</em> <em>start</em> <em>?end?</em></code> method. 
Even if that leaves no ranges of text with that tag, the tag object itself still exists.</p>

<p>The <code>tag_ranges <em>tag</em></code> method will return a list of ranges in the text that the tag has been applied to.  There
are also <code>tag_nextrange <em>tag</em> <em>start</em> <em>?end?</em></code> and <code>tag_prevrange <em>tag</em> <em>start</em> <em>?end?</em></code> methods to 
search forward or backward for the first such range from a given position.</p>

<p>The <code>tag_names <em>?idx?</em></code> method, called with no additional parameters, will return a list of all tags currently
defined in the text widget (including those that may not be presently used).  If we pass the method an index,
it will return the list of tags applied to just the character at the index.</p>

<p>Finally, we can use the first and last characters in the text having a given tag as indices, the same way we
can use "end" or "2.5".  To do so, just specify <code><em>tagname</em>.first</code> or <code><em>tagname</em>.last</code>.</p>


<h3>Differences between Tags in Canvas and Text Widgets</h3>
<p>Both canvas and text widgets support "tags" that can be applied to several objects, style them, etc.
However, canvas and text tags are not the same.  There are important differences to take note of.</p>

<p>In canvas widgets, only individual canvas items have configuration options that control their appearance.  When we refer
to a tag in a canvas, the meaning of that is identical to "all canvas items presently having that tag."  The tag 
itself doesn't exist as a separate object.  So in the following snippet, the last rectangle added will <em>not</em>
be colored red.  </p>

<div class=python><pre>canvas.itemconfigure('important', fill='red')
canvas.create_rectangle(10, 10, 40, 40, tags=('important'))</pre></div>
<div class=tcl><pre>.canvas itemconfigure important -fill red
.canvas create rectangle 10 10 40 40 -tags important</pre></div>
<div class=ruby><pre>canvas.itemconfigure('important', :fill => 'red')
TkcRectangle.new(canvas, 10, 10, 40, 40, :tags => 'important')</pre></div>
<div class=perl><pre>$canvas->itemconfigure("important", -fill => "red");
$canvas->create_rectangle(10, 10, 40, 40, -tags => "important");</pre></div>

<p>In contrast, with text widgets, it's not the individual characters that retain the state information about appearance,
but tags, which are objects in their own right.  So in this snippet, the newly added text <em>will</em> be colored
red.</p>

<div class=python><pre>text.insert('end', 'first text', ('important'))
text.tag_configure('important', foreground='red')
text.insert('end', 'second text', ('important'))</pre></div>
<div class=tcl><pre>.text insert end "first text" important
.text tag configure important -foreground red
.text insert end "second text" important</pre></div>
<div class=ruby><pre>text.insert('end', 'first text', 'important')
text.tag_configure('important', :foreground => 'red')
text.insert('end', 'second text', 'important')</pre></div>
<div class=perl><pre>$text->insert_end("first text", "important");
$text->tag_configure("important", -foreground => "red");
$text->insert_end("second text", "important");</pre></div>


 <a name="bindings"></a><h2>Events and Bindings</h2>

<p>One very cool thing we can do is define event bindings on tags.  That allows us to do things like easily
recognize mouse clicks on particular ranges of text, and popup up a menu or dialog in response.  Different
tags can have different bindings. This saves the hassle of sorting out questions like "what does a click
at this location mean?".  Bindings on tags are implemented using the <code>tag_bind</code> method:</p>

<div class=python><pre>text.tag_bind('important', '&lt;1&gt;', popupImportantMenu)</pre></div>
<div class=tcl><pre>.text tag bind important &lt;1&gt; "popupImportantMenu"</pre></div>
<div class=ruby><pre>text.tag_bind('important', '1', proc{popupImportantMenu})</pre></div>
<div class=perl><pre>$text->tag_bind("important", "&lt;1&gt;", sub{popupImportantMenu});</pre></div>

<p>Widget-wide event bindings continue to work as they do for every other widget, e.g., to capture a mouse click
anywhere in the text.  Besides the normal low-level events, the text widget generates a
<code>&lt;&lt;Modified&gt;&gt;</code> virtual event whenever a change is made to the
content of the widget, and a <code>&lt;&lt;Selection&gt;&gt;</code> virtual event
whenever there is a change made to which text is selected.</p>

 <a name="selection"></a><h2>Selecting Text</h2>

<p>We can identify the range of text selected by a user, if any.  
For example, an editor may have a toolbar button to bold the selected text.  While you can tell when
the selection has changed (e.g., to update whether or not the bold button is active) via the <code>&lt;&lt;Selection&gt;&gt;</code>
virtual event, that doesn't tell you what has been selected.</p>

<p>The text widget automatically maintains a tag named <code>sel</code>, which refers to the selected text.  Whenever the
selection changes, the <code>sel</code> tag will be updated.  So we can find the range of text selected using the
<code>tag_ranges <em>?tag?</em></code> method, passing it <code>sel</code> as the tag to report on.</p>

<p>Similarly, we can change the selection by using <code>tag_add</code> to set a new selection, or <code>tag_remove</code>
to remove the selection.  The <code>sel</code> tag cannot be deleted, however.</p>

<div class=tip><p>Though the default widget bindings prevent this from happening, <code>sel</code> is like any other tag in that it can support
multiple ranges, i.e., disjoint selections.  To prevent this from happening, when changing the selection from your
code, make sure to remove any old selection before adding a new one.</p></div>

<p>The text widget manages the concept of the insertion cursor (where newly typed text will appear) separate from
the selection.  It does so using a new concept called a <em>mark</em>.</p>


 <a name="marks"></a><h2>Marks</h2>

<p>Marks indicate a particular place in the text.  In that respect, they are like indices. However, as
the text is modified, the mark will adjust to be in the same relative location.  In that way, they resemble
tags, but refer to a single position rather than a range of text.  Marks actually don't refer to a position occupied
by a character in the text but specify a position <em>between</em> two characters.</p>

<p>Tk automatically maintains two different marks.  The first, named <code>insert</code>, is the present location of the
insertion cursor.  As the cursor is moved (via mouse or keyboard), the mark moves with it.  The second mark, 
named <code>current</code>, tracks the position of the character underneath the current mouse position.</p>

<p>To create your own marks, use the widget's <code>mark_set <em>name</em> <em>idx</em></code> method, passing it the name of the mark and an index
(the mark is positioned just before the character at the given index).  This is also used to move an existing mark to
a different position.  Marks can be removed using the <code>mark_unset <em>name</em></code> method, passing it the name of the mark.
If you delete a range of text containing a mark, that also removes the mark.</p>

<p>The name of a mark can also be used as an index (in the same way <code>1.0</code> or <code>end-1c</code> are indices).  
You can find the next mark (or previous one) from a given index in the text using the <code>mark_next <em>idx</em></code> or 
<code>mark_previous <em>idx</em></code> methods.  The <code>mark_names</code> method will return a list of the names of all marks.</p>

<p>Marks also have a <em>gravity</em>, which can be modified with the <code>mark_gravity <em>name</em> <em>?direction?</em></code> method, 
which affects what happens when text is inserted at the mark.  Suppose we have the text "ac" with a mark in between that
we'll symbolize with a pipe, i.e., "a|c."   If the gravity of that mark is <code>right</code> (the default), the mark 
attaches itself to the "c."  If the new text "b" is inserted at the mark, the mark will remain stuck to the "c,"
and so the new text will be inserted before the mark, i.e., "ab|c."  If the gravity is instead <code>left</code>, the mark
attaches itself to the "a," and so new text will be inserted after the mark, i.e., "a|bc."</p>


 <a name="images"></a><h2>Images and Widgets</h2>

<p>Like canvas widgets, text widgets can contain not only text but also images and any other Tk widgets (including a frame, itself
containing many other widgets).  In a sense, this allows the text widget to work as a geometry manager in its own right.
The ability to add images and widgets within the text opens up a world of possibilities for your program.</p>

<p>Images are added to a text widget at a particular index, with the image specified as an existing Tk image.  
Other options that allow you to fine-tune padding, etc.</p>

<div class=python><pre>flowers = PhotoImage(file='flowers.gif')
text.image_create('sel.first', image=flowers)</pre></div>
<div class=tcl><pre>image create photo flowers -file flowers.gif
.text image create sel.first -image flowers</pre></div>
<div class=ruby><pre>flowers = TkPhotoImage.new(:file => 'flowers.gif')
TkTextImage.new(text, 'sel.first', :image => flowers)</pre></div>
<div class=perl><pre>Tkx::image_create_photo( "flowers", -file => "flowers.gif");
$text->image_create("sel.first", -image => "flowers");</pre></div>

<p>Other widgets are added to a text widget in much the same way as images.  The widget
being added must be a descendant of the text widget in the widget hierarchy.</p>

<div class=python><pre>b = ttk.Button(text, text='Push Me')
text.window_create('1.0', window=b)</pre></div>
<div class=tcl><pre>ttk::button .text.b -text "Push Me"
.text window create 1.0 -window .text.b</pre></div>
<div class=ruby><pre>b = Tk::Tile::Button.new(text) {text 'Push Me'}
TkTextWindow.new(text, 1.0, :window => b)</pre></div>
<div class=perl><pre>$b = $text->new_ttk__button(-text => "Push Me");
$text->window_create("1.0", -window => $b);</pre></div>


 <a name="more"></a><h2>Even More</h2>

<p>Text widgets can do many more things. Here, we'll briefly mention just a few more of them.  
  For details on any of these, see the reference manual.</p>

<h3>Search</h3>

<p>The text widget includes a powerful <code>search</code> method that allows you to locate a piece of text within the 
widget. This is useful for a "Find" dialog, as one obvious example.  You can search backward or forward from a
particular position or within a given range, specify the search term using exact text, case insensitive, or via
regular expressions, find one or all occurrences of the search term, etc.</p>

<h3>Modifications, Undo and Redo</h3>

<p>The text widget keeps track of whether changes have been made to the text (useful to know whether it needs to be
saved to a file, for example). We can query (or change) using the <code>edit_modified <em>?bool?</em></code> method.  There is also
a complete multi-level undo/redo mechanism, managed automatically by the widget when we set its <code>undo</code> 
configuration option to <code>true</code>.  Calling <code>edit_undo</code> or <code>edit_redo</code> modifies the current
text using information stored on the undo/redo stack.</p>

<h3>Eliding Text</h3>

<p>Text widgets can include text that is not displayed. This is known as "elided" text, and is made
available using the <code>elide</code> configuration option for tags.  It can be used to implement
an outliner, a "folding" code editor, or even to bury extra meta-data intermixed with displayed text.
When specifying positions within elided text, you have to be a bit more careful. Methods that work with
positions have extra options to either include or ignore the elided text.</p>

<h3>Introspection</h3>

<p>Like most Tk widgets, the text widget goes out of its way to expose information about its internal state. We've
seen this in terms of the <code>get</code> method, widget configuration options, <code>names</code> and
<code>cget</code> for both tags and marks, etc.  There is even more information available that can be useful
for a wide variety of tasks.  Check out the <code>debug</code>, <code>dlineinfo</code>, <code>bbox</code>, 
<code>count</code>, and <code>dump</code> methods in the reference manual.</p>

<h3>Peering</h3>

<p>The Tk text widget allows the same underlying text data structure (containing all the text, marks, tags, images, etc.) to be
shared between two or more different text widgets.  This is known as <em>peering</em> and is controlled via the
<code>peer</code> method.</p>


<h1>Treeview</h1>

<ul class=menu>
<li><a href="../../external.html?link=https://tkdocs.com/widgets/treeview.html">Widget Roundup</a></li>
<li><a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_treeview.htm">Reference Manual</a></li>
</ul>

<p>A <b>treeview</b> widget displays a hierarchy of items and allows users to browse through it. 
One or more attributes of each item can be displayed as columns to the right of the tree.  It can be used to
build user interfaces similar to the tree display you'd find in file managers like the macOS Finder
or Windows Explorer.  As with most Tk widgets, it offers incredible flexibility so it can be 
customized to suit a wide range of situations.</p>


<p class=picture>
<img class='border-0 img-fluid' src='../images/w_treeview_all.png' alt='screen shot'><br />
Treeview widgets.</p>



<div class=python><p>Treeview widgets are created using the <code><b>ttk.Treeview</b></code> class:</p>
	<pre>tree = ttk.Treeview(<em>parent</em>)</pre></div>
<div class=tcl><p>Treeview widgets are created using the <code><b>ttk::treeview</b></code> command:</p>
	<pre>ttk::treeview .tree</pre></div>
<div class=ruby><p>Treeview widgets are created using the <code><b>Tk::Tile::Treeview</b></code> class:</p>
	<pre>tree = Tk::Tile::Treeview.new(<em>parent</em>)</pre></div>
<div class=perl><p>Treeview widgets are created using the <code><b>new_ttk__treeview</b></code> method, a.k.a. <code><b>Tkx::ttk__treeview()</b></code>:</p>
	<pre>$tree = $<em>parent</em>->new_ttk__treeview;</pre></div>

<p>Horizontal and vertical scrollbars can be added in the usual manner if desired.</p>


 <a name="adding"></a><h2>Adding Items to the Tree</h2>

<p>To do anything useful with the treeview, we'll need to add one or more <em>items</em> to it.  Each item
represents a single node in the tree, whether a leaf node or an internal node containing other nodes.  
Items are referred to by a unique id. You can assign this id when the item is first created, or the widget can
automatically generate one.</p>

<p>Items are created by inserting them into the tree, using the treeview's <code>insert</code> method.  To
insert an item, we need to know where to insert it. That means specifying the parent item
and where within the list of the parent's existing children the new item should be inserted.</p>

<p>The treeview widget automatically creates a root node (which is not displayed). Its id is the empty string.
It serves as the parent of the first level of items that are added.  Positions
within the list of a node's children are specified by index (0 being the first, and <code>end</code>
meaning insert after all existing children).  </p>

<p>Normally, you'll also specify the <em>name</em> of each item, which is the text displayed in the tree.  
Other options allow you to add an image beside the name, specify whether the node is open or closed, etc.</p>

<div class=python><pre><em># Inserted at the root, program chooses id:</em>
tree.insert('', 'end', 'widgets', text='Widget Tour')
 
<em># Same thing, but inserted as first child:</em>
tree.insert('', 0, 'gallery', text='Applications')

<em># Treeview chooses the id:</em>
id = tree.insert('', 'end', text='Tutorial')

<em># Inserted underneath an existing node:</em>
tree.insert('widgets', 'end', text='Canvas')
tree.insert(id, 'end', text='Tree')
</pre>
<p>Inserting the item returns the id of the newly created item.</p>
</div>

<div class=tcl><pre><em># Inserted at the root, program chooses id:</em>
.tree insert {} end -id widgets -text "Widget Tour"
 
<em># Same thing, but inserted as first child:</em>
.tree insert {} 0 -id gallery -text "Applications"  

<em># Treeview chooses the id:</em>
set id [.tree insert {} end -text "Tutorial"]       

<em># Inserted underneath an existing node:</em>
.tree insert widgets end -text "Canvas"     
.tree insert $id end -text "Tree"       
</pre>
<p>Inserting the item returns the id of the newly created item.</p>

</div>
<div class=ruby><pre><em># Inserted at the root, program chooses id:</em>
tree.insert('', 'end', :id => 'widgets', :text => 'Widget Tour')
 
<em># Same thing, but inserted as first child:</em>
tree.insert('', 0, :id => 'gallery', :text => 'Applications')

<em># Treeview chooses the id:</em>
item = tree.insert('', 'end', :text => 'Tutorial')

<em># Inserted underneath an existing node:</em>
tree.insert( 'widgets', 'end', :text => 'Canvas')
tree.insert( item, 'end', :text => 'Tree')
</pre>
<p>Inserting the item returns an object for the item. This allows us to refer to the item later, e.g.,
as a parent in an <code>insert</code> call.  To retrieve the id for the item, use the item's <code>id</code> method.</p>

</div>
<div class=perl><pre><em># Inserted at the root, program chooses id:</em>
$tree->insert("", "end", -id => "widgets", -text => "Widget Tour");
 
<em># Same thing, but inserted as first child:</em>
$tree->insert("", "0", -id => "gallery", -text => "Applications");

<em># Treeview chooses the id:</em>
$id = $tree->insert("", "end", -text => "Tutorial");

<em># Inserted underneath an existing node:</em>
$tree->insert("widgets", "end", -text => "Canvas");
$tree->insert($id, "end", -text => "Tree");
</pre>
<p>Inserting the item returns the id of the newly created item.</p>
</div>

 <a name="rearranging"></a><h2>Rearranging Items</h2>

<p>A node (and its descendants, if any) can be moved to a different location in the tree. The only restriction
is that a node cannot be moved underneath one of its descendants, for obvious reasons.  As before, the target location is 
specified via an existing parent node, and a position within its list of children.</p>

<div class=python><pre>tree.move('widgets', 'gallery', 'end')  <em># move widgets under gallery</em></pre></div>
<div class=tcl><pre>.tree move widgets gallery end; <em># move widgets under gallery</em></pre></div>
<div class=ruby><pre>tree.move('widgets', 'gallery', 'end'); <em># move widgets under gallery</em></pre></div>
<div class=perl><pre>$tree->move("widgets", "gallery", "end"); <em># move widgets under gallery</em></pre></div>

<p>Items can be <em>detached</em> from the tree, which removes the item and its descendants from the hierarchy,
but does not destroy the items. This allows us to later reinsert them with <code>move</code>.</p>

<div class=python><pre>tree.detach('widgets')</pre></div>
<div class=tcl><pre>.tree detach widgets</pre></div>
<div class=ruby><pre>tree.detach('widgets')
item.detach</pre></div>
<div class=perl><pre>$tree->detach("widgets");</pre></div>

<p>Items can also be <em>deleted</em>, which does completely destroy the item and its descendants.</p>

<div class=python><pre>tree.delete('widgets')</pre></div>
<div class=tcl><pre>.tree delete widgets</pre></div>
<div class=ruby><pre>tree.delete('widgets')
item.delete</pre></div>
<div class=perl><pre>$tree->delete("widgets");</pre></div>

<p>To traverse the hierarchy, there are methods to find the parent of an item (<code>parent <em>item</em></code>),
its next or previous sibling (<code>next <em>item</em></code> and <code>prev <em>item</em></code>), and return the list of children
of an item (<code>children <em>item</em></code>).</p>


<p>We can control whether or not the item is open and shows its children by modifying the <code>open</code> item 
configuration option.</p>

<div class=python><pre>tree.item('widgets', open=TRUE)
isopen = tree.item('widgets', 'open')
</pre></div>
<div class=tcl><pre>.tree item widgets -open true
set isopen [.tree item widgets -open]</pre></div>
<div class=ruby><pre>tree.itemconfigure('widgets', 'open', true); <em># or item['open'] = true</em>
isopen = tree.itemcget('widgets', 'open');   <em># or isopen = item['open']</em></pre></div>
<div class=perl><pre>$tree->item("widgets", -open => "true");
$isopen = $tree->item("widgets", "-open");</pre></div>

 
 <a name="iteminfo"></a><h2>Displaying Information for each Item</h2>

<p>The treeview can display one or more additional pieces of information about each item. These are shown
as columns to the right of the main tree display.</p>

<p>Each column is referenced by a symbolic name that we assign.  We can specify the list of columns
using the <code>columns</code> configuration option of the treeview widget, either when first creating the
widget, or later on.</p>

<div class=python><pre>tree = ttk.Treeview(root, columns=('size', 'modified'))
tree['columns'] = ('size', 'modified', 'owner')
</pre></div>
<div class=tcl><pre>ttk::treeview .tree -columns "size modified"
.tree configure -columns "size modified owner"</pre></div>
<div class=ruby><pre>tree = Tk::Tile::Treeview.new(<em>parent</em>) {columns 'size modified'}
tree['columns'] = 'size modified owner'</pre></div>
<div class=perl><pre>$tree = $<em>parent></em>->new_ttk__treeview(-columns => "size modified");
$tree->configure(-columns => "size modified owner");</pre></div>

<p>We can specify the width of the column, how the display of item information in the column is aligned,
and more.  We can also provide information about the heading of the column, such as the text to display,
an optional image, alignment, and a script to invoke when the item is clicked (e.g. to sort the tree).</p>

<div class=python><pre>tree.column('size', width=100, anchor='center')
tree.heading('size', text='Size')
</pre></div>
<div class=tcl><pre>.tree column size -width 100 -anchor center
.tree heading size -text "Size"</pre></div>
<div class=ruby><pre>tree.column_configure( 'size', :width => 100, :anchor => 'center')
tree.heading_configure( 'size', :text => 'Size')</pre></div>
<div class=perl><pre>$tree->column("size", -width => 100, -anchor => "center");
$tree->heading("size", -text => "Size");</pre></div>

<p>What to display in each column for each item can be specified individually by using the <code>set</code> 
method. You can also provide a list describing what to display in all the columns for the item.
This is done using the <code>values</code> item configuration option. It can be used either when first inserting
the item or to update it later). It takes a list of values. The order of the list must be the same as the order 
in the <code>columns</code> widget configuration option.</p>

<div class=python><pre>tree.set('widgets', 'size', '12KB')
size = tree.set('widgets', 'size')
tree.insert('', 'end', text='Listbox', values=('15KB', 'Yesterday', 'mark'))
</pre></div>
<div class=tcl><pre>.tree set widgets size "12KB"
set size [.tree set widgets size]
.tree insert "" end -text Listbox -values [list "15KB" "Yesterday" "mark"]</pre></div>
<div class=ruby><pre>tree.set('widgets', 'size', '12KB'); <em># or item.set('size', '12KB')</em>
size = tree.get('widgets', 'size');  <em># or item.get('size')</em>
tree.insert('', 'end', :text => 'Listbox', :values => ['15KB','Yesterday','mark'])</pre></div>
<div class=perl><pre>$tree->set("widgets", "size", "12KB");
$size = $tree->set("widgets", "size");
$tree->insert("", "end", -text => "Listbox", -values => "15KB Yesterday mark");</pre></div>


 <a name="appearance"></a><h2>Item Appearance and Events</h2>

<p>Like the text and canvas widgets, the treeview widget uses <em>tags</em> to modify the
appearance of items in the tree.  We can assign a list of tags to each item using the <code>tags</code>
item configuration option (again, when creating the item or later on).</p>

<p>Configuration options can then be specified on the tag, which will then apply to all items having that
tag.  Valid tag options include <code>foreground</code> (text color), <code>background</code>,
<code>font</code>, and <code>image</code> (not used if the item specifies its own image).</p>

<p>We can also create event bindings on tags, which lets us capture mouse clicks, keyboard events etc.</p>

<div class=python><pre>tree.insert('', 'end', text='button', tags=('ttk', 'simple'))
tree.tag_configure('ttk', background='yellow')
tree.tag_bind('ttk', '<1>', itemClicked)  
<em># the item clicked can be found via tree.focus()</em></pre></div>
<div class=tcl><pre>.tree insert "" end -text button -tags "ttk simple"
.tree tag configure ttk -background yellow
.tree tag bind ttk <1> "itemclicked"
<em># the item clicked can be found via [.tree focus]</em></pre></div>
<div class=ruby><pre>tree.insert('', 'end', :text => 'button', :tags => ['ttk','simple'])
tree.tag_configure('ttk', :background => 'yellow')
tree.tag_bind('ttk', '1', proc{itemclicked})
<em># the item clicked can be found via 'tree.focus_item'</em></pre>
</div>
<div class=perl><pre>$tree->insert("", "end", -text => "button", -tags => "ttk simple");
$tree->tag_configure("ttk", -background => "yellow");
$tree->tag_bind("ttk", "<1>", sub{itemClicked});
<em># the item clicked can be found via $tree->focus</em></pre></div>
	
<p>The treeview will generate virtual events <code>&lt;&lt;TreeviewSelect&gt;&gt;</code>, <code>&lt;&lt;TreeviewOpen&gt;&gt;</code>, and
<code>&lt;&lt;TreeviewClose&gt;&gt;</code>, which allow us to monitor changes to the widget made by users.
We can use the <code>selection</code> method to determine the current selection (the selection can also be changed
from your program).</p>


 <a name="display"></a><h2>Customizing the Display</h2>

<p>There are many aspects of how the treeview widget is displayed that we can customize.  We've already seen some of them, 
such as the text of items, fonts and colors, names of column headings, and more.  Here are a few additional ones.</p>

<ul>
<li> Specify the desired number of rows to show using the <code>height</code> widget configuration option.
<li> Control the width of each column using the column's <code>width</code> or <code>minwidth</code> options.
	 The column holding the tree can be accessed with the symbolic name <code>#0</code>.  The overall requested
	 width for the widget is based on the sum of the column widths.
<li> Choose which columns to display and the order to display them in using the <code>displaycolumns</code>
	 widget configuration option.
<li> You can optionally hide one or both of the column headings or the tree itself (leaving just the columns)
	 using the <code>show</code> widget configuration option (default is "tree headings" to show both).
<li> You can specify whether a single item or multiple items can be selected by users via the
	 <code>selectmode</code> widget configuration option, passing <code>browse</code> (single item), 
	 <code>extended</code> (multiple items, the default), or <code>none</code>.  
</ul>





<h1>Styles and Themes</h1>

<p>The <em>themed</em> aspect of the modern Tk widgets is one of the most powerful and exciting aspects of the newer
widget set.  Yet, it's also one of the most confusing.</p>

<p>This chapter explains styles (which control how widgets like buttons look) and themes (which are a collection
  of styles that define how all the widgets in your application look). Changing themes can give your application an
  entirely different look.</p>
  
<p class=picture>
<img class='border-0 img-fluid' src='../images/themes.png' alt='screen shot'><br />
Applying different themes.</p>  

<p>Note that it's not just colors that have changed, but the actual shape of individual widgets. Styles and themes are <em>extremely</em> flexible.</p>

  
<h3>Why?</h3>

<p>However, before you get carried away, very few applications will benefit from switching themes like this. Some games or educational
programs might be exceptions. Using the standard Tk theme for a given platform will display widgets the way that people expect to see them, 
particularly if they're running macOS and Windows.</p>

<div class=fyi><p>On Linux systems, there's far less standardization of look and feel. Users expect (and are more comfortable with) some
  variability and "coolness." Because different widget sets (typically GTK and QT) are used by window managers, control panels, and other system 
  utilities, Tk can't seamlessly blend in with the current settings on any particular system. Most of the Linux screenshots in this
  tutorial use Tk's <code>alt</code> theme. Despite users being accustomed to variability, there are limits to what most users will accept.
  The styling of core widgets in Tk's classic widget set, matching circa-1992 OSF/Motif, is a prime example.</p></div>

<p>Styles and themes, used in a more targeted manner and with significant restraint, can have a role to play in modern applications.
  This chapter explains why and when you might want to use them and how to go about doing so. We'll begin by drawing a parallel 
  between Tk's styles and themes and another realm of software development.</p>

<h3>Understanding Styles and Themes</h3>


<p>If you're familiar with web development, you know about cascading stylesheets (CSS). There are two ways it can be used to customize
  the appearance of an element in your HTML page. In the first way, you add a bunch of style attributes (fonts, colors, borders, etc.) directly 
  to an element in your HTML code via the <code>style</code> attribute. For example:</p>
<pre>
&lt;label style="color:red; font-size:14pt; font-weight:bold; background-color:yellow;"&gt;Meltdown imminent!&lt;/label&gt;
</pre>  

<p>The other way to use CSS is to attach a <em>class</em> to each widget via the <code>class</code> attribute. 
  The details of how elements of that class appear are provided elsewhere, often in a separate CSS file.  
  You can attach the same class to many elements, and they will all have the same appearance. You don't need to repeat
  the full details for every element. More importantly, you separate the logical content of your site (HTML) from its
  appearance (CSS).</p>

<pre>
&lt;label class="danger"&gt;Meltdown imminent!&lt;/label&gt;
...
&lt;style type="text/css"&gt;
label.danger {color:red; font-size:14pt; font-weight:bold; background-color:yellow;}
&lt;/style&gt;
</pre>
  
<p>Back to Tk.</p>
<ul><li>In the classic Tk widgets, all appearance customizations require specifying each detail on individual widgets,
  akin to <em>always</em> using the <code>style</code> HTML attribute.</li>
  <li>In the themed Tk widgets, <em>all</em> appearance customizations are made via attaching a style to a widget, akin to using
    the <code>class</code> HTML attribute. Separately, you define how widgets with that style will appear, akin to writing CSS.</li>
  <li>Unlike with HTML, <em>you can't freely mix and match.</em> You can't customize some themed entries or buttons with styles, and others
    by directly changing appearance options.</li> 
</ul>

<div class=fyi><p>Yes, there are a few exceptions, like labels where you can customize the font and colors through both styles and configuration options.</p></div>

<h3>Benefits</h3>

<p>So why use styles and themes in Tk? They take the fine-grained details of appearance decisions away from individual instances of widgets.</p>

<p>That makes for cleaner code and less repetition. If you have 20 entry widgets in your application, you don't need to repeat the same 
  appearance details every time you create one (or write a wrapper function). You just assign them a style.</p>
  
<p>Styles also put all appearance decisions in one place. And because styles for a button and styles for a widget can share common elements, it
  promotes consistency and improves reuse.</p>

<div class=fyi><p>Styles also have many benefits for widget authors. Widgets can delegate most appearance decisions to styles.
  A widget author no longer has to hardcode logic to the effect of "when the state is disabled, consult the 'disabledforeground' 
  configuration option and use that for the foreground color."  Not only did that make coding widgets longer (and more repetitive),
  but it also restricted how a widget could be changed based on its state. If the widget author hadn't coded in logic to change the font 
  when the state changed, you as an application developer using the widget were out of luck.
</p><p>
  Using styles, widget authors don't need to provide code for every possible appearance option. That not only simplifies the widget but 
  paradoxically ensures that a wider range of appearances <b>can</b> be set, including those the widget author may not have anticipated.
</p></div>



 <a name="usetheme"></a><h2>Using Existing Themes</h2>

<p>Before delving into the weightier matters of tastefully and selectively modifying and applying styles to improve the usability of
  your application and cleanliness of your code, let's deal with the fun bits: using existing themes to completely reskin your application.</p>

<p>Themes are identified by a name.  You can obtain the names of all available themes:</p>

<div class=python><pre>>>> <b>s = ttk.Style()</b>
>>> <b>s.theme_names()</b>
('aqua', 'step', 'clam', 'alt', 'default', 'classic')</pre>
<div class=fyi><p>Tkinter encapsulates all style manipulations in the <code>ttk.Style</code> class. We'll therefore need an instance of that
  class for this and other operations.</p></div>
</div>
<div class=tcl><pre>% <b>ttk::style theme names</b>
aqua clam alt default classic</pre></div>
<div class=ruby><pre>>> <b>Tk::Tile::Style.theme_names</b>
=> ["aqua", "step", "clam", "alt", "default", "classic"]</pre></div>
<div class=perl><pre>Perl> <b>Tkx::ttk__style_theme_names()</b>
aqua clam alt default classic</pre></div>

<p class=picture>
<img class='border-0 img-fluid' src='../images/w_several_themes.png' alt='screen shot'><br />
Built-in themes.</p>

<p>Besides the built-in themes (<code>alt</code>, <code>default</code>, <code>clam</code>, and <code>classic</code>), macOS includes a theme named
  <code>aqua</code> to match the system-wide style, while Windows includes themes named <code>vista</code>, <code>winxpnative</code>, and 
  <code>winnative</code>.</p>

<p>Only one theme can ever be active at a time.  To obtain the name of the theme currently in use, use the following:</p>


<div class=python><pre>>>> <b>s.theme_use()</b>
'aqua'</pre></div>
<div class=tcl><pre>% <b>ttk::style theme use</b>
aqua</pre>
</div>
<div class=ruby><pre>>> <b>Tk.tk_call('ttk::style', 'theme', 'use')</b>
=> "aqua"</pre>
<div class=yuck><p>As of Ruby/Tk 0.2.0 (current version as of 2020), the Tk::Tile::Style.theme_use API doesn't allow querying the current style.</p></div>
</div>
<div class=perl><pre>Perl> <b>Tkx::ttk__style_theme_use()</b>
aqua</pre></div>

<div class=fyi><p>This API, which was originally targeted for Tk 8.6, was back-ported to Tk 8.5.9.  If you're using an earlier version of Tk
getting this info is a bit trickier.</p></div>

<p>Switching to a new theme can be done with:</p>

<div class=python><pre>s.theme_use('<em>themename</em>')</pre></div>
<div class=tcl><pre>ttk::style theme use <em>themename</em></pre></div>
<div class=ruby><pre>Tk::Tile::Style.theme_use "<em>themename</em>"</pre></div>
<div class=perl><pre>Tkx::ttk__style_theme_use("<em>themename</em>");</pre></div>

<p>What does this actually do?  Obviously, it sets the current theme to the indicated theme.  Doing this,
therefore, replaces all the currently available styles with the set of styles defined by the theme.
Finally, it refreshes all widgets, so that they take on the appearance described by the new theme.</p>


<h3>Third-Party Themes</h3>
  
<p>With a bit of looking around, you can find some existing add-on themes available for download.
  A good starting point is <a href="../../external.html?link=https://wiki.tcl-lang.org/page/List+of+ttk+Themes">https://wiki.tcl-lang.org/page/List+of+ttk+Themes</a>.</p>

<p>Though themes can be defined in any language that Tk supports, most that you will find are written in Tcl. How can you install them so that they
  are available to use in your application?</p>
  
<p>As an example, let's use the "awdark" theme, available from <a href="../../external.html?link=https://sourceforge.net/projects/tcl-awthemes/">https://sourceforge.net/projects/tcl-awthemes/</a>.
  Download and unzip the <code>awthemes-*.zip</code> file somewhere. You'll notice it contains a bunch of <code>.tcl</code> files, a 
  subdirectory <code>i</code> containing more directory with images used by the theme, etc.</p>

<p>One of the files is named <code>pkgIndex.tcl</code>.
  This identifies it as a Tcl package, which is similar to a module in other languages.
  If we look inside, you'll see a bunch of lines like <code>package ifneeded awdark 7.7</code>. Here, <code>awdark</code> is the name
  of the package, and <code>7.7</code> is its version number. It's not unusual, as in this case, for a single <code>pkgIndex.tcl</code> file
  to provide several packages.</p> 
  
<p>To use it, we need to tell Tcl where to find the package (via adding its directory to Tcl's <code>auto_path</code>) and the name of the 
  package to use.</p>

<div class=python><pre>root.tk.call('lappend', 'auto_path', '/full/path/to/awthemes-9.3.1')
root.tk.call('package', 'require', 'awdark')</pre></div>
<div class=tcl><pre>lappend auto_path "/full/path/to/awthemes-9.3.1"
package require awdark</pre></div>
<div class=ruby><pre>Tk.tk_call('lappend', 'auto_path', '/full/path/to/awthemes-9.3.1')
Tk.tk_call('package', 'require', 'awdark')</pre></div>
<div class=perl><pre>Tkx::eval("lappend auto_path \"/full/path/to/awthemes-9.3.1\"");
Tkx::eval("package require awdark");</pre></div>

<p>If the theme is instead implemented as a single Tcl source file, without a <code>pkgIndex.tcl</code>, you can make it available like this:</p>

<div class=python><pre>root.tk.call('source', '/full/path/to/themefile.tcl')</pre></div>
<div class=tcl><pre>source "/full/path/to/themefile.tcl"</pre></div>
<div class=ruby><pre>Tk.tk_call('source', '/full/path/to/themefile.tcl')</pre></div>
<div class=perl><pre>Tkx::eval("source \"/full/path/to/themefile.tcl\"");</pre></div>

<p>You should now be able to use the theme in your own application, just as you would any of the built-in themes.</p>

  
 <a name="usingstyles"></a><h2>Using Styles</h2>

<p>We'll now tackle the more difficult issue of how to take full advantage of styles and themes within your application, not just reskinning it
  with an existing theme.</p>

<h3>Definitions</h3>

<p>We first need to introduce a few essential concepts.</p>

<h4>Widget Class</h4>
	
<p>A <em>widget class</em> identifies the type of a particular widget, whether
it is a button, a label, a canvas, etc. All themed widgets have a default class. Buttons have the class <code>TButton</code>,
labels <code>TLabel</code>, etc.</p>


<h4>Widget State</h4>

<p>A <em>widget state</em> allows a single widget to have more than one appearance or behavior,
depending on things like mouse position, different state options set by the application, and so on.</p>

<p>As you'll recall, all themed widgets maintain a set of binary state flags, accessed by the <code>state</code> and <code>instate</code> methods.
The flags are: <code>active</code>, <code>disabled</code>, <code>focus</code>, <code>pressed</code>,
<code>selected</code>, <code>background</code>, <code>readonly</code>, <code>alternate</code>, and <code>invalid</code>.
All widgets have the same set of state flags, though they may ignore some of them (e.g., a label widget would
likely ignore an <code>invalid</code> state flag). See the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_widget.htm">themed widget</a> page 
in the reference manual for the exact meaning of each state flag.</p>



<h4>Style</h4>

<p>A <em>style</em> describes the appearance (or appearance<em>s</em>) of a widget class.  
  All themed widgets having the same widget class will have the same appearance(s).</p>
<p>Styles are referred to by the name of the widget class they describe. For example,
  the style <code>TButton</code> defines the appearance of all widgets with the class <code>TButton</code>.

<p>Styles know about different states, and one style can define different appearances based on a widget's state.
For example, a style can specify how a widget's appearance should change if the <code>pressed</code> state flag is set.</p>

<h4>Theme</h4>

<p>A <em>theme</em> is a collection of styles.  While each style is widget-specific (one for buttons, one for
entries, etc.), a theme collects many styles together.  All styles in the same theme will be designed to 
visually "fit" together with each other. (Tk doesn't technically restrict bad design or judgment, unfortunately!)</p>

<p>Using a particular theme in an application really means that, by default, the appearance of each
  widget will be controlled by the style within that theme responsible for that widget class.</p>



<h3>Style Names</h3>
<p>Every style has a name.  If you're going to modify a style, create a new one, or use a style for a widget,
you need to know its name.</p>

<p>How do you know what the names of the styles are?  If you have a particular widget, and you want to know
what style it is currently using, you can first check the value of its <code>style</code> configuration option.  If
that is empty, it means the widget is using the <em>default</em> style for the widget.  You can retrieve
that via the widget's class.  For example:</p>

<div class=python><pre>>>> <b>b = ttk.Button()</b>
>>> <b>b['style']</b>
''
>>> <b>b.winfo_class()</b>
'TButton'</pre></div>
<div class=tcl><pre>% <b>ttk::button .b</b>
.b
% <b>.b cget -style</b>     <em># empty string as a result</em>
% <b>winfo class .b</b>
TButton</pre></div>
<div class=ruby><pre>>> <b>b = Tk::Tile::Button.new(parent)</b>
=> #&lt;Tk::Tile::TButton:0x10bcca4 @path=".w00001"&gt;	
>> <b>b['style']</b>
=> []
>> <b>TkWinfo.classname(b)</b>
=> "TButton"</pre></div>
<div class=perl><pre>Perl> <b>$b = $mw->new_ttk__button()</b>
.b
Perl> <b>$b->cget(-style)</b>   <em># empty string as a result</em>
Perl> <b>Tkx::winfo('class', $b)</b>
TButton</pre></div>

<p>In this case, the style that is being used is <code>TButton</code>.  The default styles for other themed widgets
are named similarly, e.g., <code>TEntry</code>, <code>TLabel</code>, etc.</p>

<div class=tip><p>It's always wise to check the specifics. For example, the treeview widget's class is <code>Treeview</code>, <b>not</b> <code>TTreeview</code>.</p></div>

<p>Beyond the default styles, though, styles can be named pretty much anything.  You might create your own style
(or use a theme that has a style) named <code>FunButton</code>, <code>NuclearReactorButton</code>, or even <code>GuessWhatIAm</code> (not a 
smart choice).</p>

<p>More often, you'll find names like <code>Fun.TButton</code> or <code>NuclearReactor.TButton</code>, which suggest
variations of a base style; as you'll see, this is something Tk supports for creating and modifying styles.</p>

<div class=yuck><p>The ability to retrieve a list of all currently available styles is currently not supported.
  This will likely appear in Tk 8.7 in the form of a new command, <code>ttk::style theme styles</code>
  to return the list of styles implemented by a theme. It also proposes adding a <code>style</code> method
  for all widgets, so you don't have to examine both the widget's <code>style</code> configuration option and
  its class. See <a href="../../external.html?link=https://tip.tcl.tk/584">TIP #584</a>.
</p></div>


<h3>Applying a Style</h3>

<p>To use a style means to apply that style to an individual widget.  If you know the name of the style you
want to use, and which widget to apply it to, it's easy.  Setting the style can be done at creation time:</p>

<div class=python><pre>b = ttk.Button(<em>parent</em>, text='Hello', style='Fun.TButton')</pre></div>
<div class=tcl><pre>ttk::button .b -text "Hello" -style "Fun.TButton"</pre></div>
<div class=ruby><pre>b = Tk::Tile::Button.new(<em>parent</em>) {text "Hello"; style "Fun.TButton"}</pre></div>
<div class=perl><pre>$b = $<em>parent</em>->new_ttk__button(-text => "Hello", -style => "Fun.TButton");</pre></div>

<p>As well, a widget's style can be changed at any time with the <code>style</code> configuration option:</p>

<div class=python><pre>b['style'] = 'Emergency.TButton'</pre></div>
<div class=tcl><pre>.b configure -style "Emergency.TButton"</pre></div>
<div class=ruby><pre>b['style'] = "Emergency.TButton"</pre></div>
<div class=perl><pre>$b->configure(-style => "Emergency.TButton");</pre></div>


<h3>Creating a Simple Style</h3>

<p>So how do we create a new style like <code>Emergency.TButton</code>?</p>

<p>In situations like this, you're creating a new style similar to an existing one but varies
in a certain aspect. This is the most common reason for creating new styles.</p>

<p>For example, you want most of the buttons in your application to keep their normal appearance, but have
  certain "emergency" buttons highlighted differently.  Creating a new style (e.g., <code>Emergency.TButton</code>),
  derived from the base style (<code>TButton</code>), is the appropriate thing to do.</p>

<p>Prepending another name (<code>Emergency</code>) followed  by a dot onto an existing style creates a new style  
  derived from the existing one. The new style will have exactly the same options as the existing one except for the indicated differences:</p>

<div class=python><pre>s.configure('Emergency.TButton', font='helvetica 24', foreground='red', padding=10)</pre></div>
<div class=tcl><pre>ttk::style configure Emergency.TButton -font "helvetica 24" -foreground red -padding 10</pre></div>
<div class=ruby><pre>Tk::Tile::Style.configure('Emergency.TButton', {"font" => "helvetica 24", "foreground" => "red", "padding" => 10})</pre></div>
<div class=perl><pre>Tkx::ttk__style_configure("Emergency.TButton", -font => "helvetica 24", -foreground => "red", -padding => 10);</pre></div>
  
<p>You could then apply that style to an individual button widget using its <code>style</code> configuration option,
  as shown earlier. Every other button widget would retain its normal appearance.</p>

<p>How do you know what options are available to change for a given style? That requires diving a little deeper inside styles.</p> 


<div class=upgrade><p>
You may have existing code using the classic widgets that you'd like to move to the themed widgets.
Most appearance changes made to classic widgets through configuration options can probably be dropped.
For those that can't, you may need to create a new style, as shown above.
</p><p>
State-specific appearance changes can be treated similarly. In classic Tk, several widgets supported a few state changes 
via configuration options. For example, setting a button's <code>state</code> option to <code>disabled</code> would draw it
with a greyed-out label. Some allowed an additional state, <code>active</code>, which represented a different
appearance. You could control the appearance of the widget in different states via additional
configuration options, e.g., <code>foreground</code>, <code>disabledforeground</code>, and
<code>activeforeground</code>. 
</p><p>
State changes via configuration options should be changed to use the <code>state</code> method on themed widgets.
Configuration options to modify the appearance of a widget when in a particular state should be dealt with in the style.
</p><p>
Classic Tk widgets also supported a very primitive form of styles that you may encounter.
This used the <b>option database,</b> a now-obscure front end to X11-style configuration files.
</p><p>
In classic Tk, all buttons had the same class (<code>Button</code>), all labels had the same class (<code>Label</code>), etc.
You could use this widget class both for introspection and for changing options globally through the option database.
It let you say, for example, that all buttons should have a red background.</p>
</p><p>
A <b>few</b> classic Tk widgets, including frame and toplevel widgets, let you <b>change</b> the widget class of a particular widget 
when it was first created by providing a <code>class</code> configuration option.  For example, you could specify that one particular
frame widget had a class of <code>SpecialFrame</code>, while others would have the default class <code>Frame</code>.
You could use the option database to change the appearance of just the <code>SpecialFrame</code> frames.
</p><p>
Styles and themes take that simple idea and give it rocket boosters.
</p></div>




 <a name="insidestyle"></a><h2>What's Inside a Style?</h2>
<p>If all you want to do is <em>use</em> a style or create a new one with a few tweaks, you now know everything you need.  
  If, however, you want to make more substantial changes, things start to get "interesting."</p>


<h3>Elements</h3>
<p>While each style controls a single type of widget, each widget is usually composed of smaller pieces, called
<em>elements</em>.  It's the job of the style author to construct the entire widget out of these smaller
elements.  What these elements are depends on the widget.</p>

<p>Here's an example of a button.  It might have a border on the very outside. That's one element.  Just inside 
that, there may be a focus ring. Normally, it's just the background color, but could be highlighted when a user tabs 
into the button.  So that's a second element.  Then there might be some spacing between that focus ring and the button's 
label.  That spacing is a third element.  Finally, the text label of the button itself is a fourth element.  </p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/button_elements.png' alt='screen shot'><br />
Possible elements of a button.</p>

<p>Why might the style author have divided it up that way?  If you have one part of the widget that may be in a different 
location from another or might be a different color than another, it may be a good candidate for an element.
Note that this is just one example of how a button could be constructed from elements.  Different styles and themes
could (and do) accomplish this in different ways.</p>

<p>Here is a second example, for a vertical scrollbar. It consists of a "trough" element, which contains other elements.
  These include the up and down arrow elements at either end and a "thumb" element in the middle (it might have other
  elements too, like borders).</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/scrollbar_elements.png' alt='screen shot'><br />
Possible elements of a scrollbar.</p>



<h3>Layout</h3>
<p>Besides specifying which elements make up a widget, a style also defines how those elements are arranged
within the widget. This is called their <em>layout.</em>  In the button example, we had a label element inside a spacing
element, inside a focus ring element, inside a border element.  Its logical layout is this:</p>

<pre>border {
    focus {
        spacing {
            label
        }
    }
}</pre>
<p>We can ask Tk for the layout of the <code>TButton</code> style:</p>

<div class=python><pre>>>> <b>s.layout('TButton')</b>
[("Button.border", {"children": [("Button.focus", {"children": [("Button.spacing",
{"children": [("Button.label", {"sticky": "nswe"})], "sticky": "nswe"})], 
"sticky": "nswe"})], "sticky": "nswe", "border": "1"})]	</pre></div>
<div class=tcl><pre>% <b>ttk::style layout TButton</b>
Button.border -sticky nswe -border 1 -children {Button.focus -sticky nswe 
-children {Button.spacing -sticky nswe -children {Button.label -sticky nswe}}}</pre></div>
<div class=ruby><pre>>> <b>Tk::Tile::Style.layout('TButton')</b>
=> [["Button.border", {"children"=>[["Button.focus", {"children"=>[["Button.spacing",
{"children"=>[["Button.label", {"sticky"=>"nswe"}]], "sticky"=>"nswe"}]], 
"sticky"=>"nswe"}]], "sticky"=>"nswe", "border"=>"1"}]]</pre></div>
<div class=perl><pre>Perl> <b>Tkx::ttk__style_layout('TButton')</b>
Button.button -sticky nswe -border 1 -children {Button.padding -sticky nswe 
-children {Button.spacing -sticky nswe -children {Button.label -sticky nswe}}}</pre></div>

<p>If we clean this up and format it a bit, we get something with this structure:</p>

<pre>Button.border -sticky nswe -border 1 -children {
    Button.focus -sticky nswe -children {
        Button.spacing -sticky nswe -children {
            Button.label -sticky nswe
        }
    }
}</pre>
<p>This starts to make sense; we have four elements, named <code>Button.border</code>, <code>Button.focus</code>,
<code>Button.spacing</code>, and <code>Button.label</code>.  Each of these has different element options, such
as <code>children</code>, <code>sticky</code>, and <code>border</code> that specify layout or sizes.  Without 
getting into too much detail at this point, we can clearly see the nested layout, based
on the <code>children</code> and <code>sticky</code> attributes.</p>

<div class=fyi><p>Styles uses a simplified version of Tk's <code>pack</code> geometry manager to specify element layout.
  This is detailed in the <a href="../../external.html?link=https://tcl.tk/man/tcl8.6/TkCmd/ttk_style.htm">style</a> reference manual page.
  </p></div>



<h3>Element Options</h3>
<p>Each of these elements has a number of different options.  For example, a label element has a font and a foreground
  color. An element representing the thumb of a scrollbar may have an option to set its background color or another to provide the width of a border.
  These can be customized to adjust how the elements within the overall widget look.  </p>


<p>You can determine what options are available for each element?  Here's an example of checking what options
are available for the label inside the button (which we know from the <code>layout</code> method
is identified as <code>Button.label</code>):</p>

<div class=python><pre>>>> <b>s.element_options('Button.label')</b>
('compound', 'space', 'text', 'font', 'foreground', 'underline', 'width', 'anchor', 'justify',
'wraplength', 'embossed', 'image', 'stipple', 'background')</pre>
</div>
<div class=tcl><pre>% <b>ttk::style element options Button.label</b>
-compound -space -text -font -foreground -underline -width -anchor -justify 
-wraplength -embossed -image -stipple -background</pre></div>
<div class=ruby><pre>>> <b>Tk::Tile::Style.element_options("Button.label")</b>
=> ["-compound", "-space", "-text", "-font", "-foreground", "-underline", "-width", "-anchor", 
"-justify", "-wraplength", "-embossed", "-image", "-stipple", "-background"</pre></div>
<div class=perl><pre>Perl> <b>Tkx::ttk__style_element_options("Button.label")</b>
-compound -space -text -font -foreground -underline -width -anchor -justify 
-wraplength -embossed -image -stipple -background</pre></div>

<p>In the next sections, we'll look at the not-entirely-straightforward way to work with element options.</p>


 <a name="styleoptions"></a><h2>Manipulating Styles</h2>

<p>In this section, we'll see how to change the style's appearance by modifying style options.
You can do this either by modifying an existing style, or more typically, by creating a new style.
We saw how to create a simple style that was derived from another one earlier:</p>

<div class=python><pre>s.configure('Emergency.TButton', font='helvetica 24', foreground='red', padding=10)</pre></div>
<div class=tcl><pre>ttk::style configure Emergency.TButton -font "helvetica 24" -foreground red -padding 10</pre></div>
<div class=ruby><pre>Tk::Tile::Style.configure('Emergency.TButton', {"font" => "helvetica 24", "foreground" => "red", "padding" => 10})</pre></div>
<div class=perl><pre>Tkx::ttk__style_configure("Emergency.TButton", -font => "helvetica 24", -foreground => "red", -padding => 10);</pre></div>



<h3>Modifying a Style Option</h3>

<p>Modifying an option for an existing style is done in a similar fashion as modifying any other
configuration option, by specifying the style, name of the option, and new value:</p>

<div class=python><pre>s.configure('TButton', font='helvetica 24')</pre></div>
<div class=tcl><pre>ttk::style configure TButton -font "helvetica 24"</pre></div>
<div class=ruby><pre>Tk::Tile::Style.configure('TButton', {"font" => "helvetica 24"})</pre></div>
<div class=perl><pre>Tkx::ttk__style_configure("TButton", -font => "helvetica 24");</pre></div>
<p>You'll learn more about what the valid options are shortly.</p>

<div class=tip><p>If you modify an existing style, like we've done here with <code>TButton</code>, that modification will apply to all widgets using
that style (so by default, all buttons).  That may well be what you want to do.</p></div>

<p>To retrieve the current value of an option, use the <code>lookup</code> method:</p>

<div class=python><pre>>>> <b>s.lookup('TButton', 'font')</b>
'helvetica 24'</pre></div>
<div class=tcl><pre>% <b>ttk::style lookup TButton -font</b>
helvetica 24</pre></div>
<div class=ruby><pre>>> <b>Tk::Tile::Style.lookup('TButton', 'font')</b>
=> "helvetica 24"</pre></div>
<div class=perl><pre>Perl> <b>Tkx::ttk__style_lookup("TButton", "-font")</b>
helvetica 24</pre></div>



<h3>State Specific Style Options</h3>
<p>Besides the normal configuration options for the style, the widget author may have specified different options to 
use when the widget is in a particular widget state.  For example, when a button is disabled, it may change 
the button's label to grey.</p>

<div class=tip><p>Remember that the state is composed of one or more state flags (or their negation), as set by the widget's <code>state</code> method,
or queried via the <code>instate</code> method.</p></div>

<p>You can specify state-specific variations for one or more of a style's configuration options with a <em>map.</em> 
  For each configuration option, you can specify a list of widget states, along with
the value that option should be assigned when the widget is in that state. </p>


<p>The following example provides for the following variations from a button's normal appearance:
<ul>
<li> when the widget is in the disabled state, the background color should be set to <code>#d9d9d9</code>
<li> when the widget is in the active state (mouse over it), the background color should be set to <code>#ececec</code>
<li> when the widget is in the disabled state, the foreground color should be set to <code>#a3a3a3</code> (this is in addition to the background color change we already noted)
<li> when the widget is in the state where the button is pressed, and the widget is not disabled, the relief should be set to <code>sunken</code>
</ul>
<div class=python><pre>s.map('TButton', 
    background=[('disabled','#d9d9d9'), ('active','#ececec')],
    foreground=[('disabled','#a3a3a3')],
    relief=[('pressed', '!disabled', 'sunken')])</pre></div>
<div class=tcl><pre>ttk::style map TButton \ 
	-background [list disabled #d9d9d9  active #ececec] \ 
	-foreground [list disabled #a3a3a3] \ 
	-relief [list {pressed !disabled} sunken]</pre></div>
<div class=ruby><pre>Tk::Tile::Style.map ("TButton", 
    "background" => ["disabled"=>"#d9d9d9","active=>"#ececec"], 
    "foreground" => ["disabled"=>"#a3a3a3"], 
    "relief => ["pressed !disabled"=>"sunken"]);</pre></div>
<div class=perl><pre>Tkx::ttk__style_map("TButton", 
  -background => Tkx::list("disabled", "#d9d9d9", "active", "#ececec"), 
  -foreground => Tkx::list("disabled", "#a3a3a3"), 
  -relief => Tkx::list("pressed !disabled", "sunken"));
</pre></div>
</p>


<div class=fyi><p>Because widget states can contain multiple flags, more than one state may match an option
(e.g., <code>pressed</code> and <code>pressed !disabled</code> will both match if the widget's <code>pressed</code> state flag is set).	The list
of states is evaluated in the order you provide in the map command. The first state in the list that matches is used.</p></div>


 <a name="whydifficult"></a><h2>Sound Difficult to you?</h2>

<p>So you now know that styles are made up of elements, which have a variety of options, and are composed together in
a particular layout.  You can change various options on styles to make all widgets using the style appear differently.  
Any widgets using that style take on the appearance that the style defines.  Themes collect an entire set of related
styles, making it easy to change the appearance of your entire user interface.</p>

<p>So what makes styles and themes so difficult in practice?  Three things.  First:</p>

<blockquote>
You can only modify options for a style, not element options (except sometimes).
</blockquote>

<p>We talked earlier about how to discover what elements were used in the style by examining the style's layout, and
also how to discover what options were available for each element.  But when we went to make changes to a style,
we seemed to be configuring an option for the <em>style</em>, without specifying an individual element.  What's going on?</p>

<p>Again, using our button example, we had an element <code>Button.label</code>, which, among other things, had a <code>font</code>
configuration option.  What happens is that when that <code>Button.label</code> element is drawn, it looks at the
<code>font</code> configuration option set on the <em>style</em> to determine what font to draw itself in.</p>

<div class=fyi><p>To understand why, you need to know that when a style includes an element as a piece of it, that element
does not maintain any (element-specific) storage.  In particular, it does not store any configuration options
itself.  When it needs to retrieve options, it does so via the containing style, which is passed to the
element.  Individual elements, therefore, are "flyweight" objects in GoF pattern parlance.</p></div>

<p>Similarly, any other elements will lookup their configuration options from options set on the style.
What if two elements use the same configuration option (like a background color)?  Because there is
only one background configuration option, stored in the style, both elements will use
the same background color.  You can't have one element use one background color, and the other
use a different background color.</p>

<div class=yuck><p>Except when you can.  There are a few nasty, widget-specific things called <b>sublayouts</b> in the current
implementation, which let you sometimes modify just a single element, via configuring an option
like <code>TButton.Label</code> (rather than just <code>TButton</code>, the name of the style).  
</p><p>
Some styles also provide additional configuration options that let you specify what element the option effects.
For example, the <code>TCheckbutton</code> style provides a <code>background</code> option for the main
part of the widget and an <code>indicatorbackground</code> option for the box that shows whether it
is checked.
</p><p>
Are the cases where you can do this documented?  Is there some way to introspect to determine when you can do this?
Sometimes to both (believe it or not, this is an improvement; the answer to both used to be a clear "no").
You can sometimes find <b>some</b> of the style's options by calling the style's <code>configure</code> method without
providing any new configuration options. The reference manual pages for each themed widget now generally include
a <b>styling options</b> section that lists options that <b>may</b> be available to change.
</p><p>
This is one area of the themed widget API that continues to evolve over time.</p></div>

<p>The second difficulty is also related to modifying style options:</p>

<blockquote>
Options that are available don't necessarily have an effect, and it's not an error to modify a bogus option.
</blockquote>

<p>You'll sometimes try to change an option that is supposed to exist according to element options, but it
will have no effect.  For example, you can't modify the background color of a button in the <code>aqua</code> theme
used by macOS.  While there are valid reasons for these cases, it's not easy to discover
them, which can make experimenting frustrating at times.</p>

<p>Perhaps more frustrating when you're experimenting is that specifying an <code>incorrect</code> style name or option
name does not generate an error.  When doing a <code>configure</code> or <code>lookup</code> you can, in fact, specify any name
at all for a style, and specify any name at all for an option.  So if you're bored with the <code>background</code>
and <code>font</code> options, feel free to configure a <code>dowhatimean</code> option.  It may not do anything, but it's not
an error.  Again, it may make it hard to know what you should be modifying and what you shouldn't.</p>

<div class=fyi><p>This is one of the downsides of having a very lightweight and dynamic system.  You can create new styles
by just providing their name when configuring style options; this means you don't need to explicitly
create a style object.  At the same time, this does open itself to errors.  It's also not possible to find
out what styles currently exist or are used.  And because style options are really just a front end
for element options, and the elements in a style can change at any time, it's not necessarily obvious
that options should be restricted to those referred to by current elements alone, which may themselves
not all be introspectable.</p></div>

<p>Finally, here is the last thing that makes styles and themes so difficult:</p>

<blockquote>
	The elements available, the names of those elements, which options are available or have an effect for each of those elements, and which are 
		used for a particular widget can be different in every theme.
</blockquote>

<p>So?  Remember, the default theme for each platform (Windows, macOS, and Linux) is different (which is a good thing).  
  Some implications of this:</p>

<ol>
<li> If you want to define a new type of widget (or a variation of an existing widget) for your
application, you'll need to do it separately and differently for each theme your application uses (i.e., at least
three for a cross-platform application).
<li> The elements and options available will differ for each theme/platform, meaning you may have to come up with a 
quite different customization approach for each theme/platform.
<li> The elements, names, and element options available with each theme are not typically documented (outside of reading
the theme definition files themselves), but are generally identified via theme introspection (which we'll see soon).
Because all themes aren't available on all platforms (e.g., <code>aqua</code> is only available on macOS), you'll need ready 
access to every platform and theme you need to run on.
</ol>

<p>Consider trying to customize a button. You know it uses the <code>TButton</code> style. But that style is implemented using a different
  theme on each platform. If you examine the layout of that style in each theme, you'll discover each uses different elements, arranged 
  differently. If you try to find the advertised options available for each element, you see those are different too.
  And of course, even if an option is nominally available, it may not have an effect).</p>


<p>The bottom line is that in classic Tk, where you had the ability to modify any of a large set of attributes for an
individual widget, you'd be able to do something on one platform and it would sorta-kinda work (but probably need tweaking)
on others.  In themed Tk, the easy option just isn't there, and you're pretty much forced to do it the right way if you want
your application to work with multiple themes/platforms.  It's more work upfront.	</p>


 <a name="moreelements"></a><h2>Advanced: More on Elements</h2>
<p>While that's about as far as we're going to go on styles and themes in this tutorial, for curious users and those who
want to delve further into creating new themes, we can provide a few more interesting tidbits about elements.</p>

<p>Because elements are the building blocks of styles and themes, it begs the question of "where do elements come from?"
Practically speaking, we can say that elements are normally created in C code and conform to a particular API that 
the theming engine understands.</p>

<p>At the very lowest level, elements come from something called an <em>element factory</em>.  At present, there is a
default one, which most themes use, and uses Tk drawing routines to create elements.  A second allows you to create
elements from images and is actually accessible at the script level using the <code>ttk::style element create</code> 
method (from Tcl).  Any image format supported by Tk is available, including scalable image formats like SVG, if you have
the right extension. Finally, there is a third, Windows-specific engine using the underlying "Visual Styles" platform API.</p>

<p>If a theme uses elements created via a platform's native widgets, the calls to use those native widgets will 
normally appear within that theme's element specification code.  Of course, themes whose elements depend on native widgets 
or API calls can only run on the platforms that support them.  </p>

<p>Themes will then take a set of elements and use those to assemble the styles that are actually used by the widgets.
And given the whole idea of themes is that several styles can share the same appearance, it's not surprising that different 
styles share the same elements.</p>

<p>So while the <code>TButton</code> style
includes a <code>Button.padding</code> element, and the <code>TEntry</code> style includes an <code>Entry.padding</code> element, underneath, these
padding elements are more than likely one and the same.  They may appear differently, but that's because of different
configuration options, which as we recall, are stored in the style that uses the element. </p>

<p>It's also probably not surprising to find out that a theme can provide a set of common options that are used as defaults
for each style if the style doesn't specify them otherwise.  This means that if pretty much everything in an entire theme has 	
a green background, the theme doesn't need to explicitly say this for each style.  This uses a root style named <code>"."</code>. After all,
if <code>Fun.TButton</code> can inherit from <code>TButton</code>, why can't <code>TButton</code> inherit from <code>"."</code>?</p>

<p>Finally, it's worth having a look at how existing themes are defined, both at the C code level in Tk's
C library, but also via the Tk scripts found in Tk's "library/ttk" directory or in third-party themes.  
Search for <code>Ttk_RegisterElementSpec</code> in Tk's C library to see how elements are specified.</p>



<h1>Case Study: IDLE Modernization</h1>

<p>This chapter presents a case study of modernizing the appearance of a 
substantial Tk-based application.</p>

<div class=fyi><p>This chapter is currently (May 2019) a work in progress.
The code here is slowly finding its way into the Python source tree,
but most is not there yet.  You can find temporary snapshots on
<a href="../../external.html?link=https://github.com/roseman/idle">GitHub</a>.
</p></div>

<p><a href="../../external.html?link=https://docs.python.org/3/library/idle.html">IDLE</a>
(<u>I</u>ntegrated <u>D</u>eve<u>L</u>opment <u>E</u>nvironment) is
the standard Python development environment that is bundled with every
Python release. It consists of an interactive Python shell, editors with
syntax highlighting, a debugger, etc. Its user interface is written
in Tkinter.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_overview.png' alt='screen shot'><br />
Overview of IDLE user interface (on Linux).</p>

<p>IDLE was never intended to be a replacement for more full-featured
development environments. Because it is relatively simple and integrated,
and because it is bundled with Python, it is popular for those learning 
(and teaching) the language.</p>

<p>Originally created by Python BDFL Guido van Rossum in 1998, IDLE has been
incrementally added to over the years by multiple other developers. But with
limited development effort spent on it, it was showing its age, especially
on platforms (e.g., macOS) infrequently used by those improving IDLE.</p>

<p>A <a href="../../external.html?link=https://pythoncentral.io/comparison-of-python-ides-development/">Python Central comparison of IDE's</a> described IDLE this way:</p>
<blockquote>
All those features are, in fact, present, but they do not really make an IDE. In fact, while IDLE offers some of the features you expect from an IDE, it does so without even being a satisfactory text editor. The interface is buggy and fails to take into account how Python works, especially in the interactive shell, the auto-completion is useless outside the standard library, and the editing functionality is so limited that no serious Python programmer  heck, no serious
typist  could use it full-time.<br>&nbsp;<br>
If you use an IDE, it should not be IDLE.
</blockquote>

<p>With its buggy and dated user interface, IDLE was 
<a href="../../external.html?link=https://mail.python.org/pipermail/idle-dev/2015-July/003534.html">at
some risk</a> of being removed from the Python distribution altogether.
Yet, because of the relative simplicity and it being bundled, there were a
number of people, particularly those teaching Python, eager to see IDLE 
leap forward.</p>

<p>IDLE was obviously a great candidate to be modernized, using newer Tk
features like the themed widgets to help spur some redesign. But it was about
more than just swapping widgets. Many improvements could be made just by
changing how the "classic" widgets were being used, to better reflect a
more modern design aesthetic.</p>

<div class=fyi><p>Because IDLE, which is an application, was a part of Python's
standard library (i.e., 99% designed to be used by other code), 
there were many policies and procedures not really
appropriate for an application that made changes difficult. Removing
some of those roadblocks 
(see <a href="../../external.html?link=https://www.python.org/dev/peps/pep-0434/">PEP 434</a>)
was a significant step required for the types of changes being
discussed here.</p></div>

 <a name="idlegoals"></a><h2>Project Goals</h2>

<p>As you can imagine, modernizing a large application like this, based on
"classic" Tkinter, was not entirely straightforward. In this chapter, I'll
walk through some of the user interface changes that were made and why.</p>

<p>Everyone involved wanted to see IDLE look a lot better than it did,
though nobody was under the illusion that it was going to turn into a
stunning example of cutting-edge design. But something that fit in more,
so that people could learn about Python without getting distracted by
the clumsiness of their tools, seemed doable.</p>

<p>The goal also wasn't to try to compete with Python IDE's more commonly
used by professional programmers, such as <a href="../../external.html?link=https://www.jetbrains.com/pycharm/">PyCharm</a>, <a href="../../external.html?link=https://www.wingware.com/">WingIDE</a>, <a href="../../external.html?link=https://www.pydev.org/">PyDev</a>, <a href="../../external.html?link=https://www.activestate.com/komodo-ide">Komodo</a>, etc. Though some
more experienced Python developers did use IDLE, either sporadically or
regularly, it primarily needed to appeal to newcomers to the language,
and often those new to programming altogether.</p> 

<p>There has been no shortage of previous attempts to radically advance
IDLE, resulting in a number of different <em>forks</em> that boasted all
kinds of improvements. Many of them used other GUI toolkits or modules
that weren't part of the standard library. It was important here to stay with
Tkinter and the standard library because we wanted to ensure every
improvement could, over time, make it into the <em>official</em> version that ships
with Python, rather than becoming just another fork.</p>

<p>As well, the hope was to make IDLE easier to contribute to. This suggested
pruning down a substantial volume of code, removing some redundancies
and inconsistencies, cleaning up some of the more complex pieces, simplifying
interactions between system components, etc. There was also a 
substantial list of reported bugs that we hoped to make a dent in.</p>

<p>While no less important, I'll largely defer discussion of the substantial
issues surrounding software architecture, backward compatibility (including
systems running Tk 8.4, pre-ttk, which received only a few selective
improvements), etc. </p>

<p>Throughout this chapter, you'll find links to individual issues in
Python's issue tracking system, which often provide additional insight into
various peoples' thought processes around changes.</p>

<div class=fyi><p>As you'll see, this chapter highlights many of the shortcomings of
IDLE's user interface. This is done mainly for emphasis because many of
the problems shown here are common to many applications and user interfaces.
I have only the highest respect for the people who donated their limited
time and resources to this open source project and had to consciously make
tradeoffs between time, features, and user interface, all within the context 
of a decidedly non-trivial codebase.</p></div>

<p>As the material in this chapter relates to a specific
Python application, all the examples will be given solely in Python and
using Tkinter. So if you're wondering why you're seeing Python code
here where you didn't everywhere else, that's why.</p>



 <a name="idlemenus"></a><h2>Menus</h2>

<p>The very first change that was made was to remove the archaic
tearoff menus.  The macOS version of Tk
doesn't even support them, but they were still there on Windows and X11.
See [<a href='../../external.html?link=http://bugs.python.org/issue13884'>Issue#13884</a>].</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/tearoff.png' alt='screen shot'><br />
Tearoff menus on Windows and Linux.</p>

<p>The change here was to add a "tearoff=0" option to the few places in the
code where these menus were created.</p>

<p>At least that was easy.</p>

<p>There were also several bugs where items in the menu were not
properly disabled when the feature was not available. This led to
either menu items that did nothing (confusing for learners) or error
dialogs that said little more than "you can't do that."</p>

 <a name="idlemainwin"></a><h2>Main Window</h2>

<p>One good thing about IDLE is that revolving around an editor and a shell,
the majority of it really is a Tk text widget, and there was very little 
about <em>its</em> user interface that had to change. But even in the main window,
which is mostly just a text widget, there were improvements to be had.</p>

<p>The following images show the original version of IDLE's shell window,
pre-modernization, just as someone would see when they first launched
the program.</p>

<p>Looking at them, what improvements would you make?</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_main_m.png' alt='screen shot'><br />
Main IDLE window on macOS.</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_main_w.png' alt='screen shot'><br />
Main IDLE window on Windows.</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_main_l.png' alt='screen shot'><br />
Main IDLE window on Linux.</p>


<h3>Default Font</h3>

<p>The first change that was made had to do with the default font. IDLE
hardcoded 10 point Courier and used that on all platforms. This didn't
actually look too bad in Windows, was ok on Linux, but looked terrible
on macOS; see [<a href='../../external.html?link=http://bugs.python.org/issue24745'>Issue#24745</a>]. Sure this could be changed through a preferences
dialog, but the defaults certainly didn't leave a good impression.</p>

<p>While one option would simply be to write the code to pick a good font
depending on which platform we're running on, instead the default was
changed to use Tk's built-in <code>TkFixedFont</code>, which provides a better
default on each platform.</p>

<p>You can see the differences in the screenshots below. Notice how the
new fonts seem to match better with system terminal windows that are shown.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/font-mac.png' alt='screen shot'><br />
IDLE main window using TkFixedFont (macOS).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/font-win.png' alt='screen shot'><br />
IDLE main window using TkFixedFont (Windows).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/font-linux.png' alt='screen shot'><br />
IDLE main window using TkFixedFont (Linux).</p>

<p>Speaking of preferences dialogs, if you want to change the font it often
helps to know what the font actually is (using <code>Font.actual</code>). 
Here's the new code from IDLE's preferences dialog that figures that out:</p>
<pre>
        if (family == 'TkFixedFont'):
            f = Font(name = 'TkFixedFont', exists = True, root = root)
            actualFont = Font.actual(f)
            family = actualFont['family']
            size = actualFont['size']
            if size < 0:
                size = 10  # if font in pixels, ignore actual size
            bold = 1 if actualFont['weight']=='bold' else 0
</pre>
<p>For the record, the fonts that Tk chose for TkFixedFont are
Monaco 11 on macOS, Courier New 10 on Windows, and DejaVu Sans Mono 10
on Linux (Ubuntu 14 to be specific).</p>

<h3>Around the Text Widget</h3>

<p>There were a few other cosmetic things that just weren't right around
the edge of the main window; see [<a href='../../external.html?link=http://bugs.python.org/issue24750'>Issue#24750</a>]. 
Look back at the earlier screenshots of the IDLE main window.</p>

<p>Notice there's a border around the text widget.
It's most noticeable on macOS where it's a dark black, somewhat less so on
Linux, and barely perceptible on Windows. This is the result of Tk's
"highlightthickness" attribute, which is present when the text widget
has the focus.</p>

<p>If the text widget doesn't have the focus, such as when the window
becomes inactive, the highlight goes away:</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_nofocus_all.png' alt='screen shot'><br />
Status bar on inactive window.</p>

<p>Notice how on the macOS screenshot, without the highlight, the status
bar at the bottom of the window blends into the text widget. Not good.</p>

<p>As you'll see from looking at other applications, the border around the
text widget is no longer a common convention. So let's start by removing
that, which is as easy as adding "highlightthickness=0" when we create the
text widget.</p>

<p>That still leaves us with the problem of the status bar blending into
the editor. We changed the status bar to be a <code>ttk.Frame</code> widget,
which has a background shading on all platforms. We also placed a 
<code>ttk.Separator</code> widget just above the status bar, to give us that
clean separation.</p>

<p>Each of the line and column indicators were labels, 
previously created with:</p>
<pre>label = Label(self, bd=1, relief=SUNKEN, anchor=W)</pre>

<p>This was replaced with a <code>ttk.Label</code>, to ensure it matched
the frame. We also did away with the 1990's sunken "3d" look.</p>
<pre>label = ttk.Label(self)</pre>

<p>Last but not least, we can replace the original Tk scrollbar with the
newer <code>ttk.Scrollbar</code> widget.</p>

<p>The resulting changes to the main window are shown below. Despite these
being fairly minor, often subtle changes, they go a long way towards IDLE's
main window looking a lot cleaner, more modern, and "just fitting in" on 
all platforms.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idlenew_m.png' alt='screen shot'><br />
IDLE's main window, with improvements (macOS).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idlenew_w.png' alt='screen shot'><br />
IDLE's main window, with improvements (Windows).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idlenew_l.png' alt='screen shot'><br />
IDLE's main window, with improvements (Linux).</p>



 <a name="idleprefs"></a><h2>Preferences Dialog</h2>

<p>One visible piece that greatly needed improvement was the Preferences dialog.
Again, here are screenshots on the three platforms:</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idleprefs_m.png' alt='screen shot'><br />
IDLE's Preferences window (macOS).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idleprefs_w.png' alt='screen shot'><br />
IDLE's Preferences window (Windows).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idleprefs_l.png' alt='screen shot'><br />
IDLE's Preferences window (Linux).</p>

<p>The other tabs allow you to modify individual colors for syntax highlighting,
keystrokes assigned to particular operations, and a few other miscellaneous
things.</p>

<p>While there was some debate as to the need for this level of configuration
on what was primarily a learning environment, it seemed
reasonable to at least make what was there look and work better before
considering any more radical surgery; see [<a href='../../external.html?link=http://bugs.python.org/issue24810'>Issue#24810</a>].</p>

<p>Among other things, the Preferences dialog was changed from modal
(which, amusingly enough, didn't quite work on macOS, allowing multiple
copies to be created) to modeless, though I won't go 
further into that at this point; see [<a href='../../external.html?link=http://bugs.python.org/issue24760'>Issue#24760</a>].</p>

<h3>Tabs</h3>

<p>The first issue to address was the tabs used to switch between the four
different preference panes. The original used a custom "megawidget", as
classic Tk doesn't have its own widget. While the Windows and Linux ones
don't look too bad, on recent versions of macOS, there is a built-in tab
widget that looks quite different.</p>

<div class=tip><p>It's actually more common in macOS applications now to use something
similar to a toolbar (row of icons with labels along the top or side) to
switch between preference panes, though some programs do still use tabs.
Tabs are very common on Windows and Linux.</p></div>

<p>The code was modified to use the <code>ttk.Notebook</code> widget,
which not only looks better on each platform but allows us to jettison
a lot of code for managing tabs ourselves.</p>

<h3>Updating Widgets</h3>

<p>The next obvious step was upgrading the "classic" widgets to their
themed counterparts. On this screen, that included the buttons, labels,
frames, checkbox, scrollbar, etc. There were
a few others on some of the other panes.  Generally, this was a 
straightforward process, often involving removing widget options that
were no longer needed or supported by the themed widgets.</p>

<p>Sometimes choosing a different widget made more sense. In this screen,
the option menu used for font size was better replaced by a combobox.
Similarly, the scale widget is not commonly seen in today's user interfaces 
and was replaced with the more familiar (and compact) spinbox widget.</p>

<p>There were also various non-standard ways of using certain widgets
or specifying certain types of data. These were generally modified to
use more familiar paradigms. There were a number of general issues
discussed relating to the design of these dialogs, see, e.g., [<a href='../../external.html?link=http://bugs.python.org/issue24776'>Issue#24776</a>], and 
[<a href='../../external.html?link=http://bugs.python.org/issue24782'>Issue#24782</a>].

<h3>Layout</h3>

<p>While this dialog is a bad example, just given the space imbalance
between the left and right halves, a lot of time was spent in general
looking at widget spacing and alignment in dialog boxes.</p>

<p>The general approach was to find similar examples in other applications
and use those as a guide. Where are the buttons located? How are multiple
fields of a dialog organized? Where are labels relative to the widget
they're labeling? Are they left- or right-aligned, capitalized, do they 
have a trailing colon? These are the sorts of questions to think about.</p>

<div class=tip><p>A great starting point is converting from using the old <code>pack</code>
geometry manager to <code>grid</code>. Because of the way it works, <code>pack</code>-based
layouts tend to have weird and inconsistent alignment and spacing, 
especially if they've been modified over time. Using <code>grid</code> will increase
maintainability, both because it uses a more familiar mental model and
because it's not dependent on the order in which widgets are inserted.</p></div>

<p>It's likely impossible to come up with one layout that looks fantastic
on all platforms, but often you can come up with one (possibly with a couple
platform-specific tweaks in the code) that looks decent.</p>

<p>A revised version of the dialog, incorporating many of the techniques
here, is shown below.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idleprefs_new_m.png' alt='screen shot'><br />
IDLE Preferences, revised version (macOS).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idleprefs_new_w.png' alt='screen shot'><br />
IDLE Preferences, revised version (Windows).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idleprefs_new_l.png' alt='screen shot'><br />
IDLE Preferences, revised version (Linux).</p>

<h3>Another Example</h3>

<p>The screenshot below shows a before and after of the IDLE Preferences
pane, which controls syntax coloring; see [<a href='../../external.html?link=http://bugs.python.org/issue24781'>Issue#24781</a>].</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_themes_before.png' alt='screen shot'><br />
IDLE Themes pane, before (Windows).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_themes_after.png' alt='screen shot'><br />
IDLE Themes pane, after (Windows).</p>

<p>Again, substituting widgets and using more familiar conventions is one 
piece of this. I think the bigger changes have to do with thinking about 
things from the users' perspective. Particularly as a beginner tool, if you're
in here at all, it's probably to switch themes, not tweak colors, which 
is more prominent in the new version. It also does away with an arbitrary
distinction between "built-in" and "custom" themes.</p>

<p>I think the new version is a big improvement, though as of this writing
I have yet to convince some people of this. This being open source, we'll 
see what happens!</p>

 <a name="idledialogs"></a><h2>Other Dialogs</h2>

<p>There are multiple other dialog boxes in IDLE; we'll consider a couple
more examples here.</p>

<h3>Find Dialog</h3>

<div class=fyi><p>Planning on doing some more changes on these, likely combining
Find and Replace into a single dialog.</p></div>

<p>One of the find/search dialogs is shown below, 
again with before and after on the three platforms; see [<a href='../../external.html?link=http://bugs.python.org/issue23218'>Issue#23218</a>].</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_find_m.png' alt='screen shot'><br />
IDLE Find dialog, before and after (macOS).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_find_w.png' alt='screen shot'><br />
IDLE Find dialog, before and after (Windows).</p>
<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_find_l.png' alt='screen shot'><br />
IDLE Find dialog, before and after (Linux).</p>

<p>The first step was upgrading the widgets to use the equivalent
themed widgets. The effect of this is most obvious with the buttons
(being consistent with the capitalization doesn't hurt either).</p>

<p>Speaking of buttons, notice that in the new version, the buttons
are on the right on Windows (where they were on all before), but at
the bottom for macOS and Linux. On examining multiple different
applications, our target users would likely have encountered on each
platform, we found these locations were common. With only a few
lines of extra code needed to special case for this layout difference,
it made sense to handle things this way.</p>

<p>Other aspects of the layout were also improved. Looking at the original
dialogs (especially how the buttons don't quite line up with other widgets),
I originally thought it was created with <code>pack</code>, and expected to convert it
to <code>grid</code>. Interestingly, it was already using <code>grid</code>. Why then the unaligned
widgets, a hallmark of <code>pack</code>-based layouts?</p>

<p>This turned out to be a result of using many <em>nested frames</em>.
For example, the buttons were placed into their own frame, and then that
placed into the rest of the window. Because of that, the individual buttons
couldn't be aligned with widgets in the rest of the user interface.</p>

<p>Nested frames were required when using <code>pack</code>, but often with <code>grid</code> it is
better to avoid them except in exceptional circumstances. That allows you
to make different parts of the user interface line up (at the expense of
dealing with a lot of columnspan/rowspan tweaking).</p>

<p>A more substantial reorganization would have likely removed the nested
frames, but particularly with adjusting the buttons, this relatively simple
layout could be made to work with just a few tweaks.</p>

<div class=tip><p>You'll notice a lot of older Tkinter user interfaces have the problem
here of their contents running to the edge of the windows, which often
doesn't look right. I've gotten into the habit of placing a <code>ttk.Frame</code>
directly inside each toplevel, with some additional padding, and then
placing the rest of the user interface inside that.</p></div>

<p>Like Preferences, the Find dialogs were also modal, which meant you
had to dismiss them before doing any editing of your file, though at least
they did remember the previous settings when you reopened them. These
were eventually changed to be regular modeless windows.</p>

<h3>About Dialog</h3>

<p>Speaking of modal dialogs, the About box was also originally modal.
Not only that, getting more information (e.g., the IDLE README file)
resulted in launching <em>another</em> modal dialog, which needed to
be dismissed to go back to the first modal dialog, which needed... etc.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_about.png' alt='screen shot'><br />
IDLE's doubly-modal About dialog (macOS).</p>

<p>Making the dialog non-modal was the first priority. Second, the nested
dialogs were eliminated using a progressive disclosure technique. The
dialog when launched is fairly sparse but contains a 'More...' "link." 
When clicked, it expands the window to show one of the documentation
files, with an option to switch to any of the others.</p>

<p>The 'More...' "link" is effectively playing the role of a button, but
taking advantage of everyone's familiarity with web browsers to provide
a visually simpler alternative. As far as implementation, we use a 
(classic, non-themed) label widget, colored blue, and attach a mouse
click binding to it.</p>

<div class=tip><p>One thing you can do to help convey that the link is clickable
is to change the cursor when the mouse is over it (via the "cursor" option
found on many widgets). On macOS, choose the platform-specific "pointinghand"
cursor, on Windows and Linux choose the "hand2" cursor, which actually gets
mapped to something more appropriate on those platforms.</p></div>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_newabout.png' alt='screen shot'><br />
Revised About dialog (macOS).</p>

<h3>Online Help</h3>

<p>IDLE also had a (needless to say, modal) help dialog which displayed
information on using the program. This displayed a plain text help file that
looked similar to the 'About - Readme' window above.</p>

<p>At the same time, like the rest of Python, there was 
<a href="../../external.html?link=https://docs.python.org/3/library/idle.html">reference 
documentation</a>, created as "restructured text" which can then be 
formatted using a tool called <a href="../../external.html?link=https://sphinx-doc.org/">Sphinx</a>
into HTML, text, etc.</p>

<p>The documentation in IDLE's help dialog was based on a separate, but
similar plain text file. Keeping the two in sync was a problem. They were
separate because Sphinx's plain text rendering didn't look all that good,
and all the extra navigation, etc. in the HTML rendering wouldn't be needed
for online help, and then there's the hassle of opening a web browser, 
etc.; see [<a href='../../external.html?link=http://bugs.python.org/issue16893'>Issue#16893</a>].</p>

<p>Tk's text widget is smart enough to handle the very basic formatting
used in IDLE's documentation, and Python includes an HTML parser in its
standard library. Putting the two together made displaying a simplified
version of the HTML reference documentation easy.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_newhelp.png' alt='screen shot'><br />
Online help using text widget (macOS).</p>

<div class=fyi><p>It's easy to get carried away here. Back in the mid-1990s, a tiny
<a href="../../external.html?link=https://wiki.tcl.tk/14517">HTML parser in Tcl</a> spawned a slew of
"web browser in a text widget" adventures, first in Tcl and then in other
languages, e.g., Python's Grail. Trying to keep up with everything that
large teams of developers are putting into real web browsers is a fool's
errand. Yet, for very limited and constrained subsets of HTML (as might be
found in online help), it's an entirely reasonable approach.</p></div>

<h3>Query Dialogs</h3>

<p>Still with the modal dialog theme, IDLE used the "simpledialog" package,
which is distributed as part of Tkinter to request certain small pieces
of information from users via modal dialogs. An example is the
"Goto line..." command. This, along with an example of the alert that
is presented if you type in something invalid is shown below.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_goto.png' alt='screen shot'><br />
Goto line dialog and error handling (macOS).</p>

<p>The alert-on-dialog isn't quite as bad as the dialog-on-dialog pattern we
saw before. But these dialogs could certainly stand to be cosmetically
updated, and a few other tweaks made. For example, while they correctly
interpreted hitting the Return or Escape keys as synonymous with pressing
OK or Cancel, they didn't also allow for the alternate macOS conventions 
(Enter key on the numeric keypad and Command-period); see [<a href='../../external.html?link=http://bugs.python.org/issue24812'>Issue#24812</a>]. There
were some other customizations that would have been nice to have, e.g.
changing the name of the OK button, that simpledialog didn't support.</p>

<p>Regarding the error handling, things were, in some cases, handled worse.
For example, there is a command to open an editor window containing the
source of a module from Python's stdlib.  See what happens if you make a
typo.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_openmodule.png' alt='screen shot'><br />
Open module dialog with error (macOS).</p>

<p>Because the dialog doesn't know if the module name is correct, validation
isn't done until after the dialog is dismissed. So the error alert gets
attached to another window. To try again, you have to dismiss that, 
use the menu to reopen the dialog, and try again (from scratch).</p>

<p>There were a couple of places in the code where more validation in the
dialog was really necessary. Because the "simpledialog" code was part
of Tkinter and wasn't readily extensible in the ways needed, developers
had to resort to "inheritance by text editor" (i.e., copy the entire
simpledialog code and modify the copy). Twice, separately.</p>

<p>Since the appearance needed to be updated anyway, we generalized things
and ignored what was in Tkinter's simpledialog module altogether. Instead,
a single general-purpose replacement was created that could be used throughout
IDLE (and still resulted in less code).</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_querydialog.png' alt='screen shot'><br />
New query dialog (macOS).</p>

<p>Besides the updated widgets and alignment, notice how error messages
from invalid input are now shown in the dialog itself (a technique seen
frequently in web applications), rather than a separate alert. For macOS,
we also made sure to add key bindings for the numeric keypad Enter key
and Command-period, and also made sure the window looked like a modal
dialog is supposed to via this little gem:</p>

<pre>self.tk.call('::tk::unsupported::MacWindowStyle', 'style', self._w,
             'moveableModal', '')</pre>

<p>As far as validation, the query dialog was structured to accept a 
validation callback, which could then handle arbitrary criteria.  For
example, here is the validation code used when people enter the name
of a new theme. It makes sure it fits certain syntactical requirements
and also hasn't been already used.</p>

<pre>def newtheme(self):
    def validate_theme(s):
        if not s:
            raise ValueError('Cannot be blank')
        if len(s) > 30:
            raise ValueError('Cannot be longer than 30 characters')
        if s in self.all_theme_names():
            raise ValueError('Name already used')
    new_theme = querydialog.askstring(parent=self, prompt='...',
            title='Create New Theme', validatecmd=validate_theme)
    if new_theme is not None:
        ...</pre>

<p>A generic 'integer' validation callback, with an optional minimum and
maximum, was added as part of the query dialog module for dialogs
like the 'Goto line...' dialog.</p>

<h3>Dialog Placement</h3>

<p>Several dialogs, including alerts, file save, etc. were appearing in
the middle of the screen, rather than close to the window that they were
associated with; see [<a href='../../external.html?link=http://bugs.python.org/issue25173'>Issue#25173</a>].</p>

<p>Choosing the right window as the <code>parent</code> of the dialog is 
important. It ensures the dialog window appears near that window.
On macOS, these dialogs are often attached to the title bar of the
parent window (see the error alerts in the previous section).<p>

<div class=tip><p>The front ends to these dialogs in Tkinter support both a <code>master</code>
and a <code>parent</code>. While most of the time, "master" and "parent" are used
interchangeably in Tkinter, that's not the case here. If you provide only the
master, the dialog won't be attached to that window (but the dialog still 
needs an existing window to create the dialog, which is why the master 
parameter is there). If the dialog is associated with another window, be 
sure to use the parent parameter.</p></div>

 <a name="idleintegration"></a><h2>Window Integration</h2>

<p>Multiple people had hoped to make it possible to have everything displayed
in a single window, to avoid the window management hassles that can sometimes
trip up people, see, e.g., [<a href='../../external.html?link=http://bugs.python.org/issue9262'>Issue#9262</a>], [<a href='../../external.html?link=http://bugs.python.org/issue24826'>Issue#24826</a>], and [<a href='../../external.html?link=http://bugs.python.org/issue24818'>Issue#24818</a>].</p>

<p>Below is an early, partially-functional mockup of some of the things
we wanted to be able to accomplish. </p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_onewindow.png' alt='screen shot'><br />
Early mockup of window integration (macOS).</p>

<div class=fyi><p>At this point, almost everything here has been completed, and
it ended up looking almost identical to the original mockup. See,
once in a while, it happens!</p></div>

<h3>Tabbed Editor</h3>

<p>Even beginner programmers have to juggle multiple different source 
files. If each gets its own window, as was the case originally in IDLE,
things can get messy and/or lost pretty quickly. Using tabs to organize
multiple files in a single window is a familiar, effective solution.</p>

<div class=tip><p>When architecting your application, don't build large components
as subclasses of Toplevel, or assume they'll be the only thing in the
window in the future. Getting around that assumption in the code took a 
large amount of work.
If components are instead built as frames, they can be more easily inserted into
a toplevel, a paned window, a tabbed notebook, another frame, etc.</p></div>

<p>Luckily, we can rely on the ttk.Notebook widget to provide the tabbed
user inteface, just like we did in Preferences.</p>

<p>Or maybe not.</p>

<p>Unfortunately, the ttk.Notebook widget (and the underlying platform
widgets it uses) only really support displaying and switching between a 
small, fixed number of tabs. There's nothing built-in to support adding
or closing tabs from the user interface, which we definitely need here.
And as every programmer knows, it is more than possible to need a large 
number of tabs.</p>

<p>As you've seen in different editors and word processors, everyone does
things slightly differently. We did our own custom tab widget (sigh...)
for IDLE. The design borrowed heavily from the 
<a href="../../external.html?link=https://macromates.com/">TextMate</a> editor on macOS. 
It allows creating new tabs, closing old ones, dragging to rearrange
the order, tooltips on each tab, indicating if the contained file needed
saving, etc. When the number of tabs grows too large to comfortably display,
the remainder are accessible via a popup menu on the last visible tab.</p>

<div class=fyi><p>The tabbed widget implementation relies on a single Tkinter canvas to
display the row of tabs and handle all interaction. The actual switching
of window content is handled completely outside of the widget, with a 
simple callback mechanism used to coordinate everything.</p></div>

<h3>Debugger</h3>

<p>The design of the original debugger, along with having its own set of 
flaws (see [<a href='../../external.html?link=http://bugs.python.org/issue17942'>Issue#17942</a>]), was too tall to be integrated like we wanted to do.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_debugger.png' alt='screen shot'><br />
Original IDLE debugger (macOS).</p>

<p>The user interface was substantially revised, with a layout that would work
both in a standalone window and when integrated. The new version uses a
paned window to separate the controls and stack on the left from the variable
display on the right. Both the stack and variable display are implemented
using tree view widgets. This also provides a great deal of control when
it comes to how much space each element will use.</p>

<p class=picture>
<img class='border-0 img-fluid' src='../images/idle_newdebugger.png' alt='screen shot'><br />
New IDLE debugger (macOS).</p>


<h3>Integrated Shell and Debugger</h3>

<p>To achieve the integration of the shell and the debugger with the
tabbed editor, another paned window was used. Additional controls will
be added to show/hide the panes as the implementation progresses.</p>

<p>The embedded shell is interesting too. Recall that IDLE normally
has a single Python shell window running another Python process; 
when modules in an editor are "run," they do so via that shell. 
It's nice to have that big shell available, and we don't necessarily 
want to start up a separate shell in the editor.</p>

<p>New in Tk 8.5, the Text widget actually supports the ability to create
"peers," which are separate widgets, but they share the same text backend.
That means when something changes in one, it changes in the other. It's
a seamless way to solve our problem here.</p>

 <a name="idlehacks"></a><h2>Workarounds, Hacks, and More</h2>

<p>This being a chapter on actual experiences modernizing a real application,
it would be a lie to say that the underlying user interface toolkit 
(Tk and the Tkinter wrapper) always worked exactly as it should. Like
IDLE, Tkinter and Tcl/Tk are the results of incredible volunteer
efforts. That being said...</p>

<div class=yuck><p>Tk and Tkinter have some bugs and rough edges. 
I know you're shocked.</p></div>

<p>In this section, I'll try to catalog just a few of the particular "gotchas"
that we ran into, as well as provide some little tips that don't necessarily
fit elsewhere but help provide a bit more polish to the user interface.</p>

<h3>Tool Tips</h3>

<ul>
<li>tool tips broken on macOS; see [<a href='../../external.html?link=http://bugs.python.org/issue24570'>Issue#24570</a>]
<li><code>MacWindowStyle</code> help for tooltips, vs. <code>wm overrideredirect</code> elsewhere
</ul>

<h3>Context Menus</h3>

<ul>
<li> bogus text widget bindings interfere with popup clicks;see [<a href='../../external.html?link=http://bugs.python.org/issue24801'>Issue#24801</a>]
<li> two different popup click bindings needed on macOS; [<a href='../../external.html?link=http://bugs.python.org/issue24801'>Issue#24801</a>]
</ul>

<h3>Peer Text Widgets</h3>

<ul>
<li>broken peer text widget API in Tkinter;see [<a href='../../external.html?link=http://bugs.python.org/issue17945'>Issue#17945</a>]
</ul>

<h3>Modal Windows</h3>

<ul>
<li> macOS not doing fully modal, plus window style;see [<a href='../../external.html?link=http://bugs.python.org/issue24760'>Issue#24760</a>]
</ul>

    <script src="../../code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous"></script>
    <script src="../../stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" integrity="sha384-6khuMg9gaYr5AxOqhkVIODVIvm9ynTT5J4V1cfthmT+emCG6yVmEZsRHdxlotUnm" crossorigin="anonymous"></script>
    <script src="../tkdocs.js"></script>
    <script type='text/javascript'>setDefaultLang()</script>
</body>

<!-- Mirrored from tkdocs.com/tutorial/onepage.html by HTTraQt Website Copier/1.x [Karbofos 2012-2017] dim., 21 mars 2021 07:06:37 GMT -->
</html>



